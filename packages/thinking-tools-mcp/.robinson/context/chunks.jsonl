{"id":"c8191baa47ee39f331ebefb2ecb1fb31034159d1","source":"repo","path":"package.json","sha":"6ee9ad250169d7523fb3f07bb99aa5d136bbb76a","start":1,"end":40,"text":"{\n  \"name\": \"@robinson_ai_systems/thinking-tools-mcp\",\n  \"version\": \"1.1.1\",\n  \"description\": \"Comprehensive Thinking Tools MCP - 24 cognitive frameworks + Context Engine with semantic search\",\n  \"type\": \"module\",\n  \"main\": \"dist/index.js\",\n  \"bin\": {\n    \"thinking-tools-mcp\": \"./dist/index.js\"\n  },\n  \"scripts\": {\n    \"build\": \"tsc\",\n    \"watch\": \"tsc --watch\",\n    \"prepare\": \"npm run build\",\n    \"ctx:index\": \"node ./dist/context/indexer.js\",\n    \"ctx:reset\": \"node -e \\\"const fs=require('fs');const files=['.robinson/context/chunks.jsonl','.robinson/context/embeddings.jsonl'];files.forEach(f=>{try{fs.unlinkSync(f)}catch{}});console.log('reset ok')\\\"\"\n  },\n  \"keywords\": [\n    \"mcp\",\n    \"thinking\",\n    \"reasoning\",\n    \"cognitive-frameworks\",\n    \"ai\",\n    \"devils-advocate\",\n    \"critical-thinking\",\n    \"first-principles\"\n  ],\n  \"author\": \"Robinson AI Systems\",\n  \"license\": \"MIT\",\n  \"dependencies\": {\n    \"@modelcontextprotocol/sdk\": \"^1.20.1\",\n    \"@mozilla/readability\": \"^0.4.4\",\n    \"axios\": \"^1.12.2\",\n    \"diff\": \"^5.2.0\",\n    \"fast-glob\": \"^3.3.2\",\n    \"jsdom\": \"^22.1.0\",\n    \"micromatch\": \"^4.0.8\",\n    \"node-fetch\": \"^3.3.2\",\n    \"p-limit\": \"^4.0.0\",\n    \"remark\": \"^15.0.1\",\n    \"remark-parse\": \"^11.0.0\","}
{"id":"86bd1835fdb8ae2c3fc59d417c60b7fa079efe30","source":"repo","path":"package.json","sha":"6ee9ad250169d7523fb3f07bb99aa5d136bbb76a","start":41,"end":50,"text":"    \"undici\": \"^6.20.0\",\n    \"unified\": \"^11.0.5\"\n  },\n  \"devDependencies\": {\n    \"@types/node\": \"^22.10.5\",\n    \"typescript\": \"^5.7.3\",\n    \"zod\": \"^3.24.1\"\n  }\n}\n"}
{"id":"703fab422f228fd0b64302614b87368f792b7bbe","source":"repo","path":"tsconfig.json","sha":"aa3a9823af5bb1f5d345c82bdeb14e5716dd9505","start":1,"end":19,"text":"{\n  \"compilerOptions\": {\n    \"target\": \"ES2022\",\n    \"module\": \"Node16\",\n    \"moduleResolution\": \"Node16\",\n    \"outDir\": \"./dist\",\n    \"rootDir\": \"./src\",\n    \"strict\": true,\n    \"esModuleInterop\": true,\n    \"skipLibCheck\": true,\n    \"forceConsistentCasingInFileNames\": true,\n    \"resolveJsonModule\": true,\n    \"declaration\": true\n  },\n  \"include\": [\"src/**/*\"],\n  \"exclude\": [\"node_modules\", \"dist\"]\n}\n\n"}
{"id":"161a8f2b7aa1de0e8a5065485d580efebd0ebfed","source":"repo","path":"src/index.ts","sha":"41f1f94e63a16c89c77199fc5d559dab319ec54c","start":1,"end":31,"text":"#!/usr/bin/env node\n\n/**\n * @robinsonai/thinking-tools-mcp\n * Comprehensive Thinking Tools MCP Server\n * Provides 18 cognitive frameworks for structured reasoning\n * By Robinson AI Systems\n */\n\nimport { Server } from '@modelcontextprotocol/sdk/server/index.js';\nimport { StdioServerTransport } from '@modelcontextprotocol/sdk/server/stdio.js';\nimport {\n  CallToolRequestSchema,\n  ListToolsRequestSchema,\n  InitializeRequestSchema,\n} from '@modelcontextprotocol/sdk/types.js';\n\n// Import all thinking tools\nimport { devilsAdvocate } from './tools/devils-advocate.js';\nimport { firstPrinciples } from './tools/first-principles.js';\nimport { rootCauseAnalysis } from './tools/root-cause.js';\nimport { swotAnalysis } from './tools/swot.js';\nimport { premortemAnalysis } from './tools/premortem.js';\nimport { criticalThinking } from './tools/critical-thinking.js';\nimport { lateralThinking } from './tools/lateral-thinking.js';\nimport { redTeam } from './tools/red-team.js';\nimport { blueTeam } from './tools/blue-team.js';\nimport { decisionMatrix } from './tools/decision-matrix.js';\nimport { socratic } from './tools/socratic.js';\nimport { systemsThinking } from './tools/systems-thinking.js';\nimport { scenarioPlanning } from './tools/scenario-planning.js';"}
{"id":"aa8bbefd9865daa76ef09222eb15bf83f768d77a","source":"repo","path":"src/index.ts","sha":"41f1f94e63a16c89c77199fc5d559dab319ec54c","start":32,"end":68,"text":"import { brainstorming } from './tools/brainstorming.js';\nimport { mindMapping } from './tools/mind-mapping.js';\nimport { sequentialThinking } from './tools/sequential-thinking.js';\nimport { parallelThinking } from './tools/parallel-thinking.js';\nimport { reflectiveThinking } from './tools/reflective-thinking.js';\nimport {\n  context7ResolveLibraryId,\n  context7GetLibraryDocs,\n  context7SearchLibraries,\n  context7CompareVersions,\n  context7GetExamples,\n  context7GetMigrationGuide,\n} from './tools/context7.js';\n\n// Import Context Engine modules\nimport { indexRepo } from './context/indexer.js';\nimport { hybridQuery } from './context/search.js';\nimport { ingestUrls, ddg } from './context/web.js';\nimport { buildImportGraph } from './context/graph.js';\nimport { summarizeDiff } from './context/diff.js';\nimport { getPaths, loadChunks, loadEmbeddings } from './context/store.js';\n\nclass ThinkingToolsMCP {\n  private server: Server;\n\n  constructor() {\n    this.server = new Server(\n      { name: '@robinsonai/thinking-tools-mcp', version: '1.0.0' },\n      { capabilities: { tools: {} } }\n    );\n\n    this.setupHandlers();\n  }\n\n  private setupHandlers() {\n    // Initialize handler\n    this.server.setRequestHandler(InitializeRequestSchema, async (request) => ({"}
{"id":"de915e8fe6063a99ea087d26259edeb2c146cf09","source":"repo","path":"src/index.ts","sha":"41f1f94e63a16c89c77199fc5d559dab319ec54c","start":69,"end":100,"text":"      protocolVersion: \"2024-11-05\",\n      capabilities: {\n        tools: {},\n      },\n      serverInfo: {\n        name: \"@robinsonai/thinking-tools-mcp\",\n        version: \"1.0.0\",\n      },\n    }));\n\n    // List tools handler\n    this.server.setRequestHandler(ListToolsRequestSchema, async () => ({\n      tools: [\n        {\n          name: 'devils_advocate',\n          description: 'Challenge assumptions and find flaws in plans. Returns challenges, risks, counterarguments, and recommendations.',\n          inputSchema: {\n            type: 'object',\n            properties: {\n              context: { type: 'string', description: 'The plan or idea to challenge' },\n              goal: { type: 'string', description: 'What you\\'re trying to achieve' },\n              depth: { type: 'string', enum: ['quick', 'deep'], description: 'How thorough to be' },\n            },\n            required: ['context'],\n          },\n        },\n        {\n          name: 'first_principles',\n          description: 'Break down complex problems to fundamental truths. Returns fundamentals, assumptions, insights, and alternative approaches.',\n          inputSchema: {\n            type: 'object',\n            properties: {"}
{"id":"3d37d194727f8e2aea3e1f1e4adb9ce7a8fdde1b","source":"repo","path":"src/index.ts","sha":"41f1f94e63a16c89c77199fc5d559dab319ec54c","start":101,"end":126,"text":"              problem: { type: 'string', description: 'The problem to analyze' },\n              domain: { type: 'string', description: 'Problem domain (e.g., \"authentication\", \"caching\")' },\n            },\n            required: ['problem'],\n          },\n        },\n        {\n          name: 'root_cause',\n          description: 'Use 5 Whys technique to find underlying causes. Returns why-chain, root causes, contributing factors, and solutions.',\n          inputSchema: {\n            type: 'object',\n            properties: {\n              problem: { type: 'string', description: 'The problem to analyze' },\n              context: { type: 'string', description: 'Additional context' },\n            },\n            required: ['problem'],\n          },\n        },\n        {\n          name: 'swot_analysis',\n          description: 'Analyze Strengths, Weaknesses, Opportunities, Threats. Returns SWOT breakdown and strategic recommendations.',\n          inputSchema: {\n            type: 'object',\n            properties: {\n              subject: { type: 'string', description: 'What to analyze (technology, approach, team, etc.)' },\n              context: { type: 'string', description: 'Additional context' },"}
{"id":"2b7c122557a65a226cfbca3419380449a26900b3","source":"repo","path":"src/index.ts","sha":"41f1f94e63a16c89c77199fc5d559dab319ec54c","start":127,"end":152,"text":"              perspective: { type: 'string', enum: ['technical', 'business', 'product', 'team'], description: 'Analysis perspective' },\n            },\n            required: ['subject'],\n          },\n        },\n        {\n          name: 'premortem_analysis',\n          description: 'Imagine project failure and work backward to identify risks. Returns failure scenarios, warning signals, and mitigation strategies.',\n          inputSchema: {\n            type: 'object',\n            properties: {\n              project: { type: 'string', description: 'The project or initiative' },\n              context: { type: 'string', description: 'Additional context' },\n            },\n            required: ['project'],\n          },\n        },\n        {\n          name: 'critical_thinking',\n          description: 'Evaluate arguments, evidence, and logical reasoning. Returns claims, evidence quality, logical fallacies, and assessment.',\n          inputSchema: {\n            type: 'object',\n            properties: {\n              argument: { type: 'string', description: 'The argument to evaluate' },\n              context: { type: 'string', description: 'Additional context' },\n              depth: { type: 'string', enum: ['quick', 'deep'], description: 'How thorough to be' },"}
{"id":"0228eb00f488acbd938dd35ddd20f31646a94da9","source":"repo","path":"src/index.ts","sha":"41f1f94e63a16c89c77199fc5d559dab319ec54c","start":153,"end":178,"text":"            },\n            required: ['argument'],\n          },\n        },\n        {\n          name: 'lateral_thinking',\n          description: 'Generate creative, non-obvious solutions. Returns unconventional approaches, analogies, reversals, and provocative ideas.',\n          inputSchema: {\n            type: 'object',\n            properties: {\n              problem: { type: 'string', description: 'The problem to solve creatively' },\n              context: { type: 'string', description: 'Additional context' },\n              constraints: { type: 'array', items: { type: 'string' }, description: 'Constraints to work within' },\n            },\n            required: ['problem'],\n          },\n        },\n        {\n          name: 'red_team',\n          description: 'Attack the plan/design to find vulnerabilities. Returns attack vectors, exploits, edge cases, and stress tests.',\n          inputSchema: {\n            type: 'object',\n            properties: {\n              plan: { type: 'string', description: 'The plan or design to attack' },\n              context: { type: 'string', description: 'Additional context' },\n              focus: { type: 'string', enum: ['security', 'reliability', 'performance', 'all'], description: 'Attack focus area' },"}
{"id":"a8a8ce355c2c76bf9e596e820921a80d80a7def7","source":"repo","path":"src/index.ts","sha":"41f1f94e63a16c89c77199fc5d559dab319ec54c","start":179,"end":204,"text":"            },\n            required: ['plan'],\n          },\n        },\n        {\n          name: 'blue_team',\n          description: 'Defend against attacks and strengthen the plan. Returns defenses, monitoring strategy, incident response, and hardening steps.',\n          inputSchema: {\n            type: 'object',\n            properties: {\n              plan: { type: 'string', description: 'The plan or design to defend' },\n              threats: { type: 'array', items: { type: 'string' }, description: 'Known threats' },\n              context: { type: 'string', description: 'Additional context' },\n            },\n            required: ['plan'],\n          },\n        },\n        {\n          name: 'decision_matrix',\n          description: 'Weighted decision-making for comparing options. Returns scored matrix, recommendation, and tradeoffs.',\n          inputSchema: {\n            type: 'object',\n            properties: {\n              options: { type: 'array', items: { type: 'string' }, description: 'Options to compare' },\n              criteria: { type: 'array', items: { type: 'string' }, description: 'Criteria to evaluate (auto-detected if not provided)' },\n              context: { type: 'string', description: 'Additional context (affects weighting)' },"}
{"id":"c6f817a7fda69dc1d1ee53bcff33e91e98f82476","source":"repo","path":"src/index.ts","sha":"41f1f94e63a16c89c77199fc5d559dab319ec54c","start":205,"end":231,"text":"            },\n            required: ['options'],\n          },\n        },\n        {\n          name: 'socratic_questioning',\n          description: 'Deep inquiry through probing questions. Returns clarifying, assumption, reasoning, perspective, implication, and meta questions.',\n          inputSchema: {\n            type: 'object',\n            properties: {\n              topic: { type: 'string', description: 'The topic to explore' },\n              context: { type: 'string', description: 'Additional context' },\n              depth: { type: 'string', enum: ['quick', 'deep'], description: 'How many questions to generate' },\n            },\n            required: ['topic'],\n          },\n        },\n        {\n          name: 'systems_thinking',\n          description: 'Understand interconnections, feedback loops, and emergent behavior. Returns components, feedback loops, leverage points, and system archetypes.',\n          inputSchema: {\n            type: 'object',\n            properties: {\n              system: { type: 'string', description: 'The system to analyze' },\n              context: { type: 'string', description: 'Additional context' },\n            },\n            required: ['system'],"}
{"id":"bd70c54e054e58e5e59c22d1e5b3d21a36ea39bc","source":"repo","path":"src/index.ts","sha":"41f1f94e63a16c89c77199fc5d559dab319ec54c","start":232,"end":258,"text":"          },\n        },\n        {\n          name: 'scenario_planning',\n          description: 'Explore multiple possible futures. Returns scenarios with probability, impact, indicators, and preparations.',\n          inputSchema: {\n            type: 'object',\n            properties: {\n              situation: { type: 'string', description: 'The current situation' },\n              timeframe: { type: 'string', description: 'Time horizon (e.g., \"1 year\", \"5 years\")' },\n              context: { type: 'string', description: 'Additional context' },\n            },\n            required: ['situation'],\n          },\n        },\n        {\n          name: 'brainstorming',\n          description: 'Generate many ideas quickly without judgment. Returns categorized ideas, wild ideas, and practical ideas.',\n          inputSchema: {\n            type: 'object',\n            properties: {\n              prompt: { type: 'string', description: 'What to brainstorm about' },\n              context: { type: 'string', description: 'Additional context' },\n              quantity: { type: 'number', description: 'How many ideas to generate (default: 20)' },\n            },\n            required: ['prompt'],\n          },"}
{"id":"f85630b9f69b7e0dba62e165ca926df1b1eb8bfc","source":"repo","path":"src/index.ts","sha":"41f1f94e63a16c89c77199fc5d559dab319ec54c","start":259,"end":282,"text":"        },\n        {\n          name: 'mind_mapping',\n          description: 'Visual organization of ideas and concepts. Returns hierarchical structure and Mermaid diagram.',\n          inputSchema: {\n            type: 'object',\n            properties: {\n              centralIdea: { type: 'string', description: 'The central concept' },\n              context: { type: 'string', description: 'Additional context' },\n            },\n            required: ['centralIdea'],\n          },\n        },\n        {\n          name: 'sequential_thinking',\n          description: 'Break down complex problems into sequential thought steps. Supports revisions, branching, and dynamic thought adjustment.',\n          inputSchema: {\n            type: 'object',\n            properties: {\n              thought: { type: 'string', description: 'Your current thinking step' },\n              nextThoughtNeeded: { type: 'boolean', description: 'Whether another thought step is needed' },\n              thoughtNumber: { type: 'integer', description: 'Current thought number', minimum: 1 },\n              totalThoughts: { type: 'integer', description: 'Estimated total thoughts needed (can be adjusted)', minimum: 1 },\n              isRevision: { type: 'boolean', description: 'Whether this revises previous thinking' },"}
{"id":"033290874ac45923badaac387800faeef1ef24af","source":"repo","path":"src/index.ts","sha":"41f1f94e63a16c89c77199fc5d559dab319ec54c","start":283,"end":301,"text":"              revisesThought: { type: 'integer', description: 'Which thought is being reconsidered', minimum: 1 },\n              branchFromThought: { type: 'integer', description: 'Branching point thought number', minimum: 1 },\n              branchId: { type: 'string', description: 'Branch identifier' },\n              needsMoreThoughts: { type: 'boolean', description: 'If more thoughts are needed' },\n            },\n            required: ['thought', 'nextThoughtNeeded', 'thoughtNumber', 'totalThoughts'],\n          },\n        },\n        {\n          name: 'parallel_thinking',\n          description: 'Explore multiple solution paths simultaneously. Create branches to evaluate different approaches in parallel.',\n          inputSchema: {\n            type: 'object',\n            properties: {\n              branchId: { type: 'string', description: 'Unique identifier for this branch' },\n              description: { type: 'string', description: 'Description of this solution path' },\n              thought: { type: 'string', description: 'Current thought in this branch' },\n              thoughtNumber: { type: 'integer', description: 'Thought number within this branch', minimum: 1 },\n              nextThoughtNeeded: { type: 'boolean', description: 'Whether more thoughts needed in this branch' },"}
{"id":"b1fcb39c0e392b2eb2f9eda601cae1908e97d1c1","source":"repo","path":"src/index.ts","sha":"41f1f94e63a16c89c77199fc5d559dab319ec54c","start":302,"end":323,"text":"              conclusion: { type: 'string', description: 'Final conclusion for this branch (if complete)' },\n            },\n            required: ['branchId', 'description', 'thought', 'thoughtNumber', 'nextThoughtNeeded'],\n          },\n        },\n        {\n          name: 'reflective_thinking',\n          description: 'Review and critique previous thoughts and decisions. Identify improvements and assess confidence.',\n          inputSchema: {\n            type: 'object',\n            properties: {\n              thoughtNumber: { type: 'integer', description: 'Which thought to reflect on', minimum: 1 },\n              reflection: { type: 'string', description: 'Your reflection on this thought' },\n              improvements: { type: 'array', items: { type: 'string' }, description: 'Suggested improvements' },\n              confidence: { type: 'number', description: 'Confidence level (0-1)', minimum: 0, maximum: 1 },\n            },\n            required: ['thoughtNumber', 'reflection', 'improvements', 'confidence'],\n          },\n        },\n        {\n          name: 'context7_resolve_library_id',\n          description: 'Resolve a package/library name to find documentation. Returns library ID and metadata.',"}
{"id":"03ea06df978e031086dc99ee8d401215ee4f0219","source":"repo","path":"src/index.ts","sha":"41f1f94e63a16c89c77199fc5d559dab319ec54c","start":324,"end":351,"text":"          inputSchema: {\n            type: 'object',\n            properties: {\n              libraryName: { type: 'string', description: 'Library name to search for (e.g., \"react\", \"next.js\", \"mongodb\")' },\n            },\n            required: ['libraryName'],\n          },\n        },\n        {\n          name: 'context7_get_library_docs',\n          description: 'Get documentation for a specific library. Use library ID from resolve_library_id.',\n          inputSchema: {\n            type: 'object',\n            properties: {\n              context7CompatibleLibraryID: { type: 'string', description: 'Library ID (e.g., \"/vercel/next.js\")' },\n              topic: { type: 'string', description: 'Optional: specific topic to focus on' },\n              tokens: { type: 'number', description: 'Optional: max tokens to retrieve (default: 5000)' },\n            },\n            required: ['context7CompatibleLibraryID'],\n          },\n        },\n        {\n          name: 'context7_search_libraries',\n          description: 'Search across all available libraries by name or description.',\n          inputSchema: {\n            type: 'object',\n            properties: {\n              query: { type: 'string', description: 'Search query' },"}
{"id":"2a9112fef096ee30b67390490aff5e12e7dd155c","source":"repo","path":"src/index.ts","sha":"41f1f94e63a16c89c77199fc5d559dab319ec54c","start":352,"end":379,"text":"              limit: { type: 'number', description: 'Max results (default: 10)' },\n            },\n            required: ['query'],\n          },\n        },\n        {\n          name: 'context7_compare_versions',\n          description: 'Compare different versions of a library to see what changed.',\n          inputSchema: {\n            type: 'object',\n            properties: {\n              libraryId: { type: 'string', description: 'Library ID' },\n              fromVersion: { type: 'string', description: 'Starting version' },\n              toVersion: { type: 'string', description: 'Target version' },\n            },\n            required: ['libraryId', 'fromVersion', 'toVersion'],\n          },\n        },\n        {\n          name: 'context7_get_examples',\n          description: 'Get code examples for specific use cases from library documentation.',\n          inputSchema: {\n            type: 'object',\n            properties: {\n              libraryId: { type: 'string', description: 'Library ID' },\n              useCase: { type: 'string', description: 'Specific use case or feature' },\n              language: { type: 'string', description: 'Programming language (default: \"javascript\")' },\n            },"}
{"id":"bf8de47153eed9b4c4a08ab96dc835ce5360e615","source":"repo","path":"src/index.ts","sha":"41f1f94e63a16c89c77199fc5d559dab319ec54c","start":380,"end":413,"text":"            required: ['libraryId', 'useCase'],\n          },\n        },\n        {\n          name: 'context7_get_migration_guide',\n          description: 'Get migration guide for upgrading between library versions.',\n          inputSchema: {\n            type: 'object',\n            properties: {\n              libraryId: { type: 'string', description: 'Library ID' },\n              fromVersion: { type: 'string', description: 'Current version' },\n              toVersion: { type: 'string', description: 'Target version' },\n            },\n            required: ['libraryId', 'fromVersion', 'toVersion'],\n          },\n        },\n        {\n          name: 'context_index_repo',\n          description: 'Index current repo into Context Engine (chunks + embeddings).',\n          inputSchema: {\n            type: 'object',\n            properties: {\n              repo_root: { type: 'string', description: 'Optional: repository root path' },\n            },\n            required: [],\n          },\n        },\n        {\n          name: 'context_query',\n          description: 'Hybrid search across repo, knowledge, and web cache.',\n          inputSchema: {\n            type: 'object',\n            properties: {\n              query: { type: 'string', description: 'Search query' },"}
{"id":"6376588b74af93e20f4e9576f8cd920ca1bd4c27","source":"repo","path":"src/index.ts","sha":"41f1f94e63a16c89c77199fc5d559dab319ec54c","start":414,"end":445,"text":"              top_k: { type: 'number', description: 'Number of results to return (default: 8)' },\n            },\n            required: ['query'],\n          },\n        },\n        {\n          name: 'context_web_search',\n          description: 'DuckDuckGo HTML fallback search (no API key). Returns URL candidates.',\n          inputSchema: {\n            type: 'object',\n            properties: {\n              q: { type: 'string', description: 'Search query' },\n              k: { type: 'number', description: 'Number of results (default: 5)' },\n            },\n            required: ['q'],\n          },\n        },\n        {\n          name: 'context_ingest_urls',\n          description: 'Fetch URL(s), extract main content, chunk, embed, and cache.',\n          inputSchema: {\n            type: 'object',\n            properties: {\n              urls: { type: 'array', items: { type: 'string' }, description: 'URLs to ingest' },\n              tags: { type: 'array', items: { type: 'string' }, description: 'Optional tags' },\n            },\n            required: ['urls'],\n          },\n        },\n        {\n          name: 'context_stats',\n          description: 'Return basic index stats and file counts.',"}
{"id":"d0003c482c666fcbf62c6827774b98844dda0646","source":"repo","path":"src/index.ts","sha":"41f1f94e63a16c89c77199fc5d559dab319ec54c","start":446,"end":487,"text":"          inputSchema: {\n            type: 'object',\n            properties: {},\n            required: [],\n          },\n        },\n        {\n          name: 'context_reset',\n          description: 'Delete JSONL stores (chunks/embeddings) to allow fresh rebuild.',\n          inputSchema: {\n            type: 'object',\n            properties: {},\n            required: [],\n          },\n        },\n        {\n          name: 'context_neighborhood',\n          description: 'Return import/mention neighborhood for a file (quick graph).',\n          inputSchema: {\n            type: 'object',\n            properties: {\n              file: { type: 'string', description: 'File path to analyze' },\n            },\n            required: ['file'],\n          },\n        },\n        {\n          name: 'context_summarize_diff',\n          description: 'Summarize code changes for a git range (e.g., HEAD~1..HEAD).',\n          inputSchema: {\n            type: 'object',\n            properties: {\n              range: { type: 'string', description: 'Git range (default: HEAD~1..HEAD)' },\n            },\n            required: [],\n          },\n        },\n      ],\n    }));\n\n    // Call tool handler\n    this.server.setRequestHandler(CallToolRequestSchema, async (request) => {"}
{"id":"b24b14bba47ce7bb14e7288852925d2466fb193e","source":"repo","path":"src/index.ts","sha":"41f1f94e63a16c89c77199fc5d559dab319ec54c","start":488,"end":525,"text":"      const { name, arguments: args } = request.params;\n\n      try {\n        let result: any;\n\n        switch (name) {\n          case 'devils_advocate':\n            result = devilsAdvocate(args as any);\n            break;\n          case 'first_principles':\n            result = firstPrinciples(args as any);\n            break;\n          case 'root_cause':\n            result = rootCauseAnalysis(args as any);\n            break;\n          case 'swot_analysis':\n            result = swotAnalysis(args as any);\n            break;\n          case 'premortem_analysis':\n            result = premortemAnalysis(args as any);\n            break;\n          case 'critical_thinking':\n            result = criticalThinking(args as any);\n            break;\n          case 'lateral_thinking':\n            result = lateralThinking(args as any);\n            break;\n          case 'red_team':\n            result = redTeam(args as any);\n            break;\n          case 'blue_team':\n            result = blueTeam(args as any);\n            break;\n          case 'decision_matrix':\n            result = decisionMatrix(args as any);\n            break;\n          case 'socratic_questioning':\n            result = socratic(args as any);"}
{"id":"8d736a9e1f6ed937deba76eb27654c09bce51f00","source":"repo","path":"src/index.ts","sha":"41f1f94e63a16c89c77199fc5d559dab319ec54c","start":526,"end":557,"text":"            break;\n          case 'systems_thinking':\n            result = systemsThinking(args as any);\n            break;\n          case 'scenario_planning':\n            result = scenarioPlanning(args as any);\n            break;\n          case 'brainstorming':\n            result = brainstorming(args as any);\n            break;\n          case 'mind_mapping':\n            result = mindMapping(args as any);\n            break;\n          case 'sequential_thinking':\n            result = await sequentialThinking(args as any);\n            break;\n          case 'parallel_thinking':\n            result = await parallelThinking(args as any);\n            break;\n          case 'reflective_thinking':\n            result = await reflectiveThinking(args as any);\n            break;\n          case 'context7_resolve_library_id':\n            result = await context7ResolveLibraryId(args as any);\n            break;\n          case 'context7_get_library_docs':\n            result = await context7GetLibraryDocs(args as any);\n            break;\n          case 'context7_search_libraries':\n            result = await context7SearchLibraries(args as any);\n            break;\n          case 'context7_compare_versions':"}
{"id":"094ea1ab9db1fda623f99c5662529e5dc68fef8c","source":"repo","path":"src/index.ts","sha":"41f1f94e63a16c89c77199fc5d559dab319ec54c","start":558,"end":587,"text":"            result = await context7CompareVersions(args as any);\n            break;\n          case 'context7_get_examples':\n            result = await context7GetExamples(args as any);\n            break;\n          case 'context7_get_migration_guide':\n            result = await context7GetMigrationGuide(args as any);\n            break;\n          case 'context_index_repo':\n            await indexRepo((args as any)?.repo_root);\n            result = { ok: true, paths: getPaths() };\n            break;\n          case 'context_query':\n            const hits = await hybridQuery((args as any).query, (args as any).top_k || parseInt(process.env.CTX_TOP_K || '8', 10));\n            result = {\n              hits: hits.map(h => ({\n                score: h.score,\n                path: h.chunk.path,\n                start: h.chunk.start,\n                end: h.chunk.end,\n                text: h.chunk.text.slice(0, 800)\n              }))\n            };\n            break;\n          case 'context_web_search':\n            const urls = await ddg((args as any).q, (args as any).k || 5);\n            result = { urls };\n            break;\n          case 'context_ingest_urls':\n            result = await ingestUrls((args as any).urls, (args as any).tags || []);"}
{"id":"3431835bc256da8a2ff208ab87748b42c6cce464","source":"repo","path":"src/index.ts","sha":"41f1f94e63a16c89c77199fc5d559dab319ec54c","start":588,"end":622,"text":"            break;\n          case 'context_stats':\n            const chunks = loadChunks().length;\n            const embeds = loadEmbeddings().length;\n            result = { chunks, embeddings: embeds, paths: getPaths() };\n            break;\n          case 'context_reset':\n            const p = getPaths();\n            const fs = await import('fs');\n            for (const f of [p.chunks, p.embeds]) {\n              try {\n                fs.unlinkSync(f as any);\n              } catch {\n                // ignore if file doesn't exist\n              }\n            }\n            result = { ok: true };\n            break;\n          case 'context_neighborhood':\n            const g = buildImportGraph();\n            const n = g.filter(e => e.from.endsWith((args as any).file) || e.to.endsWith((args as any).file));\n            result = { edges: n.slice(0, 200) };\n            break;\n          case 'context_summarize_diff':\n            result = summarizeDiff((args as any)?.range || 'HEAD~1..HEAD');\n            break;\n          default:\n            throw new Error(`Unknown tool: ${name}`);\n        }\n\n        return {\n          content: [\n            {\n              type: 'text',\n              text: JSON.stringify(result, null, 2),"}
{"id":"6fb09b7c426ddeacc89f7b795610f96d38db7cf7","source":"repo","path":"src/index.ts","sha":"41f1f94e63a16c89c77199fc5d559dab319ec54c","start":623,"end":653,"text":"            },\n          ],\n        };\n      } catch (error: any) {\n        return {\n          content: [\n            {\n              type: 'text',\n              text: `Error: ${error.message}`,\n            },\n          ],\n          isError: true,\n        };\n      }\n    });\n  }\n\n  async run() {\n    const transport = new StdioServerTransport();\n    await this.server.connect(transport);\n    console.error('Thinking Tools MCP server running on stdio');\n    console.error('32 tools available: 15 cognitive frameworks + 3 reasoning modes + 6 Context7 API tools + 8 Context Engine tools');\n    console.error(`Context7 API: ${process.env.CONTEXT7_API_KEY ? 'Authenticated' : 'Public access (no API key)'}`);\n    console.error(`Context Engine: ${process.env.CTX_EMBED_PROVIDER || 'ollama'} embeddings @ ${process.env.OLLAMA_BASE_URL || 'http://127.0.0.1:11434'}`);\n  }\n}\n\nconst server = new ThinkingToolsMCP();\nserver.run().catch(console.error);\n\n"}
{"id":"ca085ec8e4df46a00e036f91443c1dd061e2db92","source":"repo","path":"src/context/diff.ts","sha":"3ae91bc9ccdbbb4dd971697616877f30b570bd8e","start":1,"end":37,"text":"import { execSync } from 'node:child_process';\n\nexport function summarizeDiff(range = 'HEAD~1..HEAD'): {\n  range: string;\n  files: Array<{ file: string; adds: number; dels: number }>;\n} {\n  const raw = execSync(`git --no-pager diff --unified=0 ${range}`, {\n    encoding: 'utf8'\n  });\n  \n  const files = new Map<string, { adds: number; dels: number }>();\n  \n  for (const l of raw.split(/\\n/)) {\n    const m = /^\\+\\+\\+ b\\/(.*)$/.exec(l) || /^--- a\\/(.*)$/.exec(l);\n    if (m) {\n      files.set(m[1], files.get(m[1]) || { adds: 0, dels: 0 });\n    }\n    \n    if (/^\\+[^+]/.test(l)) {\n      files.forEach(v => v.adds++);\n    }\n    \n    if (/^-[^-]/.test(l)) {\n      files.forEach(v => v.dels++);\n    }\n  }\n  \n  const out = [...files.entries()].map(([file, { adds, dels }]) => ({\n    file,\n    adds,\n    dels\n  }));\n  \n  return { range, files: out };\n}\n\n"}
{"id":"0f333fdc271df5b2c4e275aa48fa6ebe1fe4248a","source":"repo","path":"src/context/embedding.ts","sha":"42586ea62d2315bfc425d0e4185b42d1cc4533dc","start":1,"end":35,"text":"import { request } from 'undici';\nimport pLimit from 'p-limit';\n\nconst prov = (process.env.CTX_EMBED_PROVIDER || 'ollama').toLowerCase();\n\nexport async function embedBatch(texts: string[]): Promise<number[][]> {\n  if (prov === 'openai') return openaiEmbed(texts);\n  return ollamaEmbed(texts);\n}\n\nasync function ollamaEmbed(texts: string[]): Promise<number[][]> {\n  const url = (process.env.OLLAMA_BASE_URL || 'http://127.0.0.1:11434') + '/api/embeddings';\n  const model = process.env.OLLAMA_EMBED_MODEL || 'nomic-embed-text';\n  const concurrency = parseInt(process.env.OLLAMA_EMBED_CONCURRENCY || '10', 10);\n\n  const limit = pLimit(concurrency);\n\n  const promises = texts.map((text, index) =>\n    limit(async () => {\n      const r = await request(url, {\n        method: 'POST',\n        body: JSON.stringify({ model, prompt: text }),\n        headers: { 'content-type': 'application/json' }\n      });\n      const j: any = await r.body.json();\n      if (!j?.embedding) throw new Error(`Ollama embed error for text ${index}`);\n      return j.embedding;\n    })\n  );\n\n  return Promise.all(promises);\n}\n\nasync function openaiEmbed(texts: string[]): Promise<number[][]> {\n  const key = process.env.OPENAI_API_KEY;"}
{"id":"8cba452fbeebf16dc0984e8fc352495f7a2b2333","source":"repo","path":"src/context/embedding.ts","sha":"42586ea62d2315bfc425d0e4185b42d1cc4533dc","start":36,"end":62,"text":"  if (!key) throw new Error('OPENAI_API_KEY missing');\n  \n  const model = process.env.OPENAI_EMBED_MODEL || 'text-embedding-3-small';\n  const r = await request('https://api.openai.com/v1/embeddings', {\n    method: 'POST',\n    headers: {\n      'authorization': `Bearer ${key}`,\n      'content-type': 'application/json'\n    },\n    body: JSON.stringify({ model, input: texts })\n  });\n  \n  const j: any = await r.body.json();\n  return j.data.map((d: any) => d.embedding);\n}\n\nexport function cosine(a: number[], b: number[]): number {\n  let s = 0, na = 0, nb = 0;\n  for (let i = 0; i < a.length; i++) {\n    s += a[i] * b[i];\n    na += a[i] * a[i];\n    nb += b[i] * b[i];\n  }\n  return s / (Math.sqrt(na) * Math.sqrt(nb));\n}\n\n"}
{"id":"9e9d0310797c2eb17cca7bae40c8d8db0df21df6","source":"repo","path":"src/context/graph.ts","sha":"a624778e7a3b4c20623447cbc5e8df74161ac39f","start":1,"end":42,"text":"import fs from 'fs';\nimport path from 'path';\nimport fg from 'fast-glob';\n\nexport function buildImportGraph(repoRoot = process.cwd()): Array<{ from: string; to: string }> {\n  const edges: Array<{ from: string; to: string }> = [];\n  \n  const scan = (p: string) => {\n    if (!/\\.(ts|tsx|js|jsx)$/.test(p)) return;\n    \n    const t = fs.readFileSync(p, 'utf8');\n    const dir = path.dirname(p);\n    const re = /import[^;]*from\\s*['\"]([^'\"]+)['\"]/g;\n    let m;\n    \n    while ((m = re.exec(t))) {\n      let to = m[1];\n      if (to.startsWith('.')) {\n        try {\n          const rp = path.resolve(dir, to);\n          edges.push({ from: p, to: rp });\n        } catch {\n          // ignore resolution errors\n        }\n      }\n    }\n  };\n  \n  const files = fg.sync(['**/*.{ts,tsx,js,jsx}'], {\n    cwd: repoRoot,\n    ignore: ['**/node_modules/**', '**/.git/**', '**/dist/**'],\n    absolute: true\n  });\n  \n  for (const f of files) {\n    scan(f);\n  }\n  \n  return edges;\n}\n\n"}
{"id":"feec107d20ba257c9df1934c49bfa7cf520b3589","source":"repo","path":"src/context/indexer.ts","sha":"d1f00c3a9f6835f02bbf1281b3bee2b07169c372","start":1,"end":45,"text":"import fg from 'fast-glob';\nimport fs from 'fs';\nimport path from 'path';\nimport crypto from 'crypto';\nimport { embedBatch } from './embedding.js';\nimport { ensureDirs, saveChunk, saveEmbedding, saveStats } from './store.js';\nimport { Chunk, IndexStats } from './types.js';\n\nconst MAXCH = parseInt(process.env.CTX_MAX_CHARS_PER_CHUNK || '1200', 10);\nconst rootRepo = process.cwd();\n\nconst INCLUDE = ['**/*.{ts,tsx,js,jsx,md,mdx,json,yml,yaml,sql,py,sh,ps1}'];\nconst EXCLUDE = [\n  '**/node_modules/**',\n  '**/.git/**',\n  '**/dist/**',\n  '**/build/**',\n  '**/.next/**',\n  '**/.turbo/**',\n  '**/.venv*/**',\n  '**/venv/**',\n  '**/__pycache__/**',\n  '**/.pytest_cache/**',\n  '**/site-packages/**',\n  '**/.augment/**',\n  '**/.robinson/**',\n  '**/.backups/**',\n  '**/.training/**',\n  '**/sandbox/**',\n  '**/*.db',\n  '**/*.db-shm',\n  '**/*.db-wal'\n];\n\nfunction sha(txt: string): string {\n  return crypto.createHash('sha1').update(txt).digest('hex');\n}\n\nfunction chunkText(text: string): { start: number; end: number; text: string }[] {\n  const lines = text.split(/\\r?\\n/);\n  const out: { start: number; end: number; text: string }[] = [];\n  let buf: string[] = [];\n  let start = 1;\n  \n  for (let i = 0; i < lines.length; i++) {"}
{"id":"e7e063085338e6e6f51d30fcdcf38c997c7c974a","source":"repo","path":"src/context/indexer.ts","sha":"d1f00c3a9f6835f02bbf1281b3bee2b07169c372","start":46,"end":93,"text":"    const ln = lines[i];\n    buf.push(ln);\n    const cur = buf.join('\\n');\n    \n    if (cur.length >= MAXCH || i === lines.length - 1) {\n      out.push({ start, end: i + 1, text: cur });\n      buf = [];\n      start = i + 2;\n    }\n  }\n  \n  return out;\n}\n\nexport async function indexRepo(repoRoot = rootRepo) {\n  ensureDirs();\n\n  const files = await fg(INCLUDE, {\n    cwd: repoRoot,\n    ignore: EXCLUDE,\n    dot: true\n  });\n\n  console.log(`üìÅ Found ${files.length} files to index`);\n\n  let n = 0, e = 0;\n\n  for (let fileIdx = 0; fileIdx < files.length; fileIdx++) {\n    const rel = files[fileIdx];\n    const p = path.join(repoRoot, rel);\n    const text = fs.readFileSync(p, 'utf8');\n    const stat = fs.statSync(p);\n    const sh = sha(rel + ':' + stat.mtimeMs + ':' + text.length);\n\n    const chunks = chunkText(text).map((c) => ({\n      id: sha(rel + ':' + c.start + ':' + c.end + ':' + sh),\n      source: 'repo' as const,\n      path: rel,\n      sha: sh,\n      start: c.start,\n      end: c.end,\n      text: c.text\n    } as Chunk));\n\n    console.log(`‚ö° [${fileIdx + 1}/${files.length}] Embedding ${rel} (${chunks.length} chunks)...`);\n    const embs = await embedBatch(chunks.map(c => c.text));\n\n    for (let i = 0; i < chunks.length; i++) {"}
{"id":"4bc3512f1ebf48ef7b0ed489e7727038073db57a","source":"repo","path":"src/context/indexer.ts","sha":"d1f00c3a9f6835f02bbf1281b3bee2b07169c372","start":94,"end":122,"text":"      saveChunk(chunks[i]);\n      saveEmbedding({ id: chunks[i].id, vec: embs[i] });\n      n++;\n      e++;\n    }\n  }\n\n  const stats: IndexStats = {\n    chunks: n,\n    embeddings: e,\n    sources: { repo: n },\n    updatedAt: new Date().toISOString()\n  };\n\n  saveStats(stats);\n  console.log(`‚úÖ Indexed ${n} chunks with ${e} embeddings`);\n}\n\n// CLI support\nif (import.meta.url === `file:///${process.argv[1].replace(/\\\\/g, '/')}`) {\n  indexRepo()\n    .then(() => console.log('Indexed repo'))\n    .catch(e => {\n      console.error(e);\n      process.exit(1);\n    });\n}\n\n"}
{"id":"a275faf2f9e05fca0000ce3dec2e188cab69ad6b","source":"repo","path":"src/context/search.ts","sha":"46a80b9f48ec48fead3be4b5f75931928f252341","start":1,"end":40,"text":"import { loadChunks, loadEmbeddings } from './store.js';\nimport { cosine } from './embedding.js';\nimport { Hit } from './types.js';\n\nexport function lexicalRank(query: string, text: string): number {\n  const q = query.toLowerCase().split(/\\W+/).filter(Boolean);\n  const t = text.toLowerCase();\n  let s = 0;\n  \n  for (const w of q) {\n    const c = t.split(w).length - 1;\n    s += c;\n  }\n  \n  return s;\n}\n\nexport async function hybridQuery(query: string, topK = 8): Promise<Hit[]> {\n  const chunks = loadChunks();\n  const embs = loadEmbeddings();\n  \n  if (!chunks.length) return [];\n  \n  // lazy embed for query using same provider as chunks\n  const { embedBatch } = await import('./embedding.js');\n  const [qvec] = await embedBatch([query]);\n  \n  const map = new Map(embs.map(e => [e.id, e.vec]));\n  \n  const scored = chunks.map(c => {\n    const v = map.get(c.id);\n    let s = v ? cosine(qvec, v) : 0;\n    s = 0.80 * s + 0.20 * lexicalRank(query, c.text);\n    return { score: s, chunk: c, id: c.id };\n  });\n  \n  return scored.sort((a, b) => b.score - a.score).slice(0, topK);\n}\n\n"}
{"id":"4efdaeecd512bb4dca90d779a92eec2ba40303d9","source":"repo","path":"src/context/store.ts","sha":"af977998350ba14b01d12b2f19508a0574362cc0","start":1,"end":47,"text":"import fs from 'fs';\nimport path from 'path';\nimport { Chunk, Embedding, IndexStats } from './types.js';\n\nconst root = process.env.CTX_ROOT || '.robinson/context';\n\nconst P = {\n  chunks: path.join(root, 'chunks.jsonl'),\n  embeds: path.join(root, 'embeddings.jsonl'),\n  stats: path.join(root, 'stats.json')\n};\n\nexport function ensureDirs() {\n  fs.mkdirSync(path.dirname(P.chunks), { recursive: true });\n}\n\nexport function* readJSONL<T = any>(p: string): Generator<T> {\n  if (!fs.existsSync(p)) return;\n  const content = fs.readFileSync(p, 'utf8');\n  const lines = content.split(/\\r?\\n/);\n  for (const line of lines) {\n    if (!line.trim()) continue;\n    yield JSON.parse(line) as T;\n  }\n}\n\nexport function appendJSONL(p: string, obj: any) {\n  fs.appendFileSync(p, JSON.stringify(obj) + '\\n');\n}\n\nexport function writeJSON(p: string, obj: any) {\n  fs.writeFileSync(p, JSON.stringify(obj, null, 2));\n}\n\nexport function loadChunks(): Chunk[] {\n  return Array.from(readJSONL<Chunk>(P.chunks));\n}\n\nexport function loadEmbeddings(): Embedding[] {\n  return Array.from(readJSONL<Embedding>(P.embeds));\n}\n\nexport function saveChunk(c: Chunk) {\n  appendJSONL(P.chunks, c);\n}\n\nexport function saveEmbedding(e: Embedding) {"}
{"id":"e097a71c070ffa62396bf41ca75738711ea9c023","source":"repo","path":"src/context/store.ts","sha":"af977998350ba14b01d12b2f19508a0574362cc0","start":48,"end":59,"text":"  appendJSONL(P.embeds, e);\n}\n\nexport function saveStats(s: IndexStats) {\n  writeJSON(P.stats, s);\n}\n\nexport function getPaths() {\n  return P;\n}\n\n"}
{"id":"8e11fdaf9d70a8a1eb45a46a88ab6bfa402a21ac","source":"repo","path":"src/context/types.ts","sha":"08b5fe09b10e58c1f80c5b5b6c33886617c7d902","start":1,"end":33,"text":"export type SourceKind = 'repo' | 'knowledge' | 'web';\n\nexport interface Chunk {\n  id: string;\n  source: SourceKind;\n  path: string;\n  sha: string;\n  start: number;\n  end: number;\n  text: string;\n  tokens?: number;\n  tags?: string[];\n}\n\nexport interface Embedding {\n  id: string;\n  vec: number[];\n}\n\nexport interface Hit {\n  id: string;\n  score: number;\n  chunk: Chunk;\n}\n\nexport interface IndexStats {\n  chunks: number;\n  embeddings: number;\n  sources: Record<string, number>;\n  updatedAt: string;\n}\n\n"}
{"id":"c951a260cbf2f0d20998a8ad79c1a24e6cbff61f","source":"repo","path":"src/context/web.ts","sha":"f0bfff034875d6717046dde333dc7fedc4c4e518","start":1,"end":35,"text":"import { JSDOM } from 'jsdom';\nimport { Readability } from '@mozilla/readability';\nimport { request } from 'undici';\nimport fs from 'fs';\nimport path from 'path';\nimport crypto from 'crypto';\nimport { embedBatch } from './embedding.js';\nimport { saveChunk, saveEmbedding, saveStats } from './store.js';\n\nconst root = process.env.CTX_ROOT || '.robinson/context';\n\nfunction sha(s: string): string {\n  return crypto.createHash('sha1').update(s).digest('hex');\n}\n\nasync function fetchHTML(url: string): Promise<string> {\n  const ua = process.env.CTX_WEB_USER_AGENT || 'RobinsonContext/1.0';\n  const r = await request(url, {\n    headers: { 'user-agent': ua }\n  });\n  \n  if (r.statusCode >= 400) throw new Error('HTTP ' + r.statusCode);\n  return await r.body.text();\n}\n\nexport async function ingestUrls(urls: string[], tags: string[] = []): Promise<{ ingested: number }> {\n  const MAXCH = parseInt(process.env.CTX_MAX_CHARS_PER_CHUNK || '1200', 10);\n  let n = 0;\n  \n  for (const u of urls) {\n    const html = await fetchHTML(u);\n    const dom = new JSDOM(html, { url: u });\n    const reader = new Readability(dom.window.document);\n    const art = reader.parse();\n    const text = (art?.textContent || '').trim();"}
{"id":"9790ce3709cd49b5c930f243d2d0ec1b885e8381","source":"repo","path":"src/context/web.ts","sha":"f0bfff034875d6717046dde333dc7fedc4c4e518","start":36,"end":86,"text":"    \n    if (!text) continue;\n    \n    const idbase = sha(u + ':' + (art?.title || ''));\n    const words = text.split(/\\s+/);\n    \n    // chunk by chars\n    const chunks: { text: string; start: number; end: number }[] = [];\n    let buf: string[] = [];\n    let idx = 0;\n    \n    for (const w of words) {\n      buf.push(w);\n      if (buf.join(' ').length >= MAXCH) {\n        chunks.push({\n          text: buf.join(' '),\n          start: idx,\n          end: idx + buf.length\n        });\n        idx += buf.length;\n        buf = [];\n      }\n    }\n    \n    if (buf.length) {\n      chunks.push({\n        text: buf.join(' '),\n        start: idx,\n        end: idx + buf.length\n      });\n    }\n    \n    const embs = await embedBatch(chunks.map(c => c.text));\n    \n    for (let i = 0; i < chunks.length; i++) {\n      const id = sha(idbase + ':' + i);\n      const file = path.join(root, 'web', id + '.json');\n      \n      fs.mkdirSync(path.dirname(file), { recursive: true });\n      fs.writeFileSync(file, JSON.stringify({\n        url: u,\n        title: art?.title || '',\n        text: chunks[i].text\n      }));\n      \n      saveChunk({\n        id,\n        source: 'web',\n        path: u,\n        sha: idbase,\n        start: chunks[i].start,"}
{"id":"289fc6aa65f43c40349f2053125a40276f6f81a0","source":"repo","path":"src/context/web.ts","sha":"f0bfff034875d6717046dde333dc7fedc4c4e518","start":87,"end":121,"text":"        end: chunks[i].end,\n        text: chunks[i].text,\n        tags\n      });\n      \n      saveEmbedding({ id, vec: embs[i] });\n      n++;\n    }\n  }\n  \n  // stats refresh cheap; indexer will overwrite\n  saveStats({\n    chunks: 0,\n    embeddings: 0,\n    sources: {},\n    updatedAt: new Date().toISOString()\n  });\n  \n  return { ingested: n };\n}\n\nexport async function ddg(q: string, k = 5): Promise<string[]> {\n  const url = `https://duckduckgo.com/html/?q=${encodeURIComponent(q)}`;\n  const r = await request(url, {\n    headers: { 'user-agent': 'RobinsonContext/1.0' }\n  });\n  \n  const html = await r.body.text();\n  const matches = [...html.matchAll(/<a rel=\"nofollow\" class=\"result__a\" href=\"([^\"#]+)\"/g)];\n  const urls = matches.slice(0, k).map(x => decodeURIComponent(x[1]));\n  \n  return urls;\n}\n\n"}
{"id":"4bb688c62ecf07b53e0486bdd15268121d7013d5","source":"repo","path":"src/tools/blue-team.ts","sha":"6b551d43bc24aa3d87d4a4aaed0acd2b81fd8683","start":1,"end":32,"text":"/**\n * Blue Team Thinking Tool\n * Defend against attacks and strengthen the plan/design\n */\n\nexport interface BlueTeamInput {\n  plan: string;\n  threats?: string[];\n  context?: string;\n}\n\nexport interface BlueTeamOutput {\n  defenses: Array<{ threat: string; defense: string; effectiveness: number }>;\n  monitoringStrategy: Array<{ metric: string; threshold: string; action: string }>;\n  incidentResponse: Array<{ scenario: string; response: string; priority: 'critical' | 'high' | 'medium' | 'low' }>;\n  hardeningSteps: string[];\n  resilienceImprovements: string[];\n  confidence: number;\n  reasoning: string;\n}\n\nexport function blueTeam(input: BlueTeamInput): BlueTeamOutput {\n  const { plan, threats = [], context = '' } = input;\n  const combined = `${plan} ${context}`.toLowerCase();\n  \n  const defenses: Array<{ threat: string; defense: string; effectiveness: number }> = [];\n  const monitoringStrategy: Array<{ metric: string; threshold: string; action: string }> = [];\n  const incidentResponse: Array<{ scenario: string; response: string; priority: 'critical' | 'high' | 'medium' | 'low' }> = [];\n  const hardeningSteps: string[] = [];\n  const resilienceImprovements: string[] = [];\n  \n  // Defenses against common threats"}
{"id":"ee825905fa969fdea95f80fd2f736a6ce7174590","source":"repo","path":"src/tools/blue-team.ts","sha":"6b551d43bc24aa3d87d4a4aaed0acd2b81fd8683","start":33,"end":65,"text":"  if (combined.includes('api') || combined.includes('endpoint')) {\n    defenses.push({\n      threat: 'API Injection Attacks',\n      defense: 'Implement parameterized queries, input validation with allow-lists, and WAF rules',\n      effectiveness: 90\n    });\n    \n    defenses.push({\n      threat: 'Rate Limiting Bypass',\n      defense: 'Multi-layer rate limiting: per-IP, per-user, per-endpoint with Redis-backed sliding window',\n      effectiveness: 85\n    });\n    \n    hardeningSteps.push('Enable API request signing to prevent replay attacks');\n    hardeningSteps.push('Implement request size limits (max 1MB payload)');\n    hardeningSteps.push('Add API versioning to allow safe deprecation');\n    \n    monitoringStrategy.push({\n      metric: 'API error rate',\n      threshold: '>5% errors in 5 minutes',\n      action: 'Alert on-call, enable circuit breaker if >20%'\n    });\n    \n    monitoringStrategy.push({\n      metric: 'Request rate per IP',\n      threshold: '>100 req/sec from single IP',\n      action: 'Auto-block IP for 1 hour, alert security team'\n    });\n  }\n  \n  if (combined.includes('auth') || combined.includes('login') || combined.includes('token')) {\n    defenses.push({\n      threat: 'Authentication Bypass',"}
{"id":"f8c07e2014429154990e0bb08c8f2aed1b1cc549","source":"repo","path":"src/tools/blue-team.ts","sha":"6b551d43bc24aa3d87d4a4aaed0acd2b81fd8683","start":66,"end":95,"text":"      defense: 'Multi-factor authentication, JWT with short expiry (15min), refresh token rotation',\n      effectiveness: 95\n    });\n    \n    defenses.push({\n      threat: 'Session Hijacking',\n      defense: 'Secure cookies (HttpOnly, Secure, SameSite=Strict), session fingerprinting, IP validation',\n      effectiveness: 85\n    });\n    \n    hardeningSteps.push('Implement account lockout after 5 failed login attempts');\n    hardeningSteps.push('Use bcrypt/argon2 for password hashing with high cost factor');\n    hardeningSteps.push('Enforce strong password policy (12+ chars, complexity)');\n    hardeningSteps.push('Add CAPTCHA after 3 failed login attempts');\n    \n    monitoringStrategy.push({\n      metric: 'Failed login attempts',\n      threshold: '>10 failures from same IP in 1 minute',\n      action: 'Block IP, alert security team, check for credential stuffing'\n    });\n    \n    incidentResponse.push({\n      scenario: 'Suspected account takeover',\n      response: '1) Force logout all sessions 2) Require password reset 3) Enable MFA 4) Notify user via email/SMS',\n      priority: 'critical'\n    });\n  }\n  \n  if (combined.includes('database') || combined.includes('db')) {\n    defenses.push({"}
{"id":"3849ff41938556d04f4bdffbbbf883af56fe55b9","source":"repo","path":"src/tools/blue-team.ts","sha":"6b551d43bc24aa3d87d4a4aaed0acd2b81fd8683","start":96,"end":125,"text":"      threat: 'Database Connection Exhaustion',\n      defense: 'Connection pooling with max limits, query timeout (5s), read replicas for load distribution',\n      effectiveness: 80\n    });\n    \n    defenses.push({\n      threat: 'SQL Injection',\n      defense: 'Parameterized queries only, ORM with query builder, database user with minimal privileges',\n      effectiveness: 95\n    });\n    \n    hardeningSteps.push('Enable database query logging for slow queries (>1s)');\n    hardeningSteps.push('Implement database backups every 6 hours with point-in-time recovery');\n    hardeningSteps.push('Use separate read-only database user for reporting queries');\n    \n    monitoringStrategy.push({\n      metric: 'Database connection pool usage',\n      threshold: '>80% pool utilization',\n      action: 'Alert on-call, scale up pool size or add read replica'\n    });\n    \n    incidentResponse.push({\n      scenario: 'Database corruption detected',\n      response: '1) Stop writes immediately 2) Restore from last known good backup 3) Replay transaction logs 4) Validate data integrity',\n      priority: 'critical'\n    });\n  }\n  \n  if (combined.includes('cache') || combined.includes('redis')) {\n    defenses.push({"}
{"id":"be2c77efb21e39aba9887aff156a55b5aaf83e4e","source":"repo","path":"src/tools/blue-team.ts","sha":"6b551d43bc24aa3d87d4a4aaed0acd2b81fd8683","start":126,"end":156,"text":"      threat: 'Cache Stampede',\n      defense: 'Probabilistic early expiration, cache warming, request coalescing for identical keys',\n      effectiveness: 85\n    });\n    \n    hardeningSteps.push('Implement cache versioning for safe invalidation');\n    hardeningSteps.push('Add cache hit/miss ratio monitoring');\n    \n    monitoringStrategy.push({\n      metric: 'Cache hit rate',\n      threshold: '<70% hit rate',\n      action: 'Alert on-call, investigate cache invalidation patterns'\n    });\n  }\n  \n  if (combined.includes('microservice') || combined.includes('distributed')) {\n    defenses.push({\n      threat: 'Cascading Failures',\n      defense: 'Circuit breakers (fail fast after 5 errors), bulkheads (isolate resources), timeouts (3s max)',\n      effectiveness: 90\n    });\n    \n    defenses.push({\n      threat: 'Service Discovery Failure',\n      defense: 'Client-side load balancing with health checks, fallback to cached service registry',\n      effectiveness: 80\n    });\n    \n    resilienceImprovements.push('Implement retry with exponential backoff (max 3 retries)');\n    resilienceImprovements.push('Add graceful degradation (serve stale data if service down)');\n    resilienceImprovements.push('Use idempotency keys for safe retries');"}
{"id":"047f9835cdd85644cbec01ee8a6a453614bb942e","source":"repo","path":"src/tools/blue-team.ts","sha":"6b551d43bc24aa3d87d4a4aaed0acd2b81fd8683","start":157,"end":181,"text":"    resilienceImprovements.push('Implement request hedging (send duplicate request if slow)');\n    \n    monitoringStrategy.push({\n      metric: 'Service-to-service latency',\n      threshold: 'p99 >500ms',\n      action: 'Alert on-call, check for network issues or downstream slowness'\n    });\n    \n    incidentResponse.push({\n      scenario: 'Critical service down',\n      response: '1) Enable circuit breaker 2) Serve cached/stale data 3) Scale up healthy instances 4) Investigate root cause',\n      priority: 'critical'\n    });\n  }\n  \n  // General hardening steps\n  hardeningSteps.push('Enable HTTPS only with TLS 1.3, disable older protocols');\n  hardeningSteps.push('Implement security headers (CSP, HSTS, X-Frame-Options, X-Content-Type-Options)');\n  hardeningSteps.push('Use principle of least privilege for all service accounts');\n  hardeningSteps.push('Enable audit logging for all sensitive operations');\n  hardeningSteps.push('Implement automated security scanning (SAST, DAST, dependency scanning)');\n  hardeningSteps.push('Use secrets management (Vault, AWS Secrets Manager) instead of env vars');\n  \n  // General resilience improvements\n  resilienceImprovements.push('Implement health check endpoints (/health, /ready)');"}
{"id":"208de8b7b433d84869c45f537a0b7005c137954a","source":"repo","path":"src/tools/blue-team.ts","sha":"6b551d43bc24aa3d87d4a4aaed0acd2b81fd8683","start":182,"end":215,"text":"  resilienceImprovements.push('Add chaos engineering tests (random pod kills, network delays)');\n  resilienceImprovements.push('Use blue-green or canary deployments for zero-downtime releases');\n  resilienceImprovements.push('Implement automatic rollback on deployment failure');\n  resilienceImprovements.push('Add request tracing (OpenTelemetry) for debugging distributed issues');\n  \n  // General monitoring\n  monitoringStrategy.push({\n    metric: 'Error rate',\n    threshold: '>1% errors in 5 minutes',\n    action: 'Alert on-call, check logs for patterns'\n  });\n  \n  monitoringStrategy.push({\n    metric: 'Response time',\n    threshold: 'p95 >1s',\n    action: 'Alert on-call, check for slow queries or external API issues'\n  });\n  \n  monitoringStrategy.push({\n    metric: 'CPU/Memory usage',\n    threshold: '>80% for 10 minutes',\n    action: 'Auto-scale if possible, alert on-call if at max capacity'\n  });\n  \n  const confidence = 80;\n  \n  return {\n    defenses,\n    monitoringStrategy,\n    incidentResponse,\n    hardeningSteps,\n    resilienceImprovements,\n    confidence,\n    reasoning: `Blue team defense strategy includes ${defenses.length} specific defenses, ${monitoringStrategy.length} monitoring metrics, ${incidentResponse.length} incident response plans, ${hardeningSteps.length} hardening steps, and ${resilienceImprovements.length} resilience improvements.`"}
{"id":"c4d1b9209542480f4f336123af6a4ae191bbd4ac","source":"repo","path":"src/tools/blue-team.ts","sha":"6b551d43bc24aa3d87d4a4aaed0acd2b81fd8683","start":216,"end":219,"text":"  };\n}\n\n"}
{"id":"1bd69f8adf52dd1c028fbc2b4b99c7d17acb6972","source":"repo","path":"src/tools/brainstorming.ts","sha":"8a929ea5a2ce6d217aaf2b52cac8737f1fa7445a","start":1,"end":34,"text":"/**\n * Brainstorming Tool\n * Generate many ideas quickly without judgment\n */\n\nexport interface BrainstormingInput {\n  prompt: string;\n  context?: string;\n  quantity?: number;\n}\n\nexport interface BrainstormingOutput {\n  ideas: Array<{ idea: string; category: string; novelty: number }>;\n  categories: string[];\n  wildIdeas: string[];\n  practicalIdeas: string[];\n  confidence: number;\n  reasoning: string;\n}\n\nexport function brainstorming(input: BrainstormingInput): BrainstormingOutput {\n  const { prompt, context = '', quantity = 20 } = input;\n  const combined = `${prompt} ${context}`.toLowerCase();\n  \n  const ideas: Array<{ idea: string; category: string; novelty: number }> = [];\n  const wildIdeas: string[] = [];\n  const practicalIdeas: string[] = [];\n  \n  // Generate ideas based on prompt domain\n  if (combined.includes('feature') || combined.includes('product')) {\n    ideas.push({ idea: 'AI-powered auto-complete for user inputs', category: 'AI/ML', novelty: 70 });\n    ideas.push({ idea: 'Dark mode with custom color themes', category: 'UX', novelty: 30 });\n    ideas.push({ idea: 'Collaborative real-time editing', category: 'Collaboration', novelty: 60 });\n    ideas.push({ idea: 'Voice commands for hands-free operation', category: 'Accessibility', novelty: 75 });"}
{"id":"cdcc58a29f8715d69afdfac025eb554f336a8fc7","source":"repo","path":"src/tools/brainstorming.ts","sha":"8a929ea5a2ce6d217aaf2b52cac8737f1fa7445a","start":35,"end":48,"text":"    ideas.push({ idea: 'Gamification with points and achievements', category: 'Engagement', novelty: 50 });\n    ideas.push({ idea: 'Export to 10+ different file formats', category: 'Integration', novelty: 40 });\n    ideas.push({ idea: 'Offline mode with sync when online', category: 'Reliability', novelty: 65 });\n    ideas.push({ idea: 'Plugin marketplace for third-party extensions', category: 'Ecosystem', novelty: 80 });\n    ideas.push({ idea: 'Time-travel debugging to replay user sessions', category: 'Developer Tools', novelty: 85 });\n    ideas.push({ idea: 'Blockchain-based audit trail', category: 'Security', novelty: 90 });\n  }\n  \n  if (combined.includes('performance') || combined.includes('optimize')) {\n    ideas.push({ idea: 'Implement aggressive caching at every layer', category: 'Caching', novelty: 30 });\n    ideas.push({ idea: 'Use WebAssembly for compute-heavy operations', category: 'Technology', novelty: 75 });\n    ideas.push({ idea: 'Lazy load everything - images, components, data', category: 'Loading', novelty: 40 });\n    ideas.push({ idea: 'Pre-compute and cache common queries', category: 'Database', novelty: 50 });\n    ideas.push({ idea: 'Use edge computing to serve from closest location', category: 'Infrastructure', novelty: 70 });"}
{"id":"929fea5f0117f66924dd93dce4536356c96ed06a","source":"repo","path":"src/tools/brainstorming.ts","sha":"8a929ea5a2ce6d217aaf2b52cac8737f1fa7445a","start":49,"end":63,"text":"    ideas.push({ idea: 'Implement virtual scrolling for large lists', category: 'UI', novelty: 55 });\n    ideas.push({ idea: 'Use service workers for background processing', category: 'PWA', novelty: 65 });\n    ideas.push({ idea: 'Compress all assets with Brotli', category: 'Compression', novelty: 35 });\n    ideas.push({ idea: 'Use HTTP/3 and QUIC protocol', category: 'Network', novelty: 80 });\n    ideas.push({ idea: 'Implement predictive prefetching based on user behavior', category: 'AI/ML', novelty: 85 });\n  }\n  \n  if (combined.includes('monetize') || combined.includes('revenue')) {\n    ideas.push({ idea: 'Freemium model with premium features', category: 'Pricing', novelty: 20 });\n    ideas.push({ idea: 'Usage-based pricing (pay per API call)', category: 'Pricing', novelty: 50 });\n    ideas.push({ idea: 'Enterprise tier with custom SLAs', category: 'B2B', novelty: 40 });\n    ideas.push({ idea: 'Marketplace for user-created content', category: 'Platform', novelty: 70 });\n    ideas.push({ idea: 'Affiliate program for referrals', category: 'Growth', novelty: 45 });\n    ideas.push({ idea: 'White-label solution for agencies', category: 'B2B', novelty: 65 });\n    ideas.push({ idea: 'Sponsored features or integrations', category: 'Partnerships', novelty: 60 });"}
{"id":"d2728bbc48f7b30bfce01910d1939396c98f73bb","source":"repo","path":"src/tools/brainstorming.ts","sha":"8a929ea5a2ce6d217aaf2b52cac8737f1fa7445a","start":64,"end":77,"text":"    ideas.push({ idea: 'Data insights as a paid product', category: 'Data', novelty: 75 });\n    ideas.push({ idea: 'Certification program for power users', category: 'Education', novelty: 55 });\n    ideas.push({ idea: 'NFT-based access tokens', category: 'Web3', novelty: 95 });\n  }\n  \n  if (combined.includes('growth') || combined.includes('marketing')) {\n    ideas.push({ idea: 'Viral referral program with incentives', category: 'Referral', novelty: 40 });\n    ideas.push({ idea: 'Content marketing with SEO-optimized blog', category: 'Content', novelty: 25 });\n    ideas.push({ idea: 'Partner with influencers for promotion', category: 'Influencer', novelty: 50 });\n    ideas.push({ idea: 'Create free tools that lead to paid product', category: 'Lead Gen', novelty: 60 });\n    ideas.push({ idea: 'Host virtual events and webinars', category: 'Events', novelty: 45 });\n    ideas.push({ idea: 'Build in public and share journey on social media', category: 'Community', novelty: 55 });\n    ideas.push({ idea: 'Create API-first product for developer adoption', category: 'Developer', novelty: 70 });\n    ideas.push({ idea: 'Gamify onboarding with progress tracking', category: 'Onboarding', novelty: 65 });"}
{"id":"2a490f05653bf08f5cdd6159983eca1218814b67","source":"repo","path":"src/tools/brainstorming.ts","sha":"8a929ea5a2ce6d217aaf2b52cac8737f1fa7445a","start":78,"end":91,"text":"    ideas.push({ idea: 'Launch on Product Hunt, Hacker News, Reddit', category: 'Launch', novelty: 35 });\n    ideas.push({ idea: 'Create memes and viral content', category: 'Viral', novelty: 80 });\n  }\n  \n  if (combined.includes('reduce') || combined.includes('cost')) {\n    ideas.push({ idea: 'Move to cheaper cloud provider', category: 'Infrastructure', novelty: 30 });\n    ideas.push({ idea: 'Use spot instances for non-critical workloads', category: 'Cloud', novelty: 50 });\n    ideas.push({ idea: 'Implement aggressive data retention policies', category: 'Storage', novelty: 40 });\n    ideas.push({ idea: 'Replace paid services with open source alternatives', category: 'Software', novelty: 45 });\n    ideas.push({ idea: 'Optimize database queries to reduce compute', category: 'Database', novelty: 55 });\n    ideas.push({ idea: 'Use CDN for static assets instead of origin', category: 'CDN', novelty: 35 });\n    ideas.push({ idea: 'Implement tiered storage (hot/warm/cold)', category: 'Storage', novelty: 60 });\n    ideas.push({ idea: 'Batch process jobs during off-peak hours', category: 'Scheduling', novelty: 50 });\n    ideas.push({ idea: 'Use serverless for variable workloads', category: 'Serverless', novelty: 65 });"}
{"id":"9eeb2f9d88ae3bc36fd2592db18e12d3d1af247d","source":"repo","path":"src/tools/brainstorming.ts","sha":"8a929ea5a2ce6d217aaf2b52cac8737f1fa7445a","start":92,"end":115,"text":"    ideas.push({ idea: 'Run own data center instead of cloud', category: 'Infrastructure', novelty: 85 });\n  }\n  \n  // Add wild ideas (high novelty)\n  wildIdeas.push('Make the entire product a game');\n  wildIdeas.push('Use AI to generate the product based on user description');\n  wildIdeas.push('Charge users in cryptocurrency only');\n  wildIdeas.push('Make it work only on Tuesdays to create scarcity');\n  wildIdeas.push('Replace all text with emojis');\n  wildIdeas.push('Use quantum computing for... something');\n  wildIdeas.push('Make it a DAO where users vote on features');\n  wildIdeas.push('Integrate with brain-computer interfaces');\n  wildIdeas.push('Use AR/VR for the entire interface');\n  wildIdeas.push('Make it smell-enabled (olfactory UX)');\n  \n  // Add practical ideas (low novelty but proven)\n  practicalIdeas.push('Add comprehensive documentation');\n  practicalIdeas.push('Implement proper error handling');\n  practicalIdeas.push('Add unit and integration tests');\n  practicalIdeas.push('Set up monitoring and alerting');\n  practicalIdeas.push('Create onboarding tutorial');\n  practicalIdeas.push('Add keyboard shortcuts');\n  practicalIdeas.push('Implement search functionality');\n  practicalIdeas.push('Add export/import features');"}
{"id":"821fc03e515fcd43e80736e28c4e19f60ce527bd","source":"repo","path":"src/tools/brainstorming.ts","sha":"8a929ea5a2ce6d217aaf2b52cac8737f1fa7445a","start":116,"end":134,"text":"  practicalIdeas.push('Create mobile-responsive design');\n  practicalIdeas.push('Add email notifications');\n  \n  // Categorize ideas\n  const categories = [...new Set(ideas.map(i => i.category))];\n  \n  const confidence = 60;\n  \n  return {\n    ideas,\n    categories,\n    wildIdeas,\n    practicalIdeas,\n    confidence,\n    reasoning: `Generated ${ideas.length} ideas across ${categories.length} categories, plus ${wildIdeas.length} wild ideas and ${practicalIdeas.length} practical ideas.`\n  };\n}\n\n"}
{"id":"ff39e16c2d5e2891ef78641714db82541c9866b9","source":"repo","path":"src/tools/context7.ts","sha":"cf7db07b91e695e5572f343fdf88563516315d70","start":1,"end":44,"text":"/**\n * Context7 Documentation Tools\n * Full Context7 API integration for library documentation access\n * Requires CONTEXT7_API_KEY environment variable (optional - works without for public docs)\n */\n\nimport axios, { AxiosInstance } from 'axios';\n\n// Singleton axios client\nlet context7Client: AxiosInstance | null = null;\n\nfunction getContext7Client(): AxiosInstance {\n  if (!context7Client) {\n    const apiKey = process.env.CONTEXT7_API_KEY || '';\n    context7Client = axios.create({\n      baseURL: 'https://api.context7.com',\n      headers: {\n        'Content-Type': 'application/json',\n        ...(apiKey && { 'Authorization': `Bearer ${apiKey}` }),\n      },\n      timeout: 30000,\n    });\n  }\n  return context7Client;\n}\n\nexport async function context7ResolveLibraryId(args: any): Promise<any> {\n  try {\n    const client = getContext7Client();\n    const response = await client.post('/v1/resolve', {\n      libraryName: args.libraryName,\n    });\n\n    return {\n      content: [{\n        type: 'text',\n        text: JSON.stringify(response.data, null, 2),\n      }],\n    };\n  } catch (error: any) {\n    return {\n      content: [{\n        type: 'text',\n        text: `Error resolving library: ${error.message}`,"}
{"id":"29b535eda9cc999efae72c59046bdb5e66acd9b8","source":"repo","path":"src/tools/context7.ts","sha":"cf7db07b91e695e5572f343fdf88563516315d70","start":45,"end":102,"text":"      }],\n      isError: true,\n    };\n  }\n}\n\nexport async function context7GetLibraryDocs(args: any): Promise<any> {\n  try {\n    const client = getContext7Client();\n    const response = await client.post('/v1/docs', {\n      libraryId: args.context7CompatibleLibraryID,\n      topic: args.topic,\n      tokens: args.tokens || 5000,\n    });\n\n    return {\n      content: [{\n        type: 'text',\n        text: JSON.stringify(response.data, null, 2),\n      }],\n    };\n  } catch (error: any) {\n    return {\n      content: [{\n        type: 'text',\n        text: `Error fetching docs: ${error.message}`,\n      }],\n      isError: true,\n    };\n  }\n}\n\nexport async function context7SearchLibraries(args: any): Promise<any> {\n  try {\n    const client = getContext7Client();\n    const response = await client.post('/v1/search', {\n      query: args.query,\n      limit: args.limit || 10,\n    });\n\n    return {\n      content: [{\n        type: 'text',\n        text: JSON.stringify(response.data, null, 2),\n      }],\n    };\n  } catch (error: any) {\n    return {\n      content: [{\n        type: 'text',\n        text: `Error searching libraries: ${error.message}`,\n      }],\n      isError: true,\n    };\n  }\n}\n\nexport async function context7CompareVersions(args: any): Promise<any> {"}
{"id":"f4c73a54193cdd409fe6a3affdef21c8642711b3","source":"repo","path":"src/tools/context7.ts","sha":"cf7db07b91e695e5572f343fdf88563516315d70","start":103,"end":155,"text":"  try {\n    const client = getContext7Client();\n    const response = await client.post('/v1/compare', {\n      libraryId: args.libraryId,\n      fromVersion: args.fromVersion,\n      toVersion: args.toVersion,\n    });\n\n    return {\n      content: [{\n        type: 'text',\n        text: JSON.stringify(response.data, null, 2),\n      }],\n    };\n  } catch (error: any) {\n    return {\n      content: [{\n        type: 'text',\n        text: `Error comparing versions: ${error.message}`,\n      }],\n      isError: true,\n    };\n  }\n}\n\nexport async function context7GetExamples(args: any): Promise<any> {\n  try {\n    const client = getContext7Client();\n    const response = await client.post('/v1/examples', {\n      libraryId: args.libraryId,\n      useCase: args.useCase,\n      language: args.language || 'javascript',\n    });\n\n    return {\n      content: [{\n        type: 'text',\n        text: JSON.stringify(response.data, null, 2),\n      }],\n    };\n  } catch (error: any) {\n    return {\n      content: [{\n        type: 'text',\n        text: `Error fetching examples: ${error.message}`,\n      }],\n      isError: true,\n    };\n  }\n}\n\nexport async function context7GetMigrationGuide(args: any): Promise<any> {\n  try {"}
{"id":"f76475a6db76aa0298d1754ced943be30a3cdea0","source":"repo","path":"src/tools/context7.ts","sha":"cf7db07b91e695e5572f343fdf88563516315d70","start":156,"end":180,"text":"    const client = getContext7Client();\n    const response = await client.post('/v1/migration', {\n      libraryId: args.libraryId,\n      fromVersion: args.fromVersion,\n      toVersion: args.toVersion,\n    });\n\n    return {\n      content: [{\n        type: 'text',\n        text: JSON.stringify(response.data, null, 2),\n      }],\n    };\n  } catch (error: any) {\n    return {\n      content: [{\n        type: 'text',\n        text: `Error fetching migration guide: ${error.message}`,\n      }],\n      isError: true,\n    };\n  }\n}\n\n"}
{"id":"4b33248d38eb499952243b91bf58197b44ce18bb","source":"repo","path":"src/tools/critical-thinking.ts","sha":"372f6140c782dbed96f6be2ced1939df11b3eb6f","start":1,"end":35,"text":"/**\n * Critical Thinking Tool\n * Evaluate arguments, evidence, and logical reasoning\n */\n\nexport interface CriticalThinkingInput {\n  argument: string;\n  context?: string;\n  depth?: 'quick' | 'deep';\n}\n\nexport interface CriticalThinkingOutput {\n  claims: string[];\n  evidence: Array<{ claim: string; evidence: string; strength: 'strong' | 'moderate' | 'weak' | 'none' }>;\n  logicalFallacies: Array<{ type: string; description: string; location: string }>;\n  assumptions: string[];\n  counterEvidence: string[];\n  overallAssessment: {\n    logicalSoundness: number; // 0-100\n    evidenceQuality: number; // 0-100\n    conclusion: string;\n  };\n  confidence: number;\n  reasoning: string;\n}\n\nexport function criticalThinking(input: CriticalThinkingInput): CriticalThinkingOutput {\n  const { argument, context = '', depth = 'quick' } = input;\n  const combined = `${argument} ${context}`.toLowerCase();\n  \n  const claims: string[] = [];\n  const evidence: Array<{ claim: string; evidence: string; strength: 'strong' | 'moderate' | 'weak' | 'none' }> = [];\n  const logicalFallacies: Array<{ type: string; description: string; location: string }> = [];\n  const assumptions: string[] = [];\n  const counterEvidence: string[] = [];"}
{"id":"ca264dd84cf84ff0d405cf42236e476871080087","source":"repo","path":"src/tools/critical-thinking.ts","sha":"372f6140c782dbed96f6be2ced1939df11b3eb6f","start":36,"end":62,"text":"  \n  // Extract claims (sentences with strong assertions)\n  if (combined.includes('will') || combined.includes('must') || combined.includes('always')) {\n    claims.push('Contains absolute claims that may not account for exceptions');\n  }\n  if (combined.includes('should') || combined.includes('need to')) {\n    claims.push('Contains normative claims about what ought to be done');\n  }\n  if (combined.includes('because') || combined.includes('therefore') || combined.includes('thus')) {\n    claims.push('Contains causal or logical reasoning chains');\n  }\n  \n  // Detect logical fallacies\n  if ((combined.includes('everyone') || combined.includes('nobody') || combined.includes('always') || combined.includes('never')) && \n      !combined.includes('almost') && !combined.includes('usually')) {\n    logicalFallacies.push({\n      type: 'Hasty Generalization',\n      description: 'Uses absolute terms without accounting for exceptions',\n      location: 'Throughout argument'\n    });\n  }\n  \n  if (combined.includes('if we don\\'t') && combined.includes('then')) {\n    logicalFallacies.push({\n      type: 'False Dilemma',\n      description: 'Presents only two options when more may exist',\n      location: 'Conditional statement'"}
{"id":"7650f836f949801224d25318293f681479271fbb","source":"repo","path":"src/tools/critical-thinking.ts","sha":"372f6140c782dbed96f6be2ced1939df11b3eb6f","start":63,"end":94,"text":"    });\n  }\n  \n  if ((combined.includes('popular') || combined.includes('everyone does') || combined.includes('industry standard')) &&\n      combined.includes('therefore')) {\n    logicalFallacies.push({\n      type: 'Appeal to Popularity',\n      description: 'Argues something is correct because it\\'s popular',\n      location: 'Justification section'\n    });\n  }\n  \n  if (combined.includes('expert') || combined.includes('authority') || combined.includes('said')) {\n    logicalFallacies.push({\n      type: 'Appeal to Authority',\n      description: 'Relies on authority rather than evidence (may be valid if expert is relevant)',\n      location: 'Citation of authority'\n    });\n  }\n  \n  if (combined.includes('slippery slope') || (combined.includes('lead to') && combined.includes('eventually'))) {\n    logicalFallacies.push({\n      type: 'Slippery Slope',\n      description: 'Assumes one action will inevitably lead to extreme consequences',\n      location: 'Consequence prediction'\n    });\n  }\n  \n  // Identify assumptions\n  if (combined.includes('microservice') || combined.includes('distributed')) {\n    assumptions.push('Assumes team has expertise in distributed systems');\n    assumptions.push('Assumes infrastructure can handle multiple services');"}
{"id":"8971351abf6f35f2b9ee2db60bc1f8366bbdca1a","source":"repo","path":"src/tools/critical-thinking.ts","sha":"372f6140c782dbed96f6be2ced1939df11b3eb6f","start":95,"end":127,"text":"  }\n  \n  if (combined.includes('scale') || combined.includes('growth')) {\n    assumptions.push('Assumes future growth will occur');\n    assumptions.push('Assumes current architecture won\\'t scale');\n  }\n  \n  if (combined.includes('user') || combined.includes('customer')) {\n    assumptions.push('Assumes user behavior and needs are understood');\n  }\n  \n  if (combined.includes('performance') || combined.includes('faster')) {\n    assumptions.push('Assumes performance is currently a problem');\n    assumptions.push('Assumes proposed solution will improve performance');\n  }\n  \n  if (combined.includes('security') || combined.includes('secure')) {\n    assumptions.push('Assumes current security is inadequate');\n  }\n  \n  // Evaluate evidence quality\n  if (combined.includes('benchmark') || combined.includes('test') || combined.includes('data')) {\n    evidence.push({\n      claim: 'Performance improvement',\n      evidence: 'Mentions benchmarks/tests/data',\n      strength: 'strong'\n    });\n  } else if (combined.includes('faster') || combined.includes('better')) {\n    evidence.push({\n      claim: 'Performance improvement',\n      evidence: 'Subjective claim without data',\n      strength: 'weak'\n    });"}
{"id":"04f44450286a4e8ef11bdb4ecb7d586c6c913484","source":"repo","path":"src/tools/critical-thinking.ts","sha":"372f6140c782dbed96f6be2ced1939df11b3eb6f","start":128,"end":162,"text":"  }\n  \n  if (combined.includes('research') || combined.includes('study') || combined.includes('paper')) {\n    evidence.push({\n      claim: 'Backed by research',\n      evidence: 'References research/studies',\n      strength: 'strong'\n    });\n  }\n  \n  if (combined.includes('experience') || combined.includes('in my opinion')) {\n    evidence.push({\n      claim: 'Based on experience',\n      evidence: 'Anecdotal evidence',\n      strength: 'moderate'\n    });\n  }\n  \n  // Generate counter-evidence\n  if (combined.includes('microservice')) {\n    counterEvidence.push('Microservices add operational complexity and may slow development');\n    counterEvidence.push('Monoliths can scale effectively with proper architecture');\n  }\n  \n  if (combined.includes('rewrite')) {\n    counterEvidence.push('Rewrites often take longer and cost more than expected');\n    counterEvidence.push('Incremental refactoring may be safer and faster');\n  }\n  \n  if (combined.includes('new technology') || combined.includes('latest')) {\n    counterEvidence.push('New technology may lack maturity and community support');\n    counterEvidence.push('Team learning curve could slow development');\n  }\n  \n  if (combined.includes('optimize') || combined.includes('performance')) {"}
{"id":"0d2d2f1bd559ae3a1915be6453e8c971f097c92c","source":"repo","path":"src/tools/critical-thinking.ts","sha":"372f6140c782dbed96f6be2ced1939df11b3eb6f","start":163,"end":186,"text":"    counterEvidence.push('Premature optimization may waste time on non-bottlenecks');\n    counterEvidence.push('Profiling should identify actual bottlenecks first');\n  }\n  \n  // Calculate assessment scores\n  let logicalSoundness = 70; // Start neutral\n  logicalSoundness -= logicalFallacies.length * 15; // Penalize fallacies\n  logicalSoundness = Math.max(0, Math.min(100, logicalSoundness));\n  \n  let evidenceQuality = 50; // Start neutral\n  const strongEvidence = evidence.filter(e => e.strength === 'strong').length;\n  const weakEvidence = evidence.filter(e => e.strength === 'weak' || e.strength === 'none').length;\n  evidenceQuality += strongEvidence * 20;\n  evidenceQuality -= weakEvidence * 10;\n  evidenceQuality = Math.max(0, Math.min(100, evidenceQuality));\n  \n  let conclusion = '';\n  if (logicalSoundness >= 70 && evidenceQuality >= 70) {\n    conclusion = 'Strong argument with solid logic and evidence';\n  } else if (logicalSoundness >= 50 && evidenceQuality >= 50) {\n    conclusion = 'Moderate argument - has merit but needs stronger support';\n  } else if (logicalSoundness < 50 || evidenceQuality < 50) {\n    conclusion = 'Weak argument - significant logical or evidential issues';\n  } else {"}
{"id":"38112ffc08212aa5117fa0c0c8e556aab9ab6225","source":"repo","path":"src/tools/critical-thinking.ts","sha":"372f6140c782dbed96f6be2ced1939df11b3eb6f","start":187,"end":208,"text":"    conclusion = 'Mixed argument - some strengths and weaknesses';\n  }\n  \n  const confidence = Math.min(logicalSoundness, evidenceQuality);\n  \n  return {\n    claims,\n    evidence,\n    logicalFallacies,\n    assumptions,\n    counterEvidence,\n    overallAssessment: {\n      logicalSoundness,\n      evidenceQuality,\n      conclusion\n    },\n    confidence,\n    reasoning: `Analyzed argument for logical structure, evidence quality, and assumptions. Found ${logicalFallacies.length} potential fallacies, ${assumptions.length} assumptions, and ${evidence.length} evidence claims.`\n  };\n}\n\n"}
{"id":"d6a3c9951479898a1f2bffef790f25de33f8eba3","source":"repo","path":"src/tools/decision-matrix.ts","sha":"02a8f740f93f2a8a2c6c307629c03bd8df7f17cb","start":1,"end":43,"text":"/**\n * Decision Matrix Tool\n * Weighted decision-making framework for comparing options\n */\n\nexport interface DecisionMatrixInput {\n  options: string[];\n  criteria?: string[];\n  context?: string;\n}\n\nexport interface DecisionMatrixOutput {\n  matrix: Array<{\n    option: string;\n    scores: Array<{ criterion: string; score: number; weight: number; weightedScore: number }>;\n    totalScore: number;\n    rank: number;\n  }>;\n  recommendation: string;\n  tradeoffs: Array<{ option: string; strengths: string[]; weaknesses: string[] }>;\n  confidence: number;\n  reasoning: string;\n}\n\nexport function decisionMatrix(input: DecisionMatrixInput): DecisionMatrixOutput {\n  const { options, criteria = [], context = '' } = input;\n  const combined = `${options.join(' ')} ${criteria.join(' ')} ${context}`.toLowerCase();\n  \n  // Auto-detect criteria if not provided\n  const detectedCriteria = criteria.length > 0 ? criteria : [\n    'Cost',\n    'Performance',\n    'Maintainability',\n    'Scalability',\n    'Time to Implement',\n    'Team Expertise',\n    'Risk'\n  ];\n  \n  // Auto-detect weights based on context\n  const weights: { [key: string]: number } = {};\n  \n  if (combined.includes('startup') || combined.includes('mvp')) {"}
{"id":"458e306f8fa906fd0cfc7934655d05311a4fddd2","source":"repo","path":"src/tools/decision-matrix.ts","sha":"02a8f740f93f2a8a2c6c307629c03bd8df7f17cb","start":44,"end":77,"text":"    weights['Cost'] = 0.25;\n    weights['Time to Implement'] = 0.25;\n    weights['Performance'] = 0.10;\n    weights['Maintainability'] = 0.15;\n    weights['Scalability'] = 0.10;\n    weights['Team Expertise'] = 0.10;\n    weights['Risk'] = 0.05;\n  } else if (combined.includes('enterprise') || combined.includes('production')) {\n    weights['Cost'] = 0.10;\n    weights['Time to Implement'] = 0.10;\n    weights['Performance'] = 0.20;\n    weights['Maintainability'] = 0.20;\n    weights['Scalability'] = 0.20;\n    weights['Team Expertise'] = 0.10;\n    weights['Risk'] = 0.10;\n  } else {\n    // Balanced weights\n    const equalWeight = 1.0 / detectedCriteria.length;\n    detectedCriteria.forEach(c => weights[c] = equalWeight);\n  }\n  \n  const matrix: Array<{\n    option: string;\n    scores: Array<{ criterion: string; score: number; weight: number; weightedScore: number }>;\n    totalScore: number;\n    rank: number;\n  }> = [];\n  \n  const tradeoffs: Array<{ option: string; strengths: string[]; weaknesses: string[] }> = [];\n  \n  // Score each option\n  options.forEach(option => {\n    const optionLower = option.toLowerCase();\n    const scores: Array<{ criterion: string; score: number; weight: number; weightedScore: number }> = [];"}
{"id":"dfe4a6dada8569ee8cad3aa1d2fd0d2a8fcc1bd5","source":"repo","path":"src/tools/decision-matrix.ts","sha":"02a8f740f93f2a8a2c6c307629c03bd8df7f17cb","start":78,"end":99,"text":"    \n    detectedCriteria.forEach(criterion => {\n      let score = 50; // Start neutral\n      const weight = weights[criterion] || (1.0 / detectedCriteria.length);\n      \n      // Score based on option characteristics\n      if (criterion === 'Cost') {\n        if (optionLower.includes('free') || optionLower.includes('open source')) score = 90;\n        else if (optionLower.includes('cheap') || optionLower.includes('low cost')) score = 80;\n        else if (optionLower.includes('expensive') || optionLower.includes('enterprise')) score = 30;\n        else if (optionLower.includes('cloud') || optionLower.includes('saas')) score = 60;\n      }\n      \n      if (criterion === 'Performance') {\n        if (optionLower.includes('fast') || optionLower.includes('optimized')) score = 85;\n        else if (optionLower.includes('slow') || optionLower.includes('legacy')) score = 40;\n        else if (optionLower.includes('cache') || optionLower.includes('cdn')) score = 90;\n      }\n      \n      if (criterion === 'Maintainability') {\n        if (optionLower.includes('simple') || optionLower.includes('minimal')) score = 85;\n        else if (optionLower.includes('complex') || optionLower.includes('custom')) score = 40;"}
{"id":"d2462a0277b038ec87572d9a1ddb14352400cf89","source":"repo","path":"src/tools/decision-matrix.ts","sha":"02a8f740f93f2a8a2c6c307629c03bd8df7f17cb","start":100,"end":122,"text":"        else if (optionLower.includes('standard') || optionLower.includes('popular')) score = 75;\n      }\n      \n      if (criterion === 'Scalability') {\n        if (optionLower.includes('cloud') || optionLower.includes('distributed')) score = 85;\n        else if (optionLower.includes('monolith') || optionLower.includes('single')) score = 50;\n        else if (optionLower.includes('microservice') || optionLower.includes('serverless')) score = 90;\n      }\n      \n      if (criterion === 'Time to Implement') {\n        if (optionLower.includes('quick') || optionLower.includes('ready')) score = 85;\n        else if (optionLower.includes('custom') || optionLower.includes('build')) score = 40;\n        else if (optionLower.includes('saas') || optionLower.includes('managed')) score = 90;\n      }\n      \n      if (criterion === 'Team Expertise') {\n        if (optionLower.includes('familiar') || optionLower.includes('known')) score = 85;\n        else if (optionLower.includes('new') || optionLower.includes('learning')) score = 40;\n        else if (optionLower.includes('popular') || optionLower.includes('standard')) score = 70;\n      }\n      \n      if (criterion === 'Risk') {\n        if (optionLower.includes('proven') || optionLower.includes('stable')) score = 85;"}
{"id":"a3f75360cf6b4c9d9fe9044ea3aa199c67d36526","source":"repo","path":"src/tools/decision-matrix.ts","sha":"02a8f740f93f2a8a2c6c307629c03bd8df7f17cb","start":123,"end":171,"text":"        else if (optionLower.includes('experimental') || optionLower.includes('beta')) score = 30;\n        else if (optionLower.includes('new') || optionLower.includes('cutting edge')) score = 40;\n      }\n      \n      scores.push({\n        criterion,\n        score,\n        weight,\n        weightedScore: score * weight\n      });\n    });\n    \n    const totalScore = scores.reduce((sum, s) => sum + s.weightedScore, 0);\n    \n    matrix.push({\n      option,\n      scores,\n      totalScore,\n      rank: 0 // Will be set after sorting\n    });\n    \n    // Identify strengths and weaknesses\n    const strengths: string[] = [];\n    const weaknesses: string[] = [];\n    \n    scores.forEach(s => {\n      if (s.score >= 80) {\n        strengths.push(`${s.criterion}: ${s.score}/100`);\n      } else if (s.score <= 40) {\n        weaknesses.push(`${s.criterion}: ${s.score}/100`);\n      }\n    });\n    \n    tradeoffs.push({\n      option,\n      strengths,\n      weaknesses\n    });\n  });\n  \n  // Sort by total score and assign ranks\n  matrix.sort((a, b) => b.totalScore - a.totalScore);\n  matrix.forEach((item, index) => {\n    item.rank = index + 1;\n  });\n  \n  // Generate recommendation\n  const winner = matrix[0];\n  const runnerUp = matrix[1];"}
{"id":"7c808700c89249e1f815c4f8e8425390de9aa75b","source":"repo","path":"src/tools/decision-matrix.ts","sha":"02a8f740f93f2a8a2c6c307629c03bd8df7f17cb","start":172,"end":192,"text":"  \n  let recommendation = `Recommended: ${winner.option} (score: ${winner.totalScore.toFixed(1)})`;\n  \n  if (runnerUp && Math.abs(winner.totalScore - runnerUp.totalScore) < 5) {\n    recommendation += ` - CLOSE CALL with ${runnerUp.option} (score: ${runnerUp.totalScore.toFixed(1)}). Consider both options carefully.`;\n  } else if (runnerUp) {\n    recommendation += ` - Clear winner over ${runnerUp.option} (score: ${runnerUp.totalScore.toFixed(1)})`;\n  }\n  \n  const confidence = winner.totalScore >= 70 ? 80 : winner.totalScore >= 60 ? 65 : 50;\n  \n  return {\n    matrix,\n    recommendation,\n    tradeoffs,\n    confidence,\n    reasoning: `Evaluated ${options.length} options across ${detectedCriteria.length} criteria with weighted scoring. Top option scored ${winner.totalScore.toFixed(1)}/100.`\n  };\n}\n\n"}
{"id":"5acf929288e729778ea77f2cb3037e53ab7b4e7c","source":"repo","path":"src/tools/devils-advocate.ts","sha":"9733bee05b7f758ed0635c3189ca18f95608ce3a","start":1,"end":38,"text":"/**\n * Devil's Advocate Tool\n * Challenges assumptions and finds flaws in plans, ideas, or arguments\n */\n\nexport interface DevilsAdvocateInput {\n  context: string;\n  goal?: string;\n  depth?: 'quick' | 'deep';\n}\n\nexport interface DevilsAdvocateOutput {\n  challenges: string[];\n  risks: string[];\n  counterarguments: string[];\n  recommendations: string[];\n  confidence: number;\n  reasoning: string;\n}\n\nexport function devilsAdvocate(input: DevilsAdvocateInput): DevilsAdvocateOutput {\n  const { context, goal, depth = 'quick' } = input;\n  \n  const challenges: string[] = [];\n  const risks: string[] = [];\n  const counterarguments: string[] = [];\n  const recommendations: string[] = [];\n  \n  // Analyze context for common pitfalls\n  const lowerContext = context.toLowerCase();\n  \n  // Technology/Architecture challenges\n  if (lowerContext.includes('migrate') || lowerContext.includes('rewrite')) {\n    challenges.push('Migration projects often take 2-3x longer than estimated');\n    challenges.push('Team may lack experience with new technology');\n    challenges.push('Existing system works - why fix what isn\\'t broken?');\n    risks.push('Business disruption during migration');\n    risks.push('Data loss or corruption during transition');"}
{"id":"1ebafa7e238d5c0baf997bf6c7b446d3832527f6","source":"repo","path":"src/tools/devils-advocate.ts","sha":"9733bee05b7f758ed0635c3189ca18f95608ce3a","start":39,"end":61,"text":"    counterarguments.push('Incremental refactoring may be safer than full rewrite');\n    recommendations.push('Start with proof-of-concept before full migration');\n    recommendations.push('Maintain parallel systems during transition');\n  }\n  \n  if (lowerContext.includes('microservice')) {\n    challenges.push('Microservices add operational complexity');\n    challenges.push('Network latency between services can hurt performance');\n    challenges.push('Distributed debugging is much harder');\n    risks.push('Service orchestration failures');\n    risks.push('Data consistency issues across services');\n    counterarguments.push('Monolith may be simpler and faster for your scale');\n    recommendations.push('Evaluate if you actually need microservices');\n    recommendations.push('Consider modular monolith first');\n  }\n  \n  if (lowerContext.includes('graphql')) {\n    challenges.push('GraphQL has steep learning curve');\n    challenges.push('N+1 query problems can kill performance');\n    challenges.push('Caching is more complex than REST');\n    risks.push('Over-fetching or under-fetching data');\n    risks.push('Security issues with unrestricted queries');\n    counterarguments.push('REST is simpler and well-understood');"}
{"id":"7200efe2f3721eed29045c385ef000c0774a5245","source":"repo","path":"src/tools/devils-advocate.ts","sha":"9733bee05b7f758ed0635c3189ca18f95608ce3a","start":62,"end":84,"text":"    recommendations.push('Use GraphQL only if you need flexible queries');\n    recommendations.push('Implement query complexity limits');\n  }\n  \n  if (lowerContext.includes('serverless') || lowerContext.includes('lambda')) {\n    challenges.push('Cold starts can add 1-5 second latency');\n    challenges.push('Vendor lock-in with cloud provider');\n    challenges.push('Debugging serverless is harder');\n    risks.push('Unpredictable costs at scale');\n    risks.push('Timeout limits may not fit all workloads');\n    counterarguments.push('Traditional servers may be more cost-effective');\n    recommendations.push('Benchmark cold start times for your use case');\n    recommendations.push('Have exit strategy to avoid vendor lock-in');\n  }\n  \n  // Process/Methodology challenges\n  if (lowerContext.includes('agile') || lowerContext.includes('scrum')) {\n    challenges.push('Agile requires discipline - many teams do \"agile theater\"');\n    challenges.push('Daily standups can become time-wasters');\n    challenges.push('Sprint planning overhead may not be worth it');\n    counterarguments.push('Kanban may be simpler and more flexible');\n    recommendations.push('Focus on principles, not ceremonies');\n  }"}
{"id":"9abaffe78e482acbdb32d82ef9207c7dfbb1a14a","source":"repo","path":"src/tools/devils-advocate.ts","sha":"9733bee05b7f758ed0635c3189ca18f95608ce3a","start":85,"end":108,"text":"  \n  if (lowerContext.includes('test') && lowerContext.includes('driven')) {\n    challenges.push('TDD can slow down initial development');\n    challenges.push('Tests can become brittle and hard to maintain');\n    challenges.push('Not all code benefits from TDD');\n    counterarguments.push('Write tests after code for faster iteration');\n    recommendations.push('Use TDD selectively for critical logic');\n  }\n  \n  // Business/Product challenges\n  if (lowerContext.includes('mvp') || lowerContext.includes('minimum viable')) {\n    challenges.push('MVPs often become technical debt');\n    challenges.push('Users may judge product by MVP quality');\n    challenges.push('Cutting corners now means paying later');\n    risks.push('MVP code may need complete rewrite');\n    recommendations.push('Define clear criteria for what comes after MVP');\n    recommendations.push('Don\\'t skip security or data integrity');\n  }\n  \n  if (lowerContext.includes('scale') || lowerContext.includes('growth')) {\n    challenges.push('Premature optimization wastes time');\n    challenges.push('You may never reach the scale you\\'re planning for');\n    challenges.push('Scaling problems are good problems to have');\n    counterarguments.push('Build for current needs, refactor when needed');"}
{"id":"f7fdcfda8c84e05e6f269c223b1eb422bfa218c2","source":"repo","path":"src/tools/devils-advocate.ts","sha":"9733bee05b7f758ed0635c3189ca18f95608ce3a","start":109,"end":135,"text":"    recommendations.push('Measure actual bottlenecks before optimizing');\n  }\n  \n  // Security challenges\n  if (lowerContext.includes('auth') || lowerContext.includes('security')) {\n    challenges.push('Rolling your own auth is risky');\n    challenges.push('Security is hard to get right');\n    risks.push('Data breaches can destroy company');\n    risks.push('Compliance violations (GDPR, HIPAA, etc.)');\n    recommendations.push('Use proven auth libraries/services');\n    recommendations.push('Get security audit before launch');\n  }\n  \n  // Cost challenges\n  if (lowerContext.includes('cloud') || lowerContext.includes('aws') || lowerContext.includes('azure')) {\n    challenges.push('Cloud costs can spiral out of control');\n    challenges.push('Vendor lock-in makes switching expensive');\n    risks.push('Unexpected bills from misconfiguration');\n    recommendations.push('Set up billing alerts immediately');\n    recommendations.push('Review costs monthly');\n  }\n  \n  // Team/People challenges\n  if (lowerContext.includes('hire') || lowerContext.includes('team')) {\n    challenges.push('Hiring takes longer than expected');\n    challenges.push('New hires need 3-6 months to be productive');\n    challenges.push('Team growth adds communication overhead');"}
{"id":"e73f70bb81975b2ba70c0654253066c194b15c9d","source":"repo","path":"src/tools/devils-advocate.ts","sha":"9733bee05b7f758ed0635c3189ca18f95608ce3a","start":136,"end":163,"text":"    risks.push('Bad hires can damage team culture');\n    recommendations.push('Hire slowly, fire quickly');\n    recommendations.push('Invest in onboarding process');\n  }\n  \n  // Generic challenges if nothing specific found\n  if (challenges.length === 0) {\n    challenges.push('Assumptions may not hold in practice');\n    challenges.push('Hidden complexity often emerges during implementation');\n    challenges.push('Stakeholder alignment may be harder than expected');\n    risks.push('Timeline may be too optimistic');\n    risks.push('Budget may be insufficient');\n    counterarguments.push('Simpler alternatives may exist');\n    recommendations.push('Validate assumptions with data');\n    recommendations.push('Build in buffer time for unknowns');\n  }\n  \n  // Add depth-specific challenges\n  if (depth === 'deep') {\n    challenges.push('Second-order effects may create new problems');\n    challenges.push('Opportunity cost - what else could you build instead?');\n    risks.push('Market may change before completion');\n    risks.push('Technology may become obsolete');\n    recommendations.push('Define success metrics upfront');\n    recommendations.push('Plan for iteration and pivots');\n  }\n  \n  const confidence = challenges.length > 3 ? 0.85 : 0.65;"}
{"id":"a9a74053ae627d01ff31047a19204fc569f884d1","source":"repo","path":"src/tools/devils-advocate.ts","sha":"9733bee05b7f758ed0635c3189ca18f95608ce3a","start":164,"end":185,"text":"  \n  const reasoning = `Analyzed context for common pitfalls in: ${\n    lowerContext.includes('migrate') ? 'migrations, ' : ''\n  }${\n    lowerContext.includes('microservice') ? 'microservices, ' : ''\n  }${\n    lowerContext.includes('scale') ? 'scaling, ' : ''\n  }${\n    lowerContext.includes('auth') ? 'security, ' : ''\n  }technology decisions, and team dynamics. Found ${challenges.length} challenges, ${risks.length} risks.`;\n  \n  return {\n    challenges,\n    risks,\n    counterarguments,\n    recommendations,\n    confidence,\n    reasoning\n  };\n}\n\n"}
{"id":"16a100d64a4e31d67cf5a20b15a45459d8964c79","source":"repo","path":"src/tools/first-principles.ts","sha":"48645fa26f165388c03751e42f3d8c52c7d7d209","start":1,"end":38,"text":"/**\n * First Principles Thinking Tool\n * Breaks down complex problems to fundamental truths and builds up from there\n */\n\nexport interface FirstPrinciplesInput {\n  problem: string;\n  domain?: string;\n  depth?: 'quick' | 'deep';\n}\n\nexport interface FirstPrinciplesOutput {\n  fundamentals: string[];\n  assumptions: string[];\n  derivedInsights: string[];\n  alternativeApproaches: string[];\n  confidence: number;\n  reasoning: string;\n}\n\nexport function firstPrinciples(input: FirstPrinciplesInput): FirstPrinciplesOutput {\n  const { problem, domain, depth = 'quick' } = input;\n  \n  const fundamentals: string[] = [];\n  const assumptions: string[] = [];\n  const derivedInsights: string[] = [];\n  const alternativeApproaches: string[] = [];\n  \n  const lowerProblem = problem.toLowerCase();\n  \n  // Authentication/Security domain\n  if (lowerProblem.includes('auth') || lowerProblem.includes('login') || lowerProblem.includes('security')) {\n    fundamentals.push('Authentication = proving identity');\n    fundamentals.push('Authorization = granting permissions');\n    fundamentals.push('Session = maintaining state across requests');\n    \n    assumptions.push('Assuming users have unique identifiers');\n    assumptions.push('Assuming secure communication channel (HTTPS)');"}
{"id":"3a069eb68b26f4e8a01d5002dbdde06dccf4f88d","source":"repo","path":"src/tools/first-principles.ts","sha":"48645fa26f165388c03751e42f3d8c52c7d7d209","start":39,"end":58,"text":"    assumptions.push('Assuming ability to store secrets securely');\n    \n    derivedInsights.push('Identity can be proven by: something you know (password), something you have (token), something you are (biometric)');\n    derivedInsights.push('Sessions can be: stateful (server-side) or stateless (JWT)');\n    derivedInsights.push('Permissions can be: role-based (RBAC) or attribute-based (ABAC)');\n    \n    alternativeApproaches.push('Use OAuth/OIDC instead of custom auth');\n    alternativeApproaches.push('Use magic links instead of passwords');\n    alternativeApproaches.push('Use session tokens instead of JWT');\n    alternativeApproaches.push('Use API keys for service-to-service auth');\n  }\n  \n  // Caching domain\n  if (lowerProblem.includes('cache') || lowerProblem.includes('performance') || lowerProblem.includes('speed')) {\n    fundamentals.push('Cache = fast storage for frequently accessed data');\n    fundamentals.push('Cache hit = data found in cache');\n    fundamentals.push('Cache miss = data not in cache, fetch from source');\n    fundamentals.push('Cache invalidation = removing stale data');\n    \n    assumptions.push('Assuming some data is accessed more frequently than others');"}
{"id":"e9ecaa76a7f21e02038543984c07dac0ade9cdf1","source":"repo","path":"src/tools/first-principles.ts","sha":"48645fa26f165388c03751e42f3d8c52c7d7d209","start":59,"end":79,"text":"    assumptions.push('Assuming data doesn\\'t change too frequently');\n    assumptions.push('Assuming faster storage is available (RAM vs disk)');\n    \n    derivedInsights.push('Cache can be: in-memory (Redis), on-disk (file system), or distributed (CDN)');\n    derivedInsights.push('Invalidation strategies: TTL (time-based), LRU (least recently used), manual');\n    derivedInsights.push('Cache layers: browser ‚Üí CDN ‚Üí application ‚Üí database');\n    \n    alternativeApproaches.push('Use CDN for static assets');\n    alternativeApproaches.push('Use Redis for session data');\n    alternativeApproaches.push('Use in-memory cache for computed results');\n    alternativeApproaches.push('Use database query cache');\n  }\n  \n  // Database/Storage domain\n  if (lowerProblem.includes('database') || lowerProblem.includes('storage') || lowerProblem.includes('data')) {\n    fundamentals.push('Data storage = persisting information for later retrieval');\n    fundamentals.push('CRUD = Create, Read, Update, Delete');\n    fundamentals.push('Consistency = all nodes see same data');\n    fundamentals.push('Durability = data survives failures');\n    \n    assumptions.push('Assuming data needs to persist beyond application lifetime');"}
{"id":"df44b5d208c50991629508ee6de796d120d9c6f7","source":"repo","path":"src/tools/first-principles.ts","sha":"48645fa26f165388c03751e42f3d8c52c7d7d209","start":80,"end":100,"text":"    assumptions.push('Assuming data has structure or relationships');\n    assumptions.push('Assuming concurrent access is needed');\n    \n    derivedInsights.push('Storage types: relational (SQL), document (MongoDB), key-value (Redis), graph (Neo4j)');\n    derivedInsights.push('Trade-offs: consistency vs availability vs partition tolerance (CAP theorem)');\n    derivedInsights.push('Scaling: vertical (bigger machine) vs horizontal (more machines)');\n    \n    alternativeApproaches.push('Use PostgreSQL for structured data with relationships');\n    alternativeApproaches.push('Use MongoDB for flexible schema');\n    alternativeApproaches.push('Use S3 for file storage');\n    alternativeApproaches.push('Use Redis for temporary data');\n  }\n  \n  // API/Communication domain\n  if (lowerProblem.includes('api') || lowerProblem.includes('endpoint') || lowerProblem.includes('communication')) {\n    fundamentals.push('API = interface for programs to communicate');\n    fundamentals.push('Request = asking for data or action');\n    fundamentals.push('Response = returning data or result');\n    fundamentals.push('Protocol = agreed-upon communication rules');\n    \n    assumptions.push('Assuming network connectivity');"}
{"id":"31dec7935e320cadbc8e3f5683eec82fa873178d","source":"repo","path":"src/tools/first-principles.ts","sha":"48645fa26f165388c03751e42f3d8c52c7d7d209","start":101,"end":121,"text":"    assumptions.push('Assuming client and server can understand each other');\n    assumptions.push('Assuming requests can fail and need retry logic');\n    \n    derivedInsights.push('API styles: REST (resource-based), GraphQL (query-based), RPC (function-based), WebSocket (bidirectional)');\n    derivedInsights.push('Data formats: JSON, XML, Protocol Buffers, MessagePack');\n    derivedInsights.push('Error handling: HTTP status codes, error objects, retry strategies');\n    \n    alternativeApproaches.push('Use REST for simple CRUD operations');\n    alternativeApproaches.push('Use GraphQL for flexible client queries');\n    alternativeApproaches.push('Use WebSocket for real-time updates');\n    alternativeApproaches.push('Use gRPC for service-to-service communication');\n  }\n  \n  // Testing domain\n  if (lowerProblem.includes('test') || lowerProblem.includes('quality') || lowerProblem.includes('bug')) {\n    fundamentals.push('Testing = verifying code behaves as expected');\n    fundamentals.push('Unit test = test individual function');\n    fundamentals.push('Integration test = test components together');\n    fundamentals.push('E2E test = test entire user flow');\n    \n    assumptions.push('Assuming code can be tested in isolation');"}
{"id":"cab06ed2182411fa068eb6361a9c84a07379f9b6","source":"repo","path":"src/tools/first-principles.ts","sha":"48645fa26f165388c03751e42f3d8c52c7d7d209","start":122,"end":143,"text":"    assumptions.push('Assuming tests can run automatically');\n    assumptions.push('Assuming tests are faster than manual verification');\n    \n    derivedInsights.push('Test pyramid: many unit tests, some integration tests, few E2E tests');\n    derivedInsights.push('Test coverage measures code exercised, not correctness');\n    derivedInsights.push('Flaky tests are worse than no tests');\n    \n    alternativeApproaches.push('Use Jest for unit tests');\n    alternativeApproaches.push('Use Playwright for E2E tests');\n    alternativeApproaches.push('Use property-based testing for edge cases');\n    alternativeApproaches.push('Use snapshot testing for UI components');\n  }\n  \n  // Deployment/Infrastructure domain\n  if (lowerProblem.includes('deploy') || lowerProblem.includes('infrastructure') || lowerProblem.includes('server')) {\n    fundamentals.push('Deployment = making code available to users');\n    fundamentals.push('Server = computer that runs your code');\n    fundamentals.push('Scaling = handling more users/requests');\n    fundamentals.push('Monitoring = observing system health');\n    \n    assumptions.push('Assuming code runs differently in production than development');\n    assumptions.push('Assuming failures will happen');"}
{"id":"2b1b06fec206db21dbc1ab30d25be873eb719eec","source":"repo","path":"src/tools/first-principles.ts","sha":"48645fa26f165388c03751e42f3d8c52c7d7d209","start":144,"end":168,"text":"    assumptions.push('Assuming need to rollback bad deployments');\n    \n    derivedInsights.push('Deployment strategies: blue-green, canary, rolling, recreate');\n    derivedInsights.push('Infrastructure: VMs, containers, serverless, edge');\n    derivedInsights.push('Observability: logs, metrics, traces');\n    \n    alternativeApproaches.push('Use Vercel for frontend deployments');\n    alternativeApproaches.push('Use Docker for containerization');\n    alternativeApproaches.push('Use Kubernetes for orchestration');\n    alternativeApproaches.push('Use serverless for variable workloads');\n  }\n  \n  // Generic problem breakdown\n  if (fundamentals.length === 0) {\n    fundamentals.push('Break problem into smallest components');\n    fundamentals.push('Identify what is known vs unknown');\n    fundamentals.push('Separate facts from assumptions');\n    \n    assumptions.push('Assuming problem is solvable');\n    assumptions.push('Assuming constraints are real, not imagined');\n    \n    derivedInsights.push('Complex problems are often simple problems combined');\n    derivedInsights.push('Most \"new\" problems have existing solutions');\n    \n    alternativeApproaches.push('Research how others solved similar problems');"}
{"id":"f78574c11b3217fb6c35598ea8b3480e76747246","source":"repo","path":"src/tools/first-principles.ts","sha":"48645fa26f165388c03751e42f3d8c52c7d7d209","start":169,"end":194,"text":"    alternativeApproaches.push('Start with simplest possible solution');\n    alternativeApproaches.push('Question all constraints');\n  }\n  \n  if (depth === 'deep') {\n    fundamentals.push('All software is: input ‚Üí processing ‚Üí output');\n    fundamentals.push('All systems have: components, connections, constraints');\n    derivedInsights.push('Complexity emerges from interactions, not components');\n    derivedInsights.push('Abstractions hide details but add indirection');\n  }\n  \n  const confidence = fundamentals.length >= 3 ? 0.9 : 0.7;\n  \n  const reasoning = `Broke down problem into ${fundamentals.length} fundamental truths, identified ${assumptions.length} assumptions, derived ${derivedInsights.length} insights, and found ${alternativeApproaches.length} alternative approaches.`;\n  \n  return {\n    fundamentals,\n    assumptions,\n    derivedInsights,\n    alternativeApproaches,\n    confidence,\n    reasoning\n  };\n}\n\n"}
{"id":"a9c13da52eda3dfc047c46843e5a430d73378dd6","source":"repo","path":"src/tools/lateral-thinking.ts","sha":"e31beac104b72e0292265bf7847ccb54fa9d5989","start":1,"end":33,"text":"/**\n * Lateral Thinking Tool\n * Generate creative, non-obvious solutions by thinking \"outside the box\"\n */\n\nexport interface LateralThinkingInput {\n  problem: string;\n  context?: string;\n  constraints?: string[];\n}\n\nexport interface LateralThinkingOutput {\n  unconventionalApproaches: Array<{ approach: string; rationale: string; novelty: number }>;\n  analogies: Array<{ domain: string; analogy: string; application: string }>;\n  reversals: string[];\n  randomConnections: string[];\n  provocativeIdeas: string[];\n  confidence: number;\n  reasoning: string;\n}\n\nexport function lateralThinking(input: LateralThinkingInput): LateralThinkingOutput {\n  const { problem, context = '', constraints = [] } = input;\n  const combined = `${problem} ${context}`.toLowerCase();\n  \n  const unconventionalApproaches: Array<{ approach: string; rationale: string; novelty: number }> = [];\n  const analogies: Array<{ domain: string; analogy: string; application: string }> = [];\n  const reversals: string[] = [];\n  const randomConnections: string[] = [];\n  const provocativeIdeas: string[] = [];\n  \n  // Generate unconventional approaches based on problem domain\n  if (combined.includes('performance') || combined.includes('slow')) {"}
{"id":"d1d240ecab0d931c1114a44ff83af31f26a154d6","source":"repo","path":"src/tools/lateral-thinking.ts","sha":"e31beac104b72e0292265bf7847ccb54fa9d5989","start":34,"end":62,"text":"    unconventionalApproaches.push({\n      approach: 'Make it intentionally slower to improve UX',\n      rationale: 'Add progress indicators and animations so users perceive it as responsive even if actual speed is same',\n      novelty: 85\n    });\n    unconventionalApproaches.push({\n      approach: 'Cache the problem, not the solution',\n      rationale: 'Instead of caching results, cache the expensive computation inputs and batch process them',\n      novelty: 70\n    });\n  }\n  \n  if (combined.includes('bug') || combined.includes('error')) {\n    unconventionalApproaches.push({\n      approach: 'Make the bug a feature',\n      rationale: 'Sometimes unexpected behavior reveals a better UX - embrace it instead of fixing it',\n      novelty: 90\n    });\n    unconventionalApproaches.push({\n      approach: 'Let users fix it themselves',\n      rationale: 'Expose the error state to power users with a \"debug mode\" that lets them patch it',\n      novelty: 75\n    });\n  }\n  \n  if (combined.includes('scale') || combined.includes('growth')) {\n    unconventionalApproaches.push({\n      approach: 'Don\\'t scale - limit growth instead',\n      rationale: 'Artificial scarcity can increase value and reduce costs (invite-only, waitlist, etc.)',"}
{"id":"f4badb05d70e4d470e6688b85d696a662f128061","source":"repo","path":"src/tools/lateral-thinking.ts","sha":"e31beac104b72e0292265bf7847ccb54fa9d5989","start":63,"end":98,"text":"      novelty: 95\n    });\n    unconventionalApproaches.push({\n      approach: 'Scale down, not up',\n      rationale: 'Reduce features to core value prop, serve niche better than trying to serve everyone',\n      novelty: 80\n    });\n  }\n  \n  if (combined.includes('database') || combined.includes('data')) {\n    unconventionalApproaches.push({\n      approach: 'Delete the database',\n      rationale: 'Use event sourcing or append-only logs instead of traditional CRUD database',\n      novelty: 85\n    });\n    unconventionalApproaches.push({\n      approach: 'Store data in the URL',\n      rationale: 'For small datasets, encode state in URL/localStorage and skip backend entirely',\n      novelty: 70\n    });\n  }\n  \n  if (combined.includes('auth') || combined.includes('login')) {\n    unconventionalApproaches.push({\n      approach: 'No passwords, no auth',\n      rationale: 'Use magic links, device fingerprinting, or make app fully public',\n      novelty: 80\n    });\n    unconventionalApproaches.push({\n      approach: 'Auth via proof-of-work',\n      rationale: 'Users solve a computational puzzle instead of password (prevents bots, no storage)',\n      novelty: 95\n    });\n  }\n  \n  // Generate analogies from different domains"}
{"id":"fdd4752e631edf435420931b6c063bd7292aae64","source":"repo","path":"src/tools/lateral-thinking.ts","sha":"e31beac104b72e0292265bf7847ccb54fa9d5989","start":99,"end":130,"text":"  analogies.push({\n    domain: 'Biology',\n    analogy: 'Immune system - learns from attacks and builds defenses',\n    application: 'Build self-healing systems that learn from failures and auto-patch'\n  });\n  \n  analogies.push({\n    domain: 'Architecture',\n    analogy: 'Load-bearing walls vs decorative - some parts are critical, others aren\\'t',\n    application: 'Identify which services are load-bearing and which can fail gracefully'\n  });\n  \n  analogies.push({\n    domain: 'Cooking',\n    analogy: 'Mise en place - prepare all ingredients before cooking',\n    application: 'Pre-compute and cache all dependencies before executing main logic'\n  });\n  \n  analogies.push({\n    domain: 'Traffic Flow',\n    analogy: 'Roundabouts vs traffic lights - continuous flow vs stop-and-go',\n    application: 'Use async/streaming instead of request-response for better throughput'\n  });\n  \n  analogies.push({\n    domain: 'Gardening',\n    analogy: 'Pruning encourages growth - removing parts makes the whole stronger',\n    application: 'Delete code/features to improve maintainability and focus'\n  });\n  \n  // Generate reversals (opposite of conventional wisdom)\n  reversals.push('Instead of fixing the problem, fix the expectation');"}
{"id":"bf2ce82c4148c9155807ff685e5a2d4f4d3d5b7c","source":"repo","path":"src/tools/lateral-thinking.ts","sha":"e31beac104b72e0292265bf7847ccb54fa9d5989","start":131,"end":145,"text":"  reversals.push('Instead of adding features, remove them');\n  reversals.push('Instead of making it faster, make it more transparent');\n  reversals.push('Instead of preventing errors, embrace and expose them');\n  reversals.push('Instead of automating, add manual human steps');\n  reversals.push('Instead of optimizing for speed, optimize for debuggability');\n  reversals.push('Instead of scaling horizontally, scale vertically to the limit');\n  reversals.push('Instead of microservices, go back to monolith');\n  \n  // Generate random connections (force connections between unrelated concepts)\n  randomConnections.push('What if your API was a video game? (gamification, levels, achievements)');\n  randomConnections.push('What if your database was a social network? (data relationships as friendships)');\n  randomConnections.push('What if your code was music? (rhythm, harmony, composition patterns)');\n  randomConnections.push('What if your deployment was cooking? (recipes, ingredients, timing)');\n  randomConnections.push('What if your tests were a detective story? (clues, suspects, solving mysteries)');\n  randomConnections.push('What if your UI was a conversation? (natural language, context, memory)');"}
{"id":"92d75b8634b584fa1c2cb5e412b874518424e0bd","source":"repo","path":"src/tools/lateral-thinking.ts","sha":"e31beac104b72e0292265bf7847ccb54fa9d5989","start":146,"end":170,"text":"  \n  // Generate provocative ideas (intentionally extreme to spark creativity)\n  provocativeIdeas.push('Delete all tests and rely on production monitoring');\n  provocativeIdeas.push('Rewrite everything in a language nobody on the team knows');\n  provocativeIdeas.push('Make the entire codebase a single file');\n  provocativeIdeas.push('Charge users per API call to reduce usage');\n  provocativeIdeas.push('Open source the entire product and monetize support');\n  provocativeIdeas.push('Build the opposite of what users are asking for');\n  provocativeIdeas.push('Make the app only work on Tuesdays');\n  provocativeIdeas.push('Replace all documentation with interpretive dance videos');\n  \n  const confidence = 60; // Lateral thinking is inherently uncertain\n  \n  return {\n    unconventionalApproaches,\n    analogies,\n    reversals,\n    randomConnections,\n    provocativeIdeas,\n    confidence,\n    reasoning: `Generated ${unconventionalApproaches.length} unconventional approaches, ${analogies.length} cross-domain analogies, ${reversals.length} reversals, and ${provocativeIdeas.length} provocative ideas to stimulate creative thinking.`\n  };\n}\n\n"}
{"id":"769cd4089e82cb3b0ce9ba71a7c9e88c0bfe57ae","source":"repo","path":"src/tools/mind-mapping.ts","sha":"f3a0c15b007f6c70a3fcd663e91daca56e7b994d","start":1,"end":46,"text":"/**\n * Mind Mapping Tool\n * Visual organization of ideas and concepts\n */\n\nexport interface MindMappingInput {\n  centralIdea: string;\n  context?: string;\n}\n\nexport interface MindMappingOutput {\n  centralNode: { id: string; label: string };\n  branches: Array<{\n    id: string;\n    label: string;\n    parentId: string;\n    level: number;\n    children: Array<{ id: string; label: string }>;\n  }>;\n  connections: Array<{ from: string; to: string; relationship: string }>;\n  mermaidDiagram: string;\n  confidence: number;\n  reasoning: string;\n}\n\nexport function mindMapping(input: MindMappingInput): MindMappingOutput {\n  const { centralIdea, context = '' } = input;\n  const combined = `${centralIdea} ${context}`.toLowerCase();\n  \n  const centralNode = { id: 'central', label: centralIdea };\n  const branches: Array<{\n    id: string;\n    label: string;\n    parentId: string;\n    level: number;\n    children: Array<{ id: string; label: string }>;\n  }> = [];\n  \n  const connections: Array<{ from: string; to: string; relationship: string }> = [];\n  \n  let nodeId = 1;\n  \n  // Generate branches based on central idea\n  if (combined.includes('api') || combined.includes('service')) {\n    // Main branches\n    branches.push({"}
{"id":"c6695fdd46ba9c2d902205a1fa71499ee500aa53","source":"repo","path":"src/tools/mind-mapping.ts","sha":"f3a0c15b007f6c70a3fcd663e91daca56e7b994d","start":47,"end":86,"text":"      id: `node${nodeId++}`,\n      label: 'Design',\n      parentId: 'central',\n      level: 1,\n      children: [\n        { id: `node${nodeId++}`, label: 'REST vs GraphQL' },\n        { id: `node${nodeId++}`, label: 'Versioning Strategy' },\n        { id: `node${nodeId++}`, label: 'Authentication' },\n        { id: `node${nodeId++}`, label: 'Rate Limiting' }\n      ]\n    });\n    \n    branches.push({\n      id: `node${nodeId++}`,\n      label: 'Implementation',\n      parentId: 'central',\n      level: 1,\n      children: [\n        { id: `node${nodeId++}`, label: 'Framework Choice' },\n        { id: `node${nodeId++}`, label: 'Database Layer' },\n        { id: `node${nodeId++}`, label: 'Caching Strategy' },\n        { id: `node${nodeId++}`, label: 'Error Handling' }\n      ]\n    });\n    \n    branches.push({\n      id: `node${nodeId++}`,\n      label: 'Testing',\n      parentId: 'central',\n      level: 1,\n      children: [\n        { id: `node${nodeId++}`, label: 'Unit Tests' },\n        { id: `node${nodeId++}`, label: 'Integration Tests' },\n        { id: `node${nodeId++}`, label: 'Load Testing' },\n        { id: `node${nodeId++}`, label: 'Security Testing' }\n      ]\n    });\n    \n    branches.push({\n      id: `node${nodeId++}`,"}
{"id":"899954842c37ec630d8ae66cfe413bc2b351e785","source":"repo","path":"src/tools/mind-mapping.ts","sha":"f3a0c15b007f6c70a3fcd663e91daca56e7b994d","start":87,"end":124,"text":"      label: 'Deployment',\n      parentId: 'central',\n      level: 1,\n      children: [\n        { id: `node${nodeId++}`, label: 'CI/CD Pipeline' },\n        { id: `node${nodeId++}`, label: 'Monitoring' },\n        { id: `node${nodeId++}`, label: 'Logging' },\n        { id: `node${nodeId++}`, label: 'Scaling Strategy' }\n      ]\n    });\n  } else if (combined.includes('product') || combined.includes('feature')) {\n    branches.push({\n      id: `node${nodeId++}`,\n      label: 'User Needs',\n      parentId: 'central',\n      level: 1,\n      children: [\n        { id: `node${nodeId++}`, label: 'Pain Points' },\n        { id: `node${nodeId++}`, label: 'Use Cases' },\n        { id: `node${nodeId++}`, label: 'User Personas' },\n        { id: `node${nodeId++}`, label: 'Jobs to be Done' }\n      ]\n    });\n    \n    branches.push({\n      id: `node${nodeId++}`,\n      label: 'Solution',\n      parentId: 'central',\n      level: 1,\n      children: [\n        { id: `node${nodeId++}`, label: 'Core Features' },\n        { id: `node${nodeId++}`, label: 'Nice-to-Haves' },\n        { id: `node${nodeId++}`, label: 'MVP Scope' },\n        { id: `node${nodeId++}`, label: 'Future Roadmap' }\n      ]\n    });\n    \n    branches.push({"}
{"id":"dcab075c1355c4d594bec4dac51e1c9614a8a36e","source":"repo","path":"src/tools/mind-mapping.ts","sha":"f3a0c15b007f6c70a3fcd663e91daca56e7b994d","start":125,"end":168,"text":"      id: `node${nodeId++}`,\n      label: 'Market',\n      parentId: 'central',\n      level: 1,\n      children: [\n        { id: `node${nodeId++}`, label: 'Target Audience' },\n        { id: `node${nodeId++}`, label: 'Competitors' },\n        { id: `node${nodeId++}`, label: 'Differentiation' },\n        { id: `node${nodeId++}`, label: 'Pricing' }\n      ]\n    });\n    \n    branches.push({\n      id: `node${nodeId++}`,\n      label: 'Execution',\n      parentId: 'central',\n      level: 1,\n      children: [\n        { id: `node${nodeId++}`, label: 'Timeline' },\n        { id: `node${nodeId++}`, label: 'Resources' },\n        { id: `node${nodeId++}`, label: 'Risks' },\n        { id: `node${nodeId++}`, label: 'Success Metrics' }\n      ]\n    });\n  } else {\n    // Generic branches\n    branches.push({\n      id: `node${nodeId++}`,\n      label: 'What',\n      parentId: 'central',\n      level: 1,\n      children: [\n        { id: `node${nodeId++}`, label: 'Definition' },\n        { id: `node${nodeId++}`, label: 'Components' },\n        { id: `node${nodeId++}`, label: 'Scope' }\n      ]\n    });\n    \n    branches.push({\n      id: `node${nodeId++}`,\n      label: 'Why',\n      parentId: 'central',\n      level: 1,\n      children: ["}
{"id":"3b336e658688f3d81202dbfec868a1082098f4aa","source":"repo","path":"src/tools/mind-mapping.ts","sha":"f3a0c15b007f6c70a3fcd663e91daca56e7b994d","start":169,"end":218,"text":"        { id: `node${nodeId++}`, label: 'Purpose' },\n        { id: `node${nodeId++}`, label: 'Benefits' },\n        { id: `node${nodeId++}`, label: 'Value Proposition' }\n      ]\n    });\n    \n    branches.push({\n      id: `node${nodeId++}`,\n      label: 'How',\n      parentId: 'central',\n      level: 1,\n      children: [\n        { id: `node${nodeId++}`, label: 'Approach' },\n        { id: `node${nodeId++}`, label: 'Steps' },\n        { id: `node${nodeId++}`, label: 'Tools' }\n      ]\n    });\n    \n    branches.push({\n      id: `node${nodeId++}`,\n      label: 'When',\n      parentId: 'central',\n      level: 1,\n      children: [\n        { id: `node${nodeId++}`, label: 'Timeline' },\n        { id: `node${nodeId++}`, label: 'Milestones' },\n        { id: `node${nodeId++}`, label: 'Dependencies' }\n      ]\n    });\n  }\n  \n  // Add cross-connections\n  if (branches.length >= 2) {\n    connections.push({\n      from: branches[0].id,\n      to: branches[1].id,\n      relationship: 'influences'\n    });\n  }\n  \n  if (branches.length >= 4) {\n    connections.push({\n      from: branches[2].id,\n      to: branches[3].id,\n      relationship: 'depends on'\n    });\n  }\n  \n  // Generate Mermaid diagram\n  let mermaid = 'graph TD\\n';"}
{"id":"7e5f317b43a0c7b8663b9e8d48b58d7664e6720e","source":"repo","path":"src/tools/mind-mapping.ts","sha":"f3a0c15b007f6c70a3fcd663e91daca56e7b994d","start":219,"end":244,"text":"  mermaid += `  ${centralNode.id}[\"${centralNode.label}\"]\\n`;\n  \n  branches.forEach(branch => {\n    mermaid += `  ${centralNode.id} --> ${branch.id}[\"${branch.label}\"]\\n`;\n    branch.children.forEach(child => {\n      mermaid += `  ${branch.id} --> ${child.id}[\"${child.label}\"]\\n`;\n    });\n  });\n  \n  connections.forEach(conn => {\n    mermaid += `  ${conn.from} -.->|${conn.relationship}| ${conn.to}\\n`;\n  });\n  \n  const confidence = 70;\n  \n  return {\n    centralNode,\n    branches,\n    connections,\n    mermaidDiagram: mermaid,\n    confidence,\n    reasoning: `Created mind map with ${branches.length} main branches and ${branches.reduce((sum, b) => sum + b.children.length, 0)} sub-nodes, plus ${connections.length} cross-connections.`\n  };\n}\n\n"}
{"id":"cedf58010d001a2da877c67f8fc473ec2fbae22f","source":"repo","path":"src/tools/parallel-thinking.ts","sha":"e7186c90f13e47337ae5cb0e0f7c184006a79d23","start":1,"end":49,"text":"/**\n * Parallel Thinking Tool\n * Explore multiple solution paths simultaneously\n * Create branches to evaluate different approaches in parallel\n */\n\ninterface ParallelBranch {\n  branchId: string;\n  description: string;\n  thoughts: Array<{\n    thoughtNumber: number;\n    thought: string;\n    nextThoughtNeeded: boolean;\n  }>;\n  conclusion?: string;\n}\n\n// Global state for parallel branches (persists across calls)\nconst parallelBranches: Map<string, ParallelBranch> = new Map();\n\nexport async function parallelThinking(args: any): Promise<any> {\n  const branchId = args.branchId;\n  \n  if (!parallelBranches.has(branchId)) {\n    parallelBranches.set(branchId, {\n      branchId,\n      description: args.description,\n      thoughts: [],\n    });\n  }\n\n  const branch = parallelBranches.get(branchId)!;\n  \n  branch.thoughts.push({\n    thoughtNumber: args.thoughtNumber,\n    thought: args.thought,\n    nextThoughtNeeded: args.nextThoughtNeeded,\n  });\n\n  if (args.conclusion) {\n    branch.conclusion = args.conclusion;\n  }\n\n  const response = {\n    branchId,\n    thoughtsInBranch: branch.thoughts.length,\n    totalBranches: parallelBranches.size,\n    branchComplete: !!args.conclusion,\n    allBranches: Array.from(parallelBranches.entries()).map(([id, b]) => ({"}
{"id":"5775c9fb6b5cc12a9cbd2542e6a300e580e3f78a","source":"repo","path":"src/tools/parallel-thinking.ts","sha":"e7186c90f13e47337ae5cb0e0f7c184006a79d23","start":50,"end":69,"text":"      id,\n      description: b.description,\n      thoughtCount: b.thoughts.length,\n      complete: !!b.conclusion,\n      conclusion: b.conclusion,\n    })),\n    summary: `Branch \"${branchId}\" has ${branch.thoughts.length} thoughts. ${args.conclusion ? 'Branch complete.' : 'Continue exploring this path.'}`,\n  };\n\n  return {\n    content: [\n      {\n        type: 'text',\n        text: JSON.stringify(response, null, 2),\n      },\n    ],\n  };\n}\n\n"}
{"id":"f8a931d2252c466a72451a075cf36ed820d23079","source":"repo","path":"src/tools/premortem.ts","sha":"cce403cf7360cdcc237260b4ebc22cb258145385","start":1,"end":38,"text":"/**\n * Premortem Analysis Tool\n * Imagines project has failed and works backward to identify risks\n */\n\nexport interface PremortemInput {\n  project: string;\n  timeline?: string;\n  stakeholders?: string[];\n}\n\nexport interface PremortemOutput {\n  failureScenarios: Array<{ scenario: string; likelihood: string; impact: string }>;\n  earlyWarningSignals: string[];\n  mitigationStrategies: string[];\n  contingencyPlans: string[];\n  confidence: number;\n  reasoning: string;\n}\n\nexport function premortemAnalysis(input: PremortemInput): PremortemOutput {\n  const { project, timeline = 'unknown', stakeholders = [] } = input;\n  \n  const failureScenarios: Array<{ scenario: string; likelihood: string; impact: string }> = [];\n  const earlyWarningSignals: string[] = [];\n  const mitigationStrategies: string[] = [];\n  const contingencyPlans: string[] = [];\n  \n  const lowerProject = project.toLowerCase();\n  \n  // Technical failure scenarios\n  if (lowerProject.includes('migrate') || lowerProject.includes('rewrite')) {\n    failureScenarios.push({\n      scenario: 'Migration took 3x longer than estimated, business lost patience',\n      likelihood: 'HIGH',\n      impact: 'CRITICAL'\n    });\n    failureScenarios.push({"}
{"id":"21b5afe4d25986b5791f74ac073b527fe7891ca1","source":"repo","path":"src/tools/premortem.ts","sha":"cce403cf7360cdcc237260b4ebc22cb258145385","start":39,"end":67,"text":"      scenario: 'Data corruption during migration caused data loss',\n      likelihood: 'MEDIUM',\n      impact: 'CRITICAL'\n    });\n    failureScenarios.push({\n      scenario: 'New system performance worse than old system',\n      likelihood: 'MEDIUM',\n      impact: 'HIGH'\n    });\n    \n    earlyWarningSignals.push('Migration scripts failing in testing');\n    earlyWarningSignals.push('Performance benchmarks not meeting targets');\n    earlyWarningSignals.push('Team velocity slowing down');\n    \n    mitigationStrategies.push('Run migration in parallel with old system');\n    mitigationStrategies.push('Implement comprehensive data validation');\n    mitigationStrategies.push('Set up performance monitoring from day 1');\n    mitigationStrategies.push('Create detailed rollback plan');\n    \n    contingencyPlans.push('Keep old system running as fallback');\n    contingencyPlans.push('Have data backup and restore procedures');\n    contingencyPlans.push('Plan for gradual migration, not big bang');\n  }\n  \n  if (lowerProject.includes('launch') || lowerProject.includes('release')) {\n    failureScenarios.push({\n      scenario: 'Launch day: servers crashed under load',\n      likelihood: 'MEDIUM',\n      impact: 'CRITICAL'"}
{"id":"5eefba7e8f23106c45f93bb895a3e1f493e03810","source":"repo","path":"src/tools/premortem.ts","sha":"cce403cf7360cdcc237260b4ebc22cb258145385","start":68,"end":98,"text":"    });\n    failureScenarios.push({\n      scenario: 'Critical bug discovered in production',\n      likelihood: 'HIGH',\n      impact: 'HIGH'\n    });\n    failureScenarios.push({\n      scenario: 'Users found product confusing, high churn rate',\n      likelihood: 'MEDIUM',\n      impact: 'HIGH'\n    });\n    \n    earlyWarningSignals.push('Load testing showing performance issues');\n    earlyWarningSignals.push('Beta users reporting confusion');\n    earlyWarningSignals.push('High error rates in staging');\n    \n    mitigationStrategies.push('Conduct load testing before launch');\n    mitigationStrategies.push('Run beta program with real users');\n    mitigationStrategies.push('Implement feature flags for gradual rollout');\n    mitigationStrategies.push('Have customer support ready');\n    \n    contingencyPlans.push('Ability to roll back deployment quickly');\n    contingencyPlans.push('Scale infrastructure automatically');\n    contingencyPlans.push('Have hotfix process ready');\n  }\n  \n  if (lowerProject.includes('api') || lowerProject.includes('integration')) {\n    failureScenarios.push({\n      scenario: 'Third-party API changed without notice, breaking integration',\n      likelihood: 'MEDIUM',\n      impact: 'HIGH'"}
{"id":"ca613c5b7ff021f0562e44a3b65a1d83d1572701","source":"repo","path":"src/tools/premortem.ts","sha":"cce403cf7360cdcc237260b4ebc22cb258145385","start":99,"end":130,"text":"    });\n    failureScenarios.push({\n      scenario: 'API rate limits hit, causing service degradation',\n      likelihood: 'HIGH',\n      impact: 'MEDIUM'\n    });\n    failureScenarios.push({\n      scenario: 'Authentication tokens leaked, security breach',\n      likelihood: 'LOW',\n      impact: 'CRITICAL'\n    });\n    \n    earlyWarningSignals.push('Increasing API error rates');\n    earlyWarningSignals.push('Approaching rate limits');\n    earlyWarningSignals.push('Third-party API deprecation notices');\n    \n    mitigationStrategies.push('Implement retry logic with exponential backoff');\n    mitigationStrategies.push('Monitor API usage and set alerts');\n    mitigationStrategies.push('Use API versioning');\n    mitigationStrategies.push('Rotate credentials regularly');\n    \n    contingencyPlans.push('Have fallback to alternative API provider');\n    contingencyPlans.push('Cache API responses when possible');\n    contingencyPlans.push('Implement circuit breaker pattern');\n  }\n  \n  if (lowerProject.includes('scale') || lowerProject.includes('growth')) {\n    failureScenarios.push({\n      scenario: 'Database became bottleneck, site went down',\n      likelihood: 'HIGH',\n      impact: 'CRITICAL'\n    });"}
{"id":"77dda1499eafaaf3f9e7b36ccf7fd9b30c70bd34","source":"repo","path":"src/tools/premortem.ts","sha":"cce403cf7360cdcc237260b4ebc22cb258145385","start":131,"end":162,"text":"    failureScenarios.push({\n      scenario: 'Costs spiraled out of control with growth',\n      likelihood: 'MEDIUM',\n      impact: 'HIGH'\n    });\n    failureScenarios.push({\n      scenario: 'Team couldn\\'t keep up with support requests',\n      likelihood: 'HIGH',\n      impact: 'MEDIUM'\n    });\n    \n    earlyWarningSignals.push('Database query times increasing');\n    earlyWarningSignals.push('Infrastructure costs growing faster than revenue');\n    earlyWarningSignals.push('Support ticket backlog growing');\n    \n    mitigationStrategies.push('Implement database read replicas');\n    mitigationStrategies.push('Set up cost monitoring and alerts');\n    mitigationStrategies.push('Build self-service support tools');\n    mitigationStrategies.push('Plan capacity ahead of growth');\n    \n    contingencyPlans.push('Have database scaling plan ready');\n    contingencyPlans.push('Implement rate limiting');\n    contingencyPlans.push('Hire support team proactively');\n  }\n  \n  if (lowerProject.includes('security') || lowerProject.includes('auth')) {\n    failureScenarios.push({\n      scenario: 'Security breach exposed user data',\n      likelihood: 'MEDIUM',\n      impact: 'CRITICAL'\n    });\n    failureScenarios.push({"}
{"id":"0c8021e51cddb6771dc3308d22b4d8d3d0d52dcb","source":"repo","path":"src/tools/premortem.ts","sha":"cce403cf7360cdcc237260b4ebc22cb258145385","start":163,"end":199,"text":"      scenario: 'Compliance audit failed, fines imposed',\n      likelihood: 'LOW',\n      impact: 'CRITICAL'\n    });\n    \n    earlyWarningSignals.push('Security scan findings not addressed');\n    earlyWarningSignals.push('Unusual login patterns');\n    earlyWarningSignals.push('Compliance requirements not documented');\n    \n    mitigationStrategies.push('Conduct security audit before launch');\n    mitigationStrategies.push('Implement security monitoring');\n    mitigationStrategies.push('Follow OWASP guidelines');\n    mitigationStrategies.push('Encrypt sensitive data');\n    \n    contingencyPlans.push('Have incident response plan');\n    contingencyPlans.push('Maintain audit logs');\n    contingencyPlans.push('Have legal counsel on retainer');\n  }\n  \n  // Team/Process failure scenarios\n  failureScenarios.push({\n    scenario: 'Key team member left mid-project',\n    likelihood: 'MEDIUM',\n    impact: 'HIGH'\n  });\n  failureScenarios.push({\n    scenario: 'Scope creep doubled timeline',\n    likelihood: 'HIGH',\n    impact: 'MEDIUM'\n  });\n  failureScenarios.push({\n    scenario: 'Stakeholder changed requirements late',\n    likelihood: 'HIGH',\n    impact: 'MEDIUM'\n  });\n  \n  earlyWarningSignals.push('Team morale declining');"}
{"id":"bd413bc0a9e9f04b81760b59f40544c5e795ea10","source":"repo","path":"src/tools/premortem.ts","sha":"cce403cf7360cdcc237260b4ebc22cb258145385","start":200,"end":231,"text":"  earlyWarningSignals.push('Frequent requirement changes');\n  earlyWarningSignals.push('Missed milestones');\n  \n  mitigationStrategies.push('Document knowledge, avoid silos');\n  mitigationStrategies.push('Define clear scope and change process');\n  mitigationStrategies.push('Regular stakeholder check-ins');\n  mitigationStrategies.push('Buffer time in estimates');\n  \n  contingencyPlans.push('Cross-train team members');\n  contingencyPlans.push('Have scope prioritization framework');\n  contingencyPlans.push('Maintain project documentation');\n  \n  // Generic failures\n  if (failureScenarios.length < 3) {\n    failureScenarios.push({\n      scenario: 'Project ran out of budget before completion',\n      likelihood: 'MEDIUM',\n      impact: 'HIGH'\n    });\n    failureScenarios.push({\n      scenario: 'Technical debt made changes too slow',\n      likelihood: 'HIGH',\n      impact: 'MEDIUM'\n    });\n    \n    earlyWarningSignals.push('Burn rate exceeding plan');\n    earlyWarningSignals.push('Code quality metrics declining');\n    \n    mitigationStrategies.push('Track budget weekly');\n    mitigationStrategies.push('Allocate time for refactoring');\n    \n    contingencyPlans.push('Have funding contingency');"}
{"id":"372495cc136520afa41a7b9cad3e62481989e1e3","source":"repo","path":"src/tools/premortem.ts","sha":"cce403cf7360cdcc237260b4ebc22cb258145385","start":232,"end":249,"text":"    contingencyPlans.push('Plan technical debt paydown sprints');\n  }\n  \n  const confidence = failureScenarios.length >= 5 ? 0.85 : 0.7;\n  \n  const reasoning = `Imagined project failure and identified ${failureScenarios.length} failure scenarios, ${earlyWarningSignals.length} early warning signals, ${mitigationStrategies.length} mitigation strategies, and ${contingencyPlans.length} contingency plans.`;\n  \n  return {\n    failureScenarios,\n    earlyWarningSignals,\n    mitigationStrategies,\n    contingencyPlans,\n    confidence,\n    reasoning\n  };\n}\n\n"}
{"id":"297cc46dc89011ff9d1e4cfb509652f3e31e21b9","source":"repo","path":"src/tools/red-team.ts","sha":"1b894ae4e34fd555e50013b62691873d7edc52c5","start":1,"end":33,"text":"/**\n * Red Team Thinking Tool\n * Attack the plan/design to find vulnerabilities and weaknesses\n */\n\nexport interface RedTeamInput {\n  plan: string;\n  context?: string;\n  focus?: 'security' | 'reliability' | 'performance' | 'all';\n}\n\nexport interface RedTeamOutput {\n  attackVectors: Array<{ vector: string; severity: 'critical' | 'high' | 'medium' | 'low'; impact: string }>;\n  exploits: Array<{ exploit: string; howTo: string; mitigation: string }>;\n  edgeCases: string[];\n  stressTests: Array<{ scenario: string; expectedFailure: string }>;\n  recommendations: string[];\n  confidence: number;\n  reasoning: string;\n}\n\nexport function redTeam(input: RedTeamInput): RedTeamOutput {\n  const { plan, context = '', focus = 'all' } = input;\n  const combined = `${plan} ${context}`.toLowerCase();\n  \n  const attackVectors: Array<{ vector: string; severity: 'critical' | 'high' | 'medium' | 'low'; impact: string }> = [];\n  const exploits: Array<{ exploit: string; howTo: string; mitigation: string }> = [];\n  const edgeCases: string[] = [];\n  const stressTests: Array<{ scenario: string; expectedFailure: string }> = [];\n  const recommendations: string[] = [];\n  \n  // Security attack vectors\n  if (focus === 'security' || focus === 'all') {"}
{"id":"ef762acf969fa3a9f285e3f8e57357731512324e","source":"repo","path":"src/tools/red-team.ts","sha":"1b894ae4e34fd555e50013b62691873d7edc52c5","start":34,"end":64,"text":"    if (combined.includes('api') || combined.includes('endpoint')) {\n      attackVectors.push({\n        vector: 'API Injection Attacks',\n        severity: 'critical',\n        impact: 'SQL injection, NoSQL injection, command injection could compromise entire database'\n      });\n      \n      exploits.push({\n        exploit: 'Mass Assignment Vulnerability',\n        howTo: 'Send extra fields in API request to modify unintended properties (e.g., isAdmin: true)',\n        mitigation: 'Use explicit allow-lists for input fields, never trust client input'\n      });\n      \n      attackVectors.push({\n        vector: 'Rate Limiting Bypass',\n        severity: 'high',\n        impact: 'Attacker could DDoS the API or scrape all data'\n      });\n    }\n    \n    if (combined.includes('auth') || combined.includes('login') || combined.includes('token')) {\n      attackVectors.push({\n        vector: 'Authentication Bypass',\n        severity: 'critical',\n        impact: 'Attacker gains unauthorized access to user accounts'\n      });\n      \n      exploits.push({\n        exploit: 'JWT Secret Brute Force',\n        howTo: 'If JWT secret is weak, attacker can forge tokens and impersonate any user',\n        mitigation: 'Use strong secrets (256+ bits), rotate regularly, use asymmetric signing'"}
{"id":"5d5917f911a3ee68a964cbfb4bfc470ee00fe4c6","source":"repo","path":"src/tools/red-team.ts","sha":"1b894ae4e34fd555e50013b62691873d7edc52c5","start":65,"end":99,"text":"      });\n      \n      exploits.push({\n        exploit: 'Session Fixation',\n        howTo: 'Attacker sets victim\\'s session ID, then hijacks session after victim logs in',\n        mitigation: 'Regenerate session ID on login, use secure cookies with SameSite'\n      });\n    }\n    \n    if (combined.includes('upload') || combined.includes('file')) {\n      attackVectors.push({\n        vector: 'Malicious File Upload',\n        severity: 'critical',\n        impact: 'Attacker uploads executable code (shell, malware) and executes it on server'\n      });\n      \n      exploits.push({\n        exploit: 'Path Traversal via Filename',\n        howTo: 'Upload file named \"../../etc/passwd\" to overwrite system files',\n        mitigation: 'Sanitize filenames, store uploads outside webroot, validate file types'\n      });\n    }\n    \n    if (combined.includes('cors') || combined.includes('cross-origin')) {\n      attackVectors.push({\n        vector: 'CORS Misconfiguration',\n        severity: 'high',\n        impact: 'Attacker site can make authenticated requests on behalf of victim'\n      });\n    }\n  }\n  \n  // Reliability attack vectors\n  if (focus === 'reliability' || focus === 'all') {\n    if (combined.includes('database') || combined.includes('db')) {"}
{"id":"babbb52ba91faa86a70cbbe8a8d8034759837462","source":"repo","path":"src/tools/red-team.ts","sha":"1b894ae4e34fd555e50013b62691873d7edc52c5","start":100,"end":133,"text":"      attackVectors.push({\n        vector: 'Database Connection Pool Exhaustion',\n        severity: 'high',\n        impact: 'All connections consumed, new requests fail, service goes down'\n      });\n      \n      stressTests.push({\n        scenario: 'Simulate 10,000 concurrent slow queries',\n        expectedFailure: 'Connection pool exhausted, requests timeout, cascading failures'\n      });\n    }\n    \n    if (combined.includes('cache') || combined.includes('redis')) {\n      attackVectors.push({\n        vector: 'Cache Stampede',\n        severity: 'high',\n        impact: 'Cache expires, all requests hit database simultaneously, database crashes'\n      });\n      \n      stressTests.push({\n        scenario: 'Invalidate hot cache key during peak traffic',\n        expectedFailure: 'Database overwhelmed with identical queries, response times spike'\n      });\n    }\n    \n    if (combined.includes('queue') || combined.includes('job')) {\n      attackVectors.push({\n        vector: 'Queue Poisoning',\n        severity: 'medium',\n        impact: 'Malformed job crashes worker, blocks queue, prevents all jobs from processing'\n      });\n    }\n    \n    if (combined.includes('microservice') || combined.includes('distributed')) {"}
{"id":"77f5bea5aa6cefecd988e1459e0432e06501dfac","source":"repo","path":"src/tools/red-team.ts","sha":"1b894ae4e34fd555e50013b62691873d7edc52c5","start":134,"end":166,"text":"      attackVectors.push({\n        vector: 'Cascading Failures',\n        severity: 'critical',\n        impact: 'One service fails, causes retry storms, brings down entire system'\n      });\n      \n      stressTests.push({\n        scenario: 'Kill one critical service during peak load',\n        expectedFailure: 'Dependent services retry aggressively, exhaust resources, all services fail'\n      });\n    }\n  }\n  \n  // Performance attack vectors\n  if (focus === 'performance' || focus === 'all') {\n    if (combined.includes('search') || combined.includes('query')) {\n      attackVectors.push({\n        vector: 'Expensive Query Attack',\n        severity: 'high',\n        impact: 'Attacker crafts queries that consume excessive CPU/memory, slows down service'\n      });\n      \n      exploits.push({\n        exploit: 'Regex DoS (ReDoS)',\n        howTo: 'Send input that causes catastrophic backtracking in regex (e.g., (a+)+b)',\n        mitigation: 'Use regex timeout, validate input length, avoid nested quantifiers'\n      });\n    }\n    \n    if (combined.includes('pagination') || combined.includes('offset')) {\n      attackVectors.push({\n        vector: 'Deep Pagination Attack',\n        severity: 'medium',"}
{"id":"b9956c57e3785830ab029da2436f474376eaa45c","source":"repo","path":"src/tools/red-team.ts","sha":"1b894ae4e34fd555e50013b62691873d7edc52c5","start":167,"end":190,"text":"        impact: 'Request page 1,000,000 to force expensive OFFSET query'\n      });\n    }\n  }\n  \n  // Edge cases\n  edgeCases.push('What happens when input is empty string?');\n  edgeCases.push('What happens when input is null or undefined?');\n  edgeCases.push('What happens when input is extremely large (1GB+)?');\n  edgeCases.push('What happens when user sends 1000 requests simultaneously?');\n  edgeCases.push('What happens when database is down?');\n  edgeCases.push('What happens when external API is slow (30+ seconds)?');\n  edgeCases.push('What happens when disk is full?');\n  edgeCases.push('What happens when memory is exhausted?');\n  edgeCases.push('What happens during deployment (rolling restart)?');\n  edgeCases.push('What happens when clock skew occurs between servers?');\n  \n  // Recommendations\n  recommendations.push('Implement rate limiting per user and per IP');\n  recommendations.push('Add input validation and sanitization at every boundary');\n  recommendations.push('Use circuit breakers for external dependencies');\n  recommendations.push('Implement request timeouts and deadlines');\n  recommendations.push('Add comprehensive error handling and graceful degradation');\n  recommendations.push('Monitor for anomalous patterns (sudden traffic spikes, error rates)');"}
{"id":"d13939836fab9cb38115dff32218a1700bccd951","source":"repo","path":"src/tools/red-team.ts","sha":"1b894ae4e34fd555e50013b62691873d7edc52c5","start":191,"end":209,"text":"  recommendations.push('Implement chaos engineering tests (kill services randomly)');\n  recommendations.push('Use security headers (CSP, HSTS, X-Frame-Options)');\n  recommendations.push('Encrypt sensitive data at rest and in transit');\n  recommendations.push('Implement audit logging for all sensitive operations');\n  \n  const confidence = 75;\n  \n  return {\n    attackVectors,\n    exploits,\n    edgeCases,\n    stressTests,\n    recommendations,\n    confidence,\n    reasoning: `Red team analysis identified ${attackVectors.length} attack vectors, ${exploits.length} specific exploits, ${edgeCases.length} edge cases, and ${stressTests.length} stress test scenarios.`\n  };\n}\n\n"}
{"id":"7a19ac43307569d81b5d6c9ebd47292a40c94684","source":"repo","path":"src/tools/reflective-thinking.ts","sha":"0ed258344c11de8f73dccec42e1fbaa2177d4940","start":1,"end":41,"text":"/**\n * Reflective Thinking Tool\n * Review and critique previous thoughts and decisions\n * Identify improvements and assess confidence\n */\n\ninterface ReflectionPoint {\n  thoughtNumber: number;\n  reflection: string;\n  improvements: string[];\n  confidence: number;\n  timestamp: number;\n}\n\n// Global state for reflections (persists across calls)\nconst reflections: ReflectionPoint[] = [];\n\nexport async function reflectiveThinking(args: any): Promise<any> {\n  const reflection: ReflectionPoint = {\n    thoughtNumber: args.thoughtNumber,\n    reflection: args.reflection,\n    improvements: args.improvements,\n    confidence: args.confidence,\n    timestamp: Date.now(),\n  };\n\n  reflections.push(reflection);\n\n  // Calculate average confidence across all reflections\n  const averageConfidence = reflections.reduce((sum, r) => sum + r.confidence, 0) / reflections.length;\n\n  // Find low-confidence reflections (< 0.6)\n  const lowConfidenceReflections = reflections.filter(r => r.confidence < 0.6);\n\n  const response = {\n    reflectionAdded: true,\n    totalReflections: reflections.length,\n    thoughtNumber: args.thoughtNumber,\n    confidence: args.confidence,\n    improvementCount: args.improvements.length,\n    averageConfidence: Math.round(averageConfidence * 100) / 100,"}
{"id":"936b5083151cc4fdf51b53b6b1b69fdbec5d4aae","source":"repo","path":"src/tools/reflective-thinking.ts","sha":"0ed258344c11de8f73dccec42e1fbaa2177d4940","start":42,"end":60,"text":"    lowConfidenceCount: lowConfidenceReflections.length,\n    improvements: args.improvements,\n    summary: `Reflected on thought ${args.thoughtNumber} with ${args.confidence * 100}% confidence. ${args.improvements.length} improvements identified.`,\n    recommendation: args.confidence < 0.6 \n      ? 'Low confidence detected. Consider revisiting this thought or exploring alternative approaches.'\n      : 'Confidence is good. Proceed with this approach.',\n  };\n\n  return {\n    content: [\n      {\n        type: 'text',\n        text: JSON.stringify(response, null, 2),\n      },\n    ],\n  };\n}\n\n"}
{"id":"8b6a421505a818579a3cf9577a1a9b1f3a465607","source":"repo","path":"src/tools/root-cause.ts","sha":"a3db66b15dca0056fc53a1fc81be937739412f01","start":1,"end":42,"text":"/**\n * Root Cause Analysis Tool\n * Uses 5 Whys technique to find underlying causes of problems\n */\n\nexport interface RootCauseInput {\n  problem: string;\n  context?: string;\n  depth?: number;\n}\n\nexport interface RootCauseOutput {\n  whyChain: Array<{ why: string; because: string }>;\n  rootCauses: string[];\n  contributingFactors: string[];\n  solutions: string[];\n  confidence: number;\n  reasoning: string;\n}\n\nexport function rootCauseAnalysis(input: RootCauseInput): RootCauseOutput {\n  const { problem, context = '', depth = 5 } = input;\n  \n  const whyChain: Array<{ why: string; because: string }> = [];\n  const rootCauses: string[] = [];\n  const contributingFactors: string[] = [];\n  const solutions: string[] = [];\n  \n  const lowerProblem = problem.toLowerCase();\n  const lowerContext = context.toLowerCase();\n  \n  // Build the \"5 Whys\" chain\n  let currentWhy = problem;\n  \n  for (let i = 0; i < depth; i++) {\n    let because = '';\n    \n    if (i === 0) {\n      // First why - immediate cause\n      if (lowerProblem.includes('slow') || lowerProblem.includes('performance')) {\n        because = 'System is making too many database queries';\n      } else if (lowerProblem.includes('error') || lowerProblem.includes('fail')) {"}
{"id":"a3097dc5be6d8fbfd43ff1026555738c31c05c2c","source":"repo","path":"src/tools/root-cause.ts","sha":"a3db66b15dca0056fc53a1fc81be937739412f01","start":43,"end":67,"text":"        because = 'Code is not handling edge cases properly';\n      } else if (lowerProblem.includes('bug')) {\n        because = 'Logic error in implementation';\n      } else if (lowerProblem.includes('timeout')) {\n        because = 'Operation takes longer than allowed time limit';\n      } else if (lowerProblem.includes('crash')) {\n        because = 'Unhandled exception or null reference';\n      } else {\n        because = 'Immediate symptom observed in system';\n      }\n    } else if (i === 1) {\n      // Second why - technical cause\n      if (lowerProblem.includes('slow') || lowerProblem.includes('performance')) {\n        because = 'No caching layer implemented';\n      } else if (lowerProblem.includes('error') || lowerProblem.includes('fail')) {\n        because = 'Insufficient input validation';\n      } else if (lowerProblem.includes('bug')) {\n        because = 'Lack of test coverage for this scenario';\n      } else if (lowerProblem.includes('timeout')) {\n        because = 'Inefficient algorithm or blocking operations';\n      } else if (lowerProblem.includes('crash')) {\n        because = 'Missing error handling';\n      } else {\n        because = 'Technical implementation issue';\n      }"}
{"id":"3772b0a554bb1501fbd5648b7e486941128673ee","source":"repo","path":"src/tools/root-cause.ts","sha":"a3db66b15dca0056fc53a1fc81be937739412f01","start":68,"end":92,"text":"    } else if (i === 2) {\n      // Third why - design/architecture cause\n      if (lowerProblem.includes('slow') || lowerProblem.includes('performance')) {\n        because = 'Architecture not designed for scale';\n      } else if (lowerProblem.includes('error') || lowerProblem.includes('fail')) {\n        because = 'API contract not clearly defined';\n      } else if (lowerProblem.includes('bug')) {\n        because = 'Requirements were ambiguous';\n      } else if (lowerProblem.includes('timeout')) {\n        because = 'Synchronous design where async needed';\n      } else if (lowerProblem.includes('crash')) {\n        because = 'No defensive programming practices';\n      } else {\n        because = 'Architectural decision or design flaw';\n      }\n    } else if (i === 3) {\n      // Fourth why - process cause\n      because = 'Insufficient code review process';\n      contributingFactors.push('Time pressure to ship features');\n      contributingFactors.push('Lack of performance testing in CI/CD');\n    } else {\n      // Fifth why - root organizational cause\n      because = 'Team lacks training or resources';\n      contributingFactors.push('Technical debt not prioritized');\n      contributingFactors.push('No dedicated time for quality improvements');"}
{"id":"61b218ee2b9fc52f11879c037f01b247cc420d21","source":"repo","path":"src/tools/root-cause.ts","sha":"a3db66b15dca0056fc53a1fc81be937739412f01","start":93,"end":125,"text":"    }\n    \n    whyChain.push({ why: currentWhy, because });\n    currentWhy = because;\n  }\n  \n  // Identify root causes\n  if (whyChain.length > 0) {\n    rootCauses.push(whyChain[whyChain.length - 1].because);\n  }\n  \n  // Add domain-specific root causes\n  if (lowerProblem.includes('slow') || lowerProblem.includes('performance')) {\n    rootCauses.push('Lack of performance requirements in planning');\n    rootCauses.push('No performance monitoring in production');\n    solutions.push('Implement caching strategy');\n    solutions.push('Add database indexes');\n    solutions.push('Use connection pooling');\n    solutions.push('Implement query optimization');\n    solutions.push('Add performance budgets to CI/CD');\n  }\n  \n  if (lowerProblem.includes('error') || lowerProblem.includes('fail')) {\n    rootCauses.push('Insufficient error handling strategy');\n    rootCauses.push('Lack of input validation standards');\n    solutions.push('Implement comprehensive input validation');\n    solutions.push('Add error boundaries');\n    solutions.push('Use type safety (TypeScript)');\n    solutions.push('Add integration tests for error cases');\n  }\n  \n  if (lowerProblem.includes('bug')) {\n    rootCauses.push('Inadequate testing strategy');"}
{"id":"cd0eb5e7ee73d092f98d079baf3f6bda068007fa","source":"repo","path":"src/tools/root-cause.ts","sha":"a3db66b15dca0056fc53a1fc81be937739412f01","start":126,"end":154,"text":"    rootCauses.push('Unclear requirements');\n    solutions.push('Increase test coverage');\n    solutions.push('Add property-based testing');\n    solutions.push('Implement TDD for critical paths');\n    solutions.push('Clarify requirements before coding');\n  }\n  \n  if (lowerProblem.includes('security') || lowerProblem.includes('breach')) {\n    rootCauses.push('Security not considered in design phase');\n    rootCauses.push('Lack of security training');\n    solutions.push('Implement security code review');\n    solutions.push('Use security scanning tools');\n    solutions.push('Follow OWASP guidelines');\n    solutions.push('Conduct regular security audits');\n  }\n  \n  if (lowerProblem.includes('deploy') || lowerProblem.includes('production')) {\n    rootCauses.push('Insufficient deployment testing');\n    rootCauses.push('Lack of staging environment');\n    solutions.push('Implement blue-green deployments');\n    solutions.push('Add smoke tests after deployment');\n    solutions.push('Use feature flags for gradual rollout');\n    solutions.push('Improve rollback procedures');\n  }\n  \n  // Generic solutions\n  if (solutions.length === 0) {\n    solutions.push('Address root cause, not symptoms');\n    solutions.push('Implement preventive measures');"}
{"id":"d3d21e16653502a2fb668cf91af3bd3a201b4225","source":"repo","path":"src/tools/root-cause.ts","sha":"a3db66b15dca0056fc53a1fc81be937739412f01","start":155,"end":178,"text":"    solutions.push('Add monitoring and alerts');\n    solutions.push('Document lessons learned');\n  }\n  \n  // Add process improvements\n  solutions.push('Add this scenario to test suite');\n  solutions.push('Update documentation');\n  solutions.push('Share findings with team');\n  \n  const confidence = whyChain.length >= 3 ? 0.8 : 0.6;\n  \n  const reasoning = `Applied 5 Whys technique with ${whyChain.length} iterations. Identified ${rootCauses.length} root causes and ${contributingFactors.length} contributing factors. Proposed ${solutions.length} solutions.`;\n  \n  return {\n    whyChain,\n    rootCauses,\n    contributingFactors,\n    solutions,\n    confidence,\n    reasoning\n  };\n}\n\n"}
{"id":"e4cf728b6dd6cc50241369f8f785f6b4262a6de7","source":"repo","path":"src/tools/scenario-planning.ts","sha":"52df94dc1e65142015a55799df01396c1eb56b48","start":1,"end":45,"text":"/**\n * Scenario Planning Tool\n * Explore multiple possible futures and prepare for uncertainty\n */\n\nexport interface ScenarioPlanningInput {\n  situation: string;\n  timeframe?: string;\n  context?: string;\n}\n\nexport interface ScenarioPlanningOutput {\n  scenarios: Array<{\n    name: string;\n    description: string;\n    probability: number;\n    impact: number;\n    indicators: string[];\n    preparations: string[];\n  }>;\n  criticalUncertainties: string[];\n  commonPreparations: string[];\n  confidence: number;\n  reasoning: string;\n}\n\nexport function scenarioPlanning(input: ScenarioPlanningInput): ScenarioPlanningOutput {\n  const { situation, timeframe = '1 year', context = '' } = input;\n  const combined = `${situation} ${context}`.toLowerCase();\n  \n  const scenarios: Array<{\n    name: string;\n    description: string;\n    probability: number;\n    impact: number;\n    indicators: string[];\n    preparations: string[];\n  }> = [];\n  \n  const criticalUncertainties: string[] = [];\n  const commonPreparations: string[] = [];\n  \n  // Identify critical uncertainties\n  if (combined.includes('growth') || combined.includes('scale')) {\n    criticalUncertainties.push('Rate of user growth (slow, moderate, explosive)');"}
{"id":"f92e29b8ea594f2be6a38e5650a5ed57c84575b1","source":"repo","path":"src/tools/scenario-planning.ts","sha":"52df94dc1e65142015a55799df01396c1eb56b48","start":46,"end":74,"text":"    criticalUncertainties.push('Market competition (monopoly, competitive, saturated)');\n  }\n  \n  if (combined.includes('technical') || combined.includes('architecture')) {\n    criticalUncertainties.push('Technology maturity (stable, evolving, disruptive)');\n    criticalUncertainties.push('Team capability (learning curve, expertise level)');\n  }\n  \n  if (combined.includes('business') || combined.includes('product')) {\n    criticalUncertainties.push('Market demand (strong, moderate, weak)');\n    criticalUncertainties.push('Regulatory environment (favorable, neutral, restrictive)');\n  }\n  \n  criticalUncertainties.push('Economic conditions (boom, stable, recession)');\n  criticalUncertainties.push('Resource availability (abundant, constrained, scarce)');\n  \n  // Generate scenarios (2x2 matrix of key uncertainties)\n  \n  // Scenario 1: Best Case\n  scenarios.push({\n    name: 'Smooth Sailing',\n    description: 'Everything goes according to plan. Growth is steady, team executes well, no major obstacles.',\n    probability: 20,\n    impact: 80,\n    indicators: [\n      'Metrics trending as projected',\n      'No major incidents or outages',\n      'Team velocity stable or increasing',\n      'Positive user feedback'"}
{"id":"9aba153535e7bdf874603e194a0d0fa47347479b","source":"repo","path":"src/tools/scenario-planning.ts","sha":"52df94dc1e65142015a55799df01396c1eb56b48","start":75,"end":112,"text":"    ],\n    preparations: [\n      'Document what\\'s working for future reference',\n      'Build buffer capacity for unexpected growth',\n      'Invest in team development and retention',\n      'Prepare for next phase of growth'\n    ]\n  });\n  \n  // Scenario 2: Explosive Growth\n  scenarios.push({\n    name: 'Viral Success',\n    description: 'Product goes viral, growth far exceeds projections. Infrastructure and team struggle to keep up.',\n    probability: 10,\n    impact: 95,\n    indicators: [\n      'Traffic growing >50% week-over-week',\n      'Performance degradation under load',\n      'Support tickets overwhelming team',\n      'Media attention and press coverage'\n    ],\n    preparations: [\n      'Have auto-scaling configured and tested',\n      'Prepare incident response playbooks',\n      'Line up additional resources (budget, hiring pipeline)',\n      'Simplify features to focus on core value',\n      'Set up rate limiting and abuse prevention'\n    ]\n  });\n  \n  // Scenario 3: Slow Growth\n  scenarios.push({\n    name: 'Slow Burn',\n    description: 'Growth is slower than expected. Need to optimize costs and find product-market fit.',\n    probability: 40,\n    impact: 60,\n    indicators: [\n      'User acquisition below targets',"}
{"id":"dcf97fb8b02c1f352617ed512ee78c7beb03509c","source":"repo","path":"src/tools/scenario-planning.ts","sha":"52df94dc1e65142015a55799df01396c1eb56b48","start":113,"end":150,"text":"      'High churn rate',\n      'Low engagement metrics',\n      'Runway concerns'\n    ],\n    preparations: [\n      'Optimize infrastructure costs aggressively',\n      'Focus on retention over acquisition',\n      'Conduct user research to understand friction',\n      'Pivot features based on user feedback',\n      'Extend runway through cost reduction'\n    ]\n  });\n  \n  // Scenario 4: Technical Crisis\n  scenarios.push({\n    name: 'Technical Debt Reckoning',\n    description: 'Accumulated technical debt causes major outages, security issues, or performance problems.',\n    probability: 25,\n    impact: 85,\n    indicators: [\n      'Increasing frequency of incidents',\n      'Deployment failures',\n      'Developer velocity slowing',\n      'Security vulnerabilities discovered'\n    ],\n    preparations: [\n      'Allocate time for technical debt reduction',\n      'Implement comprehensive monitoring and alerting',\n      'Build automated testing and CI/CD',\n      'Document critical systems and dependencies',\n      'Create disaster recovery procedures'\n    ]\n  });\n  \n  // Scenario 5: Market Disruption\n  scenarios.push({\n    name: 'Competitive Threat',\n    description: 'Major competitor enters market or technology shift makes current approach obsolete.',"}
{"id":"77e7c1680d0077918e5f6018e188197a13d6a61f","source":"repo","path":"src/tools/scenario-planning.ts","sha":"52df94dc1e65142015a55799df01396c1eb56b48","start":151,"end":192,"text":"    probability: 30,\n    impact: 75,\n    indicators: [\n      'Competitor announcements',\n      'User migration to alternatives',\n      'Technology trends shifting',\n      'Industry consolidation'\n    ],\n    preparations: [\n      'Build unique defensible features',\n      'Focus on customer relationships and lock-in',\n      'Stay flexible and ready to pivot',\n      'Monitor competitive landscape',\n      'Invest in innovation and R&D'\n    ]\n  });\n  \n  // Scenario 6: Team Crisis\n  scenarios.push({\n    name: 'Talent Exodus',\n    description: 'Key team members leave, knowledge is lost, velocity drops significantly.',\n    probability: 20,\n    impact: 70,\n    indicators: [\n      'Increased turnover',\n      'Low morale or engagement',\n      'Compensation below market',\n      'Burnout symptoms'\n    ],\n    preparations: [\n      'Document tribal knowledge',\n      'Cross-train team members',\n      'Improve compensation and benefits',\n      'Build positive team culture',\n      'Have succession plans for key roles'\n    ]\n  });\n  \n  // Scenario 7: Resource Constraints\n  scenarios.push({\n    name: 'Budget Crunch',\n    description: 'Funding dries up, need to do more with less, or shut down non-essential services.',"}
{"id":"d746aae03ff29cc569a13b62cd8e42f050878b2f","source":"repo","path":"src/tools/scenario-planning.ts","sha":"52df94dc1e65142015a55799df01396c1eb56b48","start":193,"end":220,"text":"    probability: 25,\n    impact: 65,\n    indicators: [\n      'Funding rounds delayed or failed',\n      'Revenue below projections',\n      'Burn rate unsustainable',\n      'Investor pressure'\n    ],\n    preparations: [\n      'Identify and protect core features',\n      'Optimize cloud costs aggressively',\n      'Reduce dependencies on expensive services',\n      'Build lean processes',\n      'Have shutdown procedures for non-critical systems'\n    ]\n  });\n  \n  // Common preparations (robust across scenarios)\n  commonPreparations.push('Build comprehensive monitoring and observability');\n  commonPreparations.push('Document critical systems and processes');\n  commonPreparations.push('Implement automated testing and CI/CD');\n  commonPreparations.push('Create incident response playbooks');\n  commonPreparations.push('Maintain financial buffer (3-6 months runway)');\n  commonPreparations.push('Foster team resilience and adaptability');\n  commonPreparations.push('Stay close to users and gather feedback');\n  commonPreparations.push('Keep architecture flexible and modular');\n  commonPreparations.push('Build strong relationships with stakeholders');\n  commonPreparations.push('Regularly review and update plans');"}
{"id":"985bdfc0794dcf04289b949c7d320a72b9bd4613","source":"repo","path":"src/tools/scenario-planning.ts","sha":"52df94dc1e65142015a55799df01396c1eb56b48","start":221,"end":233,"text":"  \n  const confidence = 65;\n  \n  return {\n    scenarios,\n    criticalUncertainties,\n    commonPreparations,\n    confidence,\n    reasoning: `Generated ${scenarios.length} distinct scenarios across ${criticalUncertainties.length} critical uncertainties. Identified ${commonPreparations.length} robust preparations that work across multiple scenarios.`\n  };\n}\n\n"}
{"id":"8dce22661a02dfab398802d78906e9d4f330c995","source":"repo","path":"src/tools/sequential-thinking.ts","sha":"fa3707ec94a5210484a456dc5fa9a3b6b4295fcf","start":1,"end":44,"text":"/**\n * Sequential Thinking Tool\n * Break down complex problems into sequential thought steps\n * Supports revisions, branching, and dynamic thought adjustment\n */\n\ninterface ThoughtStep {\n  thoughtNumber: number;\n  thought: string;\n  nextThoughtNeeded: boolean;\n  isRevision?: boolean;\n  revisesThought?: number;\n  branchId?: string;\n  branchFromThought?: number;\n}\n\n// Global state for thought history (persists across calls)\nconst thoughtHistory: ThoughtStep[] = [];\nconst branches: Map<string, ThoughtStep[]> = new Map();\n\nexport async function sequentialThinking(args: any): Promise<any> {\n  const step: ThoughtStep = {\n    thoughtNumber: args.thoughtNumber,\n    thought: args.thought,\n    nextThoughtNeeded: args.nextThoughtNeeded,\n    isRevision: args.isRevision,\n    revisesThought: args.revisesThought,\n    branchId: args.branchId,\n    branchFromThought: args.branchFromThought,\n  };\n\n  thoughtHistory.push(step);\n\n  // If this is a branch, track it separately\n  if (args.branchId) {\n    if (!branches.has(args.branchId)) {\n      branches.set(args.branchId, []);\n    }\n    branches.get(args.branchId)!.push(step);\n  }\n\n  const response = {\n    thoughtNumber: step.thoughtNumber,\n    totalThoughts: args.totalThoughts,"}
{"id":"f0e79d37430136e2711ead3738b8bc3fc6f0169d","source":"repo","path":"src/tools/sequential-thinking.ts","sha":"fa3707ec94a5210484a456dc5fa9a3b6b4295fcf","start":45,"end":63,"text":"    nextThoughtNeeded: step.nextThoughtNeeded,\n    thoughtHistoryLength: thoughtHistory.length,\n    branches: Array.from(branches.keys()),\n    isRevision: step.isRevision,\n    revisesThought: step.revisesThought,\n    summary: `Thought ${step.thoughtNumber}/${args.totalThoughts} recorded. ${step.nextThoughtNeeded ? 'Continue thinking.' : 'Thinking complete.'}`,\n  };\n\n  return {\n    content: [\n      {\n        type: 'text',\n        text: JSON.stringify(response, null, 2),\n      },\n    ],\n  };\n}\n\n"}
{"id":"34df5362463c3a84aa23c9b1fda532fb41efd0c0","source":"repo","path":"src/tools/socratic.ts","sha":"69f84104aef30dbac501b5a82c32667b8e6e3fd1","start":1,"end":38,"text":"/**\n * Socratic Questioning Tool\n * Deep inquiry through probing questions\n */\n\nexport interface SocraticInput {\n  topic: string;\n  context?: string;\n  depth?: 'quick' | 'deep';\n}\n\nexport interface SocraticOutput {\n  clarifyingQuestions: string[];\n  assumptionQuestions: string[];\n  reasoningQuestions: string[];\n  perspectiveQuestions: string[];\n  implicationQuestions: string[];\n  metaQuestions: string[];\n  confidence: number;\n  reasoning: string;\n}\n\nexport function socratic(input: SocraticInput): SocraticOutput {\n  const { topic, context = '', depth = 'quick' } = input;\n  const combined = `${topic} ${context}`.toLowerCase();\n  \n  const clarifyingQuestions: string[] = [];\n  const assumptionQuestions: string[] = [];\n  const reasoningQuestions: string[] = [];\n  const perspectiveQuestions: string[] = [];\n  const implicationQuestions: string[] = [];\n  const metaQuestions: string[] = [];\n  \n  // Clarifying questions (understand what is being said)\n  clarifyingQuestions.push('What exactly do you mean by that?');\n  clarifyingQuestions.push('Can you give me an example?');\n  clarifyingQuestions.push('How does this relate to the broader problem?');\n  clarifyingQuestions.push('What is the core issue you\\'re trying to solve?');"}
{"id":"7cd3d57553797f5e3db903e32ccdb787b0902bdc","source":"repo","path":"src/tools/socratic.ts","sha":"69f84104aef30dbac501b5a82c32667b8e6e3fd1","start":39,"end":65,"text":"  \n  if (combined.includes('should') || combined.includes('must')) {\n    clarifyingQuestions.push('What makes this a \"should\" rather than a \"could\"?');\n  }\n  \n  if (combined.includes('better') || combined.includes('worse')) {\n    clarifyingQuestions.push('Better/worse by what measure?');\n    clarifyingQuestions.push('Better for whom?');\n  }\n  \n  // Assumption questions (probe underlying beliefs)\n  assumptionQuestions.push('What are you assuming to be true?');\n  assumptionQuestions.push('What would happen if that assumption were false?');\n  assumptionQuestions.push('Why do you think this assumption holds?');\n  assumptionQuestions.push('What evidence supports this assumption?');\n  \n  if (combined.includes('scale') || combined.includes('growth')) {\n    assumptionQuestions.push('Are you assuming growth will continue at the current rate?');\n    assumptionQuestions.push('What if growth is slower/faster than expected?');\n  }\n  \n  if (combined.includes('user') || combined.includes('customer')) {\n    assumptionQuestions.push('Are you assuming users will behave rationally?');\n    assumptionQuestions.push('Have you validated these assumptions with real users?');\n  }\n  \n  if (combined.includes('performance') || combined.includes('fast')) {"}
{"id":"e985216d5bbc27d36cf2547d84afb617d412d1fd","source":"repo","path":"src/tools/socratic.ts","sha":"69f84104aef30dbac501b5a82c32667b8e6e3fd1","start":66,"end":89,"text":"    assumptionQuestions.push('Are you assuming performance is the bottleneck?');\n    assumptionQuestions.push('Have you measured where the actual slowness is?');\n  }\n  \n  // Reasoning questions (examine logic and evidence)\n  reasoningQuestions.push('What evidence do you have for this?');\n  reasoningQuestions.push('How did you arrive at this conclusion?');\n  reasoningQuestions.push('What alternative explanations exist?');\n  reasoningQuestions.push('What would it take to prove this wrong?');\n  reasoningQuestions.push('Is this correlation or causation?');\n  \n  if (combined.includes('because') || combined.includes('therefore')) {\n    reasoningQuestions.push('Does the conclusion necessarily follow from the premise?');\n    reasoningQuestions.push('Are there any logical gaps in this reasoning?');\n  }\n  \n  if (combined.includes('data') || combined.includes('metric')) {\n    reasoningQuestions.push('Is this data representative of the whole population?');\n    reasoningQuestions.push('Could this data be misleading or biased?');\n  }\n  \n  // Perspective questions (consider different viewpoints)\n  perspectiveQuestions.push('How would someone who disagrees view this?');\n  perspectiveQuestions.push('What would a user/customer say about this?');"}
{"id":"5196d9b7da47c6ddab73767e037e420a0ef05776","source":"repo","path":"src/tools/socratic.ts","sha":"69f84104aef30dbac501b5a82c32667b8e6e3fd1","start":90,"end":113,"text":"  perspectiveQuestions.push('How would this look from a different angle?');\n  perspectiveQuestions.push('Who benefits from this? Who is harmed?');\n  \n  if (combined.includes('team') || combined.includes('developer')) {\n    perspectiveQuestions.push('How would a junior developer approach this?');\n    perspectiveQuestions.push('How would a senior architect view this?');\n  }\n  \n  if (combined.includes('business') || combined.includes('product')) {\n    perspectiveQuestions.push('How does this align with business goals?');\n    perspectiveQuestions.push('What would the CEO/CFO think about this?');\n  }\n  \n  if (combined.includes('technical') || combined.includes('architecture')) {\n    perspectiveQuestions.push('How would this look in 5 years?');\n    perspectiveQuestions.push('What would a security expert say about this?');\n  }\n  \n  // Implication questions (explore consequences)\n  implicationQuestions.push('What are the consequences if this succeeds?');\n  implicationQuestions.push('What are the consequences if this fails?');\n  implicationQuestions.push('What happens next?');\n  implicationQuestions.push('What are the second-order effects?');\n  implicationQuestions.push('What are the long-term implications?');"}
{"id":"57eeacc9bff2f54025b1f6fd50f26fb04a077c77","source":"repo","path":"src/tools/socratic.ts","sha":"69f84104aef30dbac501b5a82c32667b8e6e3fd1","start":114,"end":139,"text":"  \n  if (combined.includes('change') || combined.includes('migrate')) {\n    implicationQuestions.push('What will break when we make this change?');\n    implicationQuestions.push('How will this affect existing users/systems?');\n  }\n  \n  if (combined.includes('cost') || combined.includes('budget')) {\n    implicationQuestions.push('What are the hidden costs?');\n    implicationQuestions.push('What is the opportunity cost of this decision?');\n  }\n  \n  if (combined.includes('risk') || combined.includes('failure')) {\n    implicationQuestions.push('What is the worst-case scenario?');\n    implicationQuestions.push('Can we recover if this goes wrong?');\n  }\n  \n  // Meta questions (question the question)\n  metaQuestions.push('Why are we asking this question?');\n  metaQuestions.push('What question should we be asking instead?');\n  metaQuestions.push('Are we solving the right problem?');\n  metaQuestions.push('What are we not considering?');\n  metaQuestions.push('How do we know when we have the right answer?');\n  \n  if (combined.includes('solution') || combined.includes('fix')) {\n    metaQuestions.push('Are we treating symptoms or root causes?');\n    metaQuestions.push('Is this problem worth solving?');"}
{"id":"091d7d2eb0a49b333e2d75dff0d05871a40bac07","source":"repo","path":"src/tools/socratic.ts","sha":"69f84104aef30dbac501b5a82c32667b8e6e3fd1","start":140,"end":167,"text":"  }\n  \n  if (combined.includes('decide') || combined.includes('choose')) {\n    metaQuestions.push('What criteria are we using to decide?');\n    metaQuestions.push('Who should be making this decision?');\n  }\n  \n  // Add depth-specific questions\n  if (depth === 'deep') {\n    clarifyingQuestions.push('Can you break this down into smaller parts?');\n    clarifyingQuestions.push('What are the edge cases?');\n    \n    assumptionQuestions.push('What cultural or organizational assumptions are embedded here?');\n    assumptionQuestions.push('What are we taking for granted?');\n    \n    reasoningQuestions.push('What are the weakest points in this argument?');\n    reasoningQuestions.push('What would a skeptic say?');\n    \n    perspectiveQuestions.push('How would this look in a different industry/domain?');\n    perspectiveQuestions.push('What can we learn from historical precedents?');\n    \n    implicationQuestions.push('What are the ethical implications?');\n    implicationQuestions.push('How does this affect power dynamics?');\n    \n    metaQuestions.push('What biases might be influencing our thinking?');\n    metaQuestions.push('Are we asking questions to confirm what we already believe?');\n  }\n  "}
{"id":"88cd99ebbfcc5f96d6091da950f39d3f0002797b","source":"repo","path":"src/tools/socratic.ts","sha":"69f84104aef30dbac501b5a82c32667b8e6e3fd1","start":168,"end":182,"text":"  const confidence = 70;\n  \n  return {\n    clarifyingQuestions,\n    assumptionQuestions,\n    reasoningQuestions,\n    perspectiveQuestions,\n    implicationQuestions,\n    metaQuestions,\n    confidence,\n    reasoning: `Generated ${clarifyingQuestions.length} clarifying, ${assumptionQuestions.length} assumption, ${reasoningQuestions.length} reasoning, ${perspectiveQuestions.length} perspective, ${implicationQuestions.length} implication, and ${metaQuestions.length} meta questions for deep inquiry.`\n  };\n}\n\n"}
{"id":"01158cdbc98ec47f1b3d2b15d8b80700f270eb9a","source":"repo","path":"src/tools/swot.ts","sha":"e99b981b05cf479c43782afd813b9bd18f464061","start":1,"end":40,"text":"/**\n * SWOT Analysis Tool\n * Analyzes Strengths, Weaknesses, Opportunities, and Threats\n */\n\nexport interface SWOTInput {\n  subject: string;\n  context?: string;\n  perspective?: 'technical' | 'business' | 'product' | 'team';\n}\n\nexport interface SWOTOutput {\n  strengths: string[];\n  weaknesses: string[];\n  opportunities: string[];\n  threats: string[];\n  strategicRecommendations: string[];\n  confidence: number;\n  reasoning: string;\n}\n\nexport function swotAnalysis(input: SWOTInput): SWOTOutput {\n  const { subject, context = '', perspective = 'technical' } = input;\n  \n  const strengths: string[] = [];\n  const weaknesses: string[] = [];\n  const opportunities: string[] = [];\n  const threats: string[] = [];\n  const strategicRecommendations: string[] = [];\n  \n  const lowerSubject = subject.toLowerCase();\n  const lowerContext = context.toLowerCase();\n  \n  // Technology/Architecture SWOT\n  if (lowerSubject.includes('typescript') || lowerContext.includes('typescript')) {\n    strengths.push('Strong type safety catches bugs at compile time');\n    strengths.push('Excellent IDE support and autocomplete');\n    strengths.push('Large ecosystem and community');\n    \n    weaknesses.push('Adds build step complexity');"}
{"id":"d3297509b89b2b4b679b6652c0025a3108947538","source":"repo","path":"src/tools/swot.ts","sha":"e99b981b05cf479c43782afd813b9bd18f464061","start":41,"end":70,"text":"    weaknesses.push('Learning curve for team');\n    weaknesses.push('Type definitions can be verbose');\n    \n    opportunities.push('Improve code quality and maintainability');\n    opportunities.push('Reduce runtime errors');\n    opportunities.push('Better refactoring support');\n    \n    threats.push('Build times may slow down development');\n    threats.push('Type errors may frustrate developers');\n  }\n  \n  if (lowerSubject.includes('react') || lowerContext.includes('react')) {\n    strengths.push('Component-based architecture');\n    strengths.push('Large ecosystem of libraries');\n    strengths.push('Strong community support');\n    strengths.push('Virtual DOM for performance');\n    \n    weaknesses.push('Steep learning curve for beginners');\n    weaknesses.push('Frequent breaking changes');\n    weaknesses.push('JSX syntax may confuse some developers');\n    \n    opportunities.push('Server components for better performance');\n    opportunities.push('Rich ecosystem of UI libraries');\n    opportunities.push('Easy to find React developers');\n    \n    threats.push('Framework fatigue - new frameworks emerging');\n    threats.push('Bundle size can grow large');\n  }\n  \n  if (lowerSubject.includes('microservice')) {"}
{"id":"2457c60d42a353fad1e53ecee05198f74ee58339","source":"repo","path":"src/tools/swot.ts","sha":"e99b981b05cf479c43782afd813b9bd18f464061","start":71,"end":99,"text":"    strengths.push('Independent deployment of services');\n    strengths.push('Technology diversity - use best tool for each service');\n    strengths.push('Team autonomy and ownership');\n    \n    weaknesses.push('Operational complexity');\n    weaknesses.push('Distributed system challenges');\n    weaknesses.push('Network latency between services');\n    weaknesses.push('Harder to debug and trace');\n    \n    opportunities.push('Scale services independently');\n    opportunities.push('Isolate failures to single services');\n    opportunities.push('Easier to understand individual services');\n    \n    threats.push('Service orchestration failures');\n    threats.push('Data consistency issues');\n    threats.push('Increased infrastructure costs');\n  }\n  \n  if (lowerSubject.includes('monolith')) {\n    strengths.push('Simple deployment');\n    strengths.push('Easy to debug and trace');\n    strengths.push('No network latency between components');\n    strengths.push('Easier to maintain consistency');\n    \n    weaknesses.push('All-or-nothing deployment');\n    weaknesses.push('Harder to scale specific features');\n    weaknesses.push('Can become large and complex');\n    \n    opportunities.push('Modular monolith can get many microservice benefits');"}
{"id":"fabbfcb1fad5f5089db054290724683f83fc4cf5","source":"repo","path":"src/tools/swot.ts","sha":"e99b981b05cf479c43782afd813b9bd18f464061","start":100,"end":130,"text":"    opportunities.push('Simpler operations and monitoring');\n    opportunities.push('Lower infrastructure costs');\n    \n    threats.push('May outgrow single server capacity');\n    threats.push('Tight coupling can slow development');\n  }\n  \n  if (lowerSubject.includes('serverless') || lowerSubject.includes('lambda')) {\n    strengths.push('No server management');\n    strengths.push('Automatic scaling');\n    strengths.push('Pay only for execution time');\n    \n    weaknesses.push('Cold start latency');\n    weaknesses.push('Vendor lock-in');\n    weaknesses.push('Debugging is harder');\n    weaknesses.push('Timeout limits');\n    \n    opportunities.push('Focus on code, not infrastructure');\n    opportunities.push('Cost-effective for variable workloads');\n    opportunities.push('Built-in high availability');\n    \n    threats.push('Costs can spike unexpectedly');\n    threats.push('Limited control over environment');\n    threats.push('Not suitable for long-running tasks');\n  }\n  \n  if (lowerSubject.includes('postgres') || lowerSubject.includes('sql')) {\n    strengths.push('ACID compliance');\n    strengths.push('Strong consistency');\n    strengths.push('Powerful query language');\n    strengths.push('Mature and battle-tested');"}
{"id":"c4e03632c4b762a61a0a184b57b15d5a4c54f642","source":"repo","path":"src/tools/swot.ts","sha":"e99b981b05cf479c43782afd813b9bd18f464061","start":131,"end":162,"text":"    \n    weaknesses.push('Vertical scaling limits');\n    weaknesses.push('Schema changes can be complex');\n    weaknesses.push('Harder to scale horizontally');\n    \n    opportunities.push('JSON support for flexible data');\n    opportunities.push('Full-text search capabilities');\n    opportunities.push('Extensions for specialized features');\n    \n    threats.push('NoSQL may be better for some use cases');\n    threats.push('Scaling costs can be high');\n  }\n  \n  if (lowerSubject.includes('mongodb') || lowerSubject.includes('nosql')) {\n    strengths.push('Flexible schema');\n    strengths.push('Horizontal scaling');\n    strengths.push('Good for unstructured data');\n    \n    weaknesses.push('Eventual consistency by default');\n    weaknesses.push('No joins - denormalization needed');\n    weaknesses.push('Can lead to data duplication');\n    \n    opportunities.push('Fast iteration on data model');\n    opportunities.push('Good for rapid prototyping');\n    opportunities.push('Scales well for read-heavy workloads');\n    \n    threats.push('Data integrity harder to maintain');\n    threats.push('Complex queries are harder');\n  }\n  \n  // Team/Process SWOT\n  if (perspective === 'team' || lowerSubject.includes('team')) {"}
{"id":"92a2c4d551ed17d0a6b051c71c0c047eb86df4a1","source":"repo","path":"src/tools/swot.ts","sha":"e99b981b05cf479c43782afd813b9bd18f464061","start":163,"end":197,"text":"    strengths.push('Existing team knowledge');\n    strengths.push('Established processes');\n    \n    weaknesses.push('Limited bandwidth');\n    weaknesses.push('Knowledge silos');\n    \n    opportunities.push('Cross-training team members');\n    opportunities.push('Improving documentation');\n    opportunities.push('Automating repetitive tasks');\n    \n    threats.push('Key person dependencies');\n    threats.push('Burnout from overwork');\n  }\n  \n  // Generic SWOT if nothing specific\n  if (strengths.length === 0) {\n    strengths.push('Proven technology/approach');\n    strengths.push('Available resources and documentation');\n    \n    weaknesses.push('Learning curve');\n    weaknesses.push('Implementation complexity');\n    \n    opportunities.push('Improve current state');\n    opportunities.push('Learn new skills');\n    \n    threats.push('Better alternatives may exist');\n    threats.push('Changing requirements');\n  }\n  \n  // Strategic recommendations based on SWOT\n  if (strengths.length > weaknesses.length) {\n    strategicRecommendations.push('Leverage strengths to capitalize on opportunities');\n    strategicRecommendations.push('Use strengths to mitigate threats');\n  } else {\n    strategicRecommendations.push('Address weaknesses before they become critical');"}
{"id":"1baaedc81610a1a05f0ed64820e73aadbeac1d12","source":"repo","path":"src/tools/swot.ts","sha":"e99b981b05cf479c43782afd813b9bd18f464061","start":198,"end":225,"text":"    strategicRecommendations.push('Consider alternatives that better fit needs');\n  }\n  \n  if (opportunities.length > threats.length) {\n    strategicRecommendations.push('Pursue opportunities aggressively');\n  } else {\n    strategicRecommendations.push('Develop contingency plans for threats');\n    strategicRecommendations.push('Monitor threats closely');\n  }\n  \n  strategicRecommendations.push('Document decision rationale for future reference');\n  \n  const confidence = (strengths.length + weaknesses.length + opportunities.length + threats.length) > 8 ? 0.85 : 0.7;\n  \n  const reasoning = `Analyzed ${subject} from ${perspective} perspective. Found ${strengths.length} strengths, ${weaknesses.length} weaknesses, ${opportunities.length} opportunities, ${threats.length} threats.`;\n  \n  return {\n    strengths,\n    weaknesses,\n    opportunities,\n    threats,\n    strategicRecommendations,\n    confidence,\n    reasoning\n  };\n}\n\n"}
{"id":"2e7a0bde827121fe51d650d91fcf3a11a400c94b","source":"repo","path":"src/tools/systems-thinking.ts","sha":"8f1ce31dbbcae43b80ab6015eac71cb8682f6213","start":1,"end":29,"text":"/**\n * Systems Thinking Tool\n * Understand interconnections, feedback loops, and emergent behavior\n */\n\nexport interface SystemsThinkingInput {\n  system: string;\n  context?: string;\n}\n\nexport interface SystemsThinkingOutput {\n  components: Array<{ name: string; role: string; dependencies: string[] }>;\n  feedbackLoops: Array<{ type: 'reinforcing' | 'balancing'; description: string; impact: string }>;\n  leveragePoints: Array<{ point: string; impact: string; difficulty: string }>;\n  emergentBehaviors: string[];\n  systemArchetypes: Array<{ archetype: string; description: string; solution: string }>;\n  confidence: number;\n  reasoning: string;\n}\n\nexport function systemsThinking(input: SystemsThinkingInput): SystemsThinkingOutput {\n  const { system, context = '' } = input;\n  const combined = `${system} ${context}`.toLowerCase();\n  \n  const components: Array<{ name: string; role: string; dependencies: string[] }> = [];\n  const feedbackLoops: Array<{ type: 'reinforcing' | 'balancing'; description: string; impact: string }> = [];\n  const leveragePoints: Array<{ point: string; impact: string; difficulty: string }> = [];\n  const emergentBehaviors: string[] = [];\n  const systemArchetypes: Array<{ archetype: string; description: string; solution: string }> = [];"}
{"id":"17a617f991aaf678ac1450def7f51df8544a1451","source":"repo","path":"src/tools/systems-thinking.ts","sha":"8f1ce31dbbcae43b80ab6015eac71cb8682f6213","start":30,"end":74,"text":"  \n  // Identify components\n  if (combined.includes('api') || combined.includes('service')) {\n    components.push({\n      name: 'API Layer',\n      role: 'Interface between clients and backend',\n      dependencies: ['Database', 'Cache', 'Auth Service']\n    });\n  }\n  \n  if (combined.includes('database') || combined.includes('db')) {\n    components.push({\n      name: 'Database',\n      role: 'Persistent data storage',\n      dependencies: ['Disk I/O', 'Network']\n    });\n  }\n  \n  if (combined.includes('cache') || combined.includes('redis')) {\n    components.push({\n      name: 'Cache',\n      role: 'Fast temporary data storage',\n      dependencies: ['Memory', 'Database']\n    });\n  }\n  \n  if (combined.includes('queue') || combined.includes('job')) {\n    components.push({\n      name: 'Job Queue',\n      role: 'Asynchronous task processing',\n      dependencies: ['Workers', 'Database']\n    });\n  }\n  \n  if (combined.includes('user') || combined.includes('client')) {\n    components.push({\n      name: 'Users/Clients',\n      role: 'Generate requests and consume responses',\n      dependencies: ['API', 'Network']\n    });\n  }\n  \n  // Identify feedback loops\n  if (combined.includes('cache')) {\n    feedbackLoops.push({"}
{"id":"d7f86274c9ec81453d39a91d8cdec69d146f4ae2","source":"repo","path":"src/tools/systems-thinking.ts","sha":"8f1ce31dbbcae43b80ab6015eac71cb8682f6213","start":75,"end":104,"text":"      type: 'reinforcing',\n      description: 'Cache Hit Spiral: More cache hits ‚Üí faster responses ‚Üí more users ‚Üí more cache hits',\n      impact: 'Positive: System gets faster as it\\'s used more'\n    });\n    \n    feedbackLoops.push({\n      type: 'balancing',\n      description: 'Cache Invalidation: More writes ‚Üí more cache invalidations ‚Üí more cache misses ‚Üí slower responses ‚Üí fewer writes',\n      impact: 'Negative: Write-heavy workloads degrade cache effectiveness'\n    });\n  }\n  \n  if (combined.includes('scale') || combined.includes('load')) {\n    feedbackLoops.push({\n      type: 'reinforcing',\n      description: 'Success Spiral: More users ‚Üí more revenue ‚Üí more resources ‚Üí better service ‚Üí more users',\n      impact: 'Positive: Growth enables better service'\n    });\n    \n    feedbackLoops.push({\n      type: 'reinforcing',\n      description: 'Death Spiral: Slow service ‚Üí users leave ‚Üí less revenue ‚Üí fewer resources ‚Üí slower service',\n      impact: 'Negative: Performance issues can compound'\n    });\n  }\n  \n  if (combined.includes('error') || combined.includes('retry')) {\n    feedbackLoops.push({\n      type: 'reinforcing',\n      description: 'Retry Storm: Service slow ‚Üí clients retry ‚Üí more load ‚Üí service slower ‚Üí more retries',"}
{"id":"cfbcd28c92bb2dc3bec0542cb65ac4806be76d78","source":"repo","path":"src/tools/systems-thinking.ts","sha":"8f1ce31dbbcae43b80ab6015eac71cb8682f6213","start":105,"end":138,"text":"      impact: 'Negative: Retries can overwhelm struggling service'\n    });\n    \n    feedbackLoops.push({\n      type: 'balancing',\n      description: 'Circuit Breaker: Too many errors ‚Üí circuit opens ‚Üí load drops ‚Üí service recovers ‚Üí circuit closes',\n      impact: 'Positive: Prevents cascading failures'\n    });\n  }\n  \n  if (combined.includes('team') || combined.includes('developer')) {\n    feedbackLoops.push({\n      type: 'reinforcing',\n      description: 'Technical Debt Spiral: Rushed code ‚Üí more bugs ‚Üí more time fixing ‚Üí less time for quality ‚Üí more rushed code',\n      impact: 'Negative: Quality degrades over time'\n    });\n    \n    feedbackLoops.push({\n      type: 'balancing',\n      description: 'Learning Loop: Complex code ‚Üí developers learn ‚Üí better understanding ‚Üí simpler code',\n      impact: 'Positive: Team capability improves over time'\n    });\n  }\n  \n  // Identify leverage points (places to intervene)\n  leveragePoints.push({\n    point: 'System Goals',\n    impact: 'Highest - Changing what the system optimizes for changes everything',\n    difficulty: 'Very Hard - Requires organizational buy-in'\n  });\n  \n  leveragePoints.push({\n    point: 'Feedback Loop Delays',\n    impact: 'High - Reducing delays makes system more responsive',"}
{"id":"e09fcc5f1bafe466a888ac9b8e24934d4b26d1f2","source":"repo","path":"src/tools/systems-thinking.ts","sha":"8f1ce31dbbcae43b80ab6015eac71cb8682f6213","start":139,"end":168,"text":"    difficulty: 'Medium - Often requires architectural changes'\n  });\n  \n  leveragePoints.push({\n    point: 'Information Flow',\n    impact: 'High - Better visibility enables better decisions',\n    difficulty: 'Medium - Add monitoring, logging, tracing'\n  });\n  \n  leveragePoints.push({\n    point: 'System Structure',\n    impact: 'Medium - Changing connections between components',\n    difficulty: 'Hard - Requires refactoring'\n  });\n  \n  leveragePoints.push({\n    point: 'Buffer Sizes',\n    impact: 'Low - Adjusting queue sizes, connection pools, etc.',\n    difficulty: 'Easy - Configuration changes'\n  });\n  \n  // Identify emergent behaviors\n  emergentBehaviors.push('Traffic patterns emerge from individual user behaviors');\n  emergentBehaviors.push('System bottlenecks shift as load increases');\n  emergentBehaviors.push('Failure modes appear that weren\\'t present in individual components');\n  emergentBehaviors.push('Performance characteristics change non-linearly with scale');\n  \n  if (combined.includes('microservice') || combined.includes('distributed')) {\n    emergentBehaviors.push('Cascading failures propagate through service dependencies');\n    emergentBehaviors.push('Network partitions create split-brain scenarios');"}
{"id":"7dfc7bbd406b7abdace93a7ca10d6ca3b72b8852","source":"repo","path":"src/tools/systems-thinking.ts","sha":"8f1ce31dbbcae43b80ab6015eac71cb8682f6213","start":169,"end":198,"text":"    emergentBehaviors.push('Eventual consistency leads to temporary data inconsistencies');\n  }\n  \n  if (combined.includes('cache')) {\n    emergentBehaviors.push('Cache stampedes occur when popular items expire');\n    emergentBehaviors.push('Hot keys create uneven load distribution');\n  }\n  \n  // Identify system archetypes (common patterns)\n  if (combined.includes('growth') || combined.includes('scale')) {\n    systemArchetypes.push({\n      archetype: 'Limits to Growth',\n      description: 'Growth slows as system approaches capacity limits',\n      solution: 'Identify and remove constraints, or accept natural limits'\n    });\n  }\n  \n  if (combined.includes('fix') || combined.includes('quick')) {\n    systemArchetypes.push({\n      archetype: 'Fixes That Fail',\n      description: 'Quick fixes solve immediate problem but create worse long-term issues',\n      solution: 'Address root causes, not symptoms'\n    });\n  }\n  \n  if (combined.includes('shift') || combined.includes('burden')) {\n    systemArchetypes.push({\n      archetype: 'Shifting the Burden',\n      description: 'Symptomatic solution is easier than fundamental solution, so fundamental solution atrophies',\n      solution: 'Invest in fundamental solutions even when symptomatic solutions are available'"}
{"id":"78cfc224935e7af576e92b5704807186eb8d4613","source":"repo","path":"src/tools/systems-thinking.ts","sha":"8f1ce31dbbcae43b80ab6015eac71cb8682f6213","start":199,"end":229,"text":"    });\n  }\n  \n  if (combined.includes('compete') || combined.includes('resource')) {\n    systemArchetypes.push({\n      archetype: 'Tragedy of the Commons',\n      description: 'Individual actors deplete shared resource for personal gain',\n      solution: 'Add feedback to make consequences visible, or regulate access'\n    });\n  }\n  \n  systemArchetypes.push({\n    archetype: 'Success to the Successful',\n    description: 'Winner gets more resources, making them more likely to win again',\n    solution: 'Level the playing field or accept winner-take-all dynamics'\n  });\n  \n  const confidence = 70;\n  \n  return {\n    components,\n    feedbackLoops,\n    leveragePoints,\n    emergentBehaviors,\n    systemArchetypes,\n    confidence,\n    reasoning: `Analyzed system structure with ${components.length} components, ${feedbackLoops.length} feedback loops, ${leveragePoints.length} leverage points, ${emergentBehaviors.length} emergent behaviors, and ${systemArchetypes.length} system archetypes.`\n  };\n}\n\n"}
